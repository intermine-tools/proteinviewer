!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function r(t){var e,n=l.type;g[n].where[0].value=t;try{c.records(g[n]).then(function(t){t.length>0?("Gene"===n&&(l.identifier=t[0].symbol),e=i(t[0]),e.length>0?y.displayViewer(e):y.noResults(n)):y.noResults(n),setTimeout(y.cleanseResults,d.timeoutInterval)})}catch(r){console.error(r)}}function i(t){var e,n=[];if(t.primaryAccession)n.push(t.primaryAccession);else for(var r=0;r<t.proteins.length;r++)e=t.proteins[r],e.primaryAccession?n.push(e.primaryAccession):h.push(e.primaryIdentifier);return n}function o(t,e,n,r,i,o){i||(i=["selected"]),o||(o="ids"),m.notify({method:"has",params:{what:o,data:{key:i.join(",")+"-"+e,type:n,categories:i,ids:r,service:{root:t.root}}}})}var a=n(22),s=n(15),u=n(12);n(24);var c,l,f=0,h=[],p={hidden:[],parentElement:document.getElementById("imFeaturesViewer"),footerElement:document.getElementById("imFeaturesFooter"),chooserElement:document.getElementById("imChooser")},d={maxResultsToShow:5,timeoutInterval:500,numberOfTimesToCheckResults:10,noProteins:":( Sorry, there are no proteins associated with this ",noFeaturesAssociated:"The following proteins had no features associated with them: ",viewer:{noFeatures:"No features available for protein",notFound:"is not found"}},g={Protein:{from:"Protein",select:["primaryAccession","primaryIdentifier"],where:[{path:"id",op:"=",code:"A"}]},Gene:{from:"Gene",select:["proteins.primaryAccession","proteins.primaryIdentifier","symbol"],where:[{path:"id",op:"=",code:"A"}]}},v={Gene:{from:"Gene",select:["symbol","primaryIdentifier"],where:[{path:"id",op:"ONE OF",values:null}]},Protein:{select:["primaryAccession","primaryIdentifier"],where:[{path:"id",op:"ONE OF",values:null}]}},m=u.build({window:window.parent,origin:"*",scope:"CurrentStep"});m.bind("style",function(t,e){var n=document.getElementsByTagName("head")[0],r=document.createElement("link");return r.rel="stylesheet",r.href=e.stylesheet,n.appendChild(r),"ok"}),m.bind("configure",function(t,e){return"ok"});var y={displayViewer:function(t){var e;p.parentElement.innerHTML="",(e=y.makeParentHeader())&&p.parentElement.appendChild(e);for(var n=0;n<t.length;n++){var r,i,o=t[n];try{i=document.createElement("div"),i.setAttribute("class","proteinViewer"),i.appendChild(y.makeAccessionHeader(o)),r=i.appendChild(y.makeViewer(o)),p.parentElement.querySelectorAll(".proteinViewer").length<d.maxResultsToShow?p.parentElement.appendChild(i):p.hidden.push(i);new s({el:r,uniprotacc:o})}catch(a){console.error(a)}}},makeAccessionHeader:function(t){var e=document.createElement("h3");return e.appendChild(document.createTextNode("Primary Accession: "+t)),e},makeParentHeader:function(){var t=!1;try{"Gene"===l.type&&(t=document.createElement("h2"),t.appendChild(document.createTextNode("Proteins for "+l.type+": "+l.identifier)))}catch(e){console.error(e)}return t},makeViewer:function(t){var e=document.createElement("div");return e.setAttribute("id","proteinViewer-"+t),e},noResults:function(){p.parentElement.innerHTML=d.noProteins+l.type},cleanseResults:function(){f++;for(var t=p.parentElement.querySelectorAll(".proteinViewer"),e=p.hidden.slice(),n=0;n<t.length;n++)y.removeIfEmpty(t[n]);for(var n=0;n<e.length;n++)y.removeIfEmpty(e[n]);y.listCleansedResults(h),y.replenishResultCount(),y.makeShowAllControl(),f<d.numberOfTimesToCheckResults&&setTimeout(y.cleanseResults,d.timeoutInterval)},makeShowAllControl:function(){var t=document.getElementById("showAll");if(p.hidden.length>0){var e=document.createTextNode("Showing "+d.maxResultsToShow+" results of "+(d.maxResultsToShow+p.hidden.length));t.innerHTML="",t.appendChild(e);var n=document.createElement("button");n.setAttribute("class","btn");var r=document.createTextNode("Show all");n.appendChild(r),n.addEventListener("click",function(){y.showAllResults()}),t.appendChild(n)}else t.innerHTML=""},showAllResults:function(){try{document.getElementById("showAll").innerHTML=""}catch(t){console.error(t)}for(var e=0;e<p.hidden.length;e++)p.parentElement.appendChild(p.hidden[e])},replenishResultCount:function(){if(y.getNumResults()<d.maxResultsToShow&&p.hidden.length>0)for(var t,e=d.maxResultsToShow;e>0;e--)if(p.hidden.length>0)try{t=p.hidden.pop(),p.parentElement.appendChild(t)}catch(n){console.error(n,t)}},getNumResults:function(){return p.parentElement.querySelectorAll(".proteinViewer").length},removeIfEmpty:function(t){var t,e,n;e=t.querySelector("div"),y.isEmpty(e.innerHTML)&&(t.parentNode?p.parentElement.removeChild(t):p.hidden.splice(p.hidden.indexOf(t),1),n=e.getAttribute("id").split("proteinViewer-")[1],h.push(n))},isEmpty:function(t){var e=!1;return e=0===t.indexOf(d.viewer.noFeatures),e=e||t.indexOf(d.viewer.notFound)>=0},listCleansedResults:function(t){var e=document.getElementById("badResults"),n=document.createTextNode(d.noFeaturesAssociated+t.join(", "));e.innerHTML="",e.setAttribute("class","well"),e.appendChild(n)},chooseItem:function(){try{if("list"===l.what)c.fetchList(l.name).then(function(t){t.contents().then(function(t){y.makeItemChooser(t)})});else if(l.ids&&l.ids.length>1){var t=v[l.type];t.where[0].values=l.ids,c.records(t).then(function(t){y.makeItemChooser(t)})}else(l.id||1===l.ids.length)&&(p.chooserElement.remove(),r(l.id||l.ids[0]))}catch(e){console.error(e)}},makeItemChooser:function(t){for(var e,n,i="<h3>Which "+l.type+" would you like to see protein features for?</h3> <div>",a=0;a<t.length;a++)e=t[a],n=e.primaryAccession||e.symbol||e.primaryIdentifier,i+="<span class='label label-default' id='item-"+e.objectId+"'>"+n+"</span>";p.chooserElement.innerHTML=i+"</div>",p.chooserElement.addEventListener("click",function(t){if(0===t.target.id.indexOf("item-")){t.target.id.split("item-")[1];r(t.target.id.split("item-")[1]);var e=p.chooserElement.querySelector(".label-success");e&&e.setAttribute("class","label label-default"),t.target.setAttribute("class","label label-success"),o(c,l.type,l.type,l.ids||l.name,["selected"])}}),p.chooserElement.querySelector("span").click()}};m.bind("init",function(t,e){console.log("%cdata","background:honeydew;color:hotpink;font-weight:bold;",e);try{c=new a.Service({root:e.root||e.service.root}),l=e,y.chooseItem(),t.complete("ok")}catch(n){t.error("InitialisationError",n)}t.delayReturn(!0)})},function(t,e,n){var r,i;(function(){function n(t){function e(e,n,r,i,o,a){for(;o>=0&&a>o;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=E(r,o,4);var a=!N(n)&&_.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function o(t){return function(e,n,r){n=S(n,r);for(var i=C(e),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function a(t,e,n){return function(r,i,o){var a=0,s=C(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(d.call(r,a,s),_.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&s>o;o+=t)if(r[o]===i)return o;return-1}}function s(t,e){var n=I.length,r=t.constructor,i=_.isFunction(r)&&r.prototype||f,o="constructor";for(_.has(t,o)&&!_.contains(e,o)&&e.push(o);n--;)o=I[n],o in t&&t[o]!==i[o]&&!_.contains(e,o)&&e.push(o)}var u=this,c=u._,l=Array.prototype,f=Object.prototype,h=Function.prototype,p=l.push,d=l.slice,g=f.toString,v=f.hasOwnProperty,m=Array.isArray,y=Object.keys,b=h.bind,w=Object.create,x=function(){},_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=_),e._=_,_.VERSION="1.8.3";var E=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},S=function(t,e,n){return null==t?_.identity:_.isFunction(t)?E(t,e,n):_.isObject(t)?_.matcher(t):_.property(t)};_.iteratee=function(t,e){return S(t,e,1/0)};var M=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;s>u;u++){var c=a[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},T=function(t){if(!_.isObject(t))return{};if(w)return w(t);x.prototype=t;var e=new x;return x.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},A=Math.pow(2,53)-1,C=k("length"),N=function(t){var e=C(t);return"number"==typeof e&&e>=0&&A>=e};_.each=_.forEach=function(t,e,n){e=E(e,n);var r,i;if(N(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=_.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},_.map=_.collect=function(t,e,n){e=S(e,n);for(var r=!N(t)&&_.keys(t),i=(r||t).length,o=Array(i),a=0;i>a;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},_.reduce=_.foldl=_.inject=n(1),_.reduceRight=_.foldr=n(-1),_.find=_.detect=function(t,e,n){var r;return r=N(t)?_.findIndex(t,e,n):_.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},_.filter=_.select=function(t,e,n){var r=[];return e=S(e,n),_.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},_.reject=function(t,e,n){return _.filter(t,_.negate(S(e)),n)},_.every=_.all=function(t,e,n){e=S(e,n);for(var r=!N(t)&&_.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},_.some=_.any=function(t,e,n){e=S(e,n);for(var r=!N(t)&&_.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},_.contains=_.includes=_.include=function(t,e,n,r){return N(t)||(t=_.values(t)),("number"!=typeof n||r)&&(n=0),_.indexOf(t,e,n)>=0},_.invoke=function(t,e){var n=d.call(arguments,2),r=_.isFunction(e);return _.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},_.pluck=function(t,e){return _.map(t,_.property(e))},_.where=function(t,e){return _.filter(t,_.matcher(e))},_.findWhere=function(t,e){return _.find(t,_.matcher(e))},_.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=N(t)?t:_.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],r>o&&(o=r)}else e=S(e,n),_.each(t,function(t,n,r){i=e(t,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},_.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=N(t)?t:_.values(t);for(var s=0,u=t.length;u>s;s++)r=t[s],o>r&&(o=r)}else e=S(e,n),_.each(t,function(t,n,r){i=e(t,n,r),(a>i||i===1/0&&o===1/0)&&(o=t,a=i)});return o},_.shuffle=function(t){for(var e,n=N(t)?t:_.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=_.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},_.sample=function(t,e,n){return null==e||n?(N(t)||(t=_.values(t)),t[_.random(t.length-1)]):_.shuffle(t).slice(0,Math.max(0,e))},_.sortBy=function(t,e,n){return e=S(e,n),_.pluck(_.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var L=function(t){return function(e,n,r){var i={};return n=S(n,r),_.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};_.groupBy=L(function(t,e,n){_.has(t,n)?t[n].push(e):t[n]=[e]}),_.indexBy=L(function(t,e,n){t[n]=e}),_.countBy=L(function(t,e,n){_.has(t,n)?t[n]++:t[n]=1}),_.toArray=function(t){return t?_.isArray(t)?d.call(t):N(t)?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:N(t)?t.length:_.keys(t).length},_.partition=function(t,e,n){e=S(e,n);var r=[],i=[];return _.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},_.first=_.head=_.take=function(t,e,n){return null!=t?null==e||n?t[0]:_.initial(t,t.length-e):void 0},_.initial=function(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},_.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:_.rest(t,Math.max(0,t.length-e)):void 0},_.rest=_.tail=_.drop=function(t,e,n){return d.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,_.identity)};var R=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=C(t);s>a;a++){var u=t[a];if(N(u)&&(_.isArray(u)||_.isArguments(u))){e||(u=R(u,e,n));var c=0,l=u.length;for(i.length+=l;l>c;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};_.flatten=function(t,e){return R(t,e,!1)},_.without=function(t){return _.difference(t,d.call(arguments,1))},_.uniq=_.unique=function(t,e,n,r){_.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=S(n,r));for(var i=[],o=[],a=0,s=C(t);s>a;a++){var u=t[a],c=n?n(u,a,t):u;e?(a&&o===c||i.push(u),o=c):n?_.contains(o,c)||(o.push(c),i.push(u)):_.contains(i,u)||i.push(u)}return i},_.union=function(){return _.uniq(R(arguments,!0,!0))},_.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=C(t);i>r;r++){var o=t[r];if(!_.contains(e,o)){for(var a=1;n>a&&_.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},_.difference=function(t){var e=R(arguments,!0,!0,1);return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(t){for(var e=t&&_.max(t,C).length||0,n=Array(e),r=0;e>r;r++)n[r]=_.pluck(t,r);return n},_.object=function(t,e){for(var n={},r=0,i=C(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},_.findIndex=o(1),_.findLastIndex=o(-1),_.sortedIndex=function(t,e,n,r){n=S(n,r,1);for(var i=n(e),o=0,a=C(t);a>o;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},_.indexOf=a(1,_.findIndex,_.sortedIndex),_.lastIndexOf=a(-1,_.findLastIndex),_.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var O=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=T(t.prototype),a=t.apply(o,i);return _.isObject(a)?a:o};_.bind=function(t,e){if(b&&t.bind===b)return b.apply(t,d.call(arguments,1));if(!_.isFunction(t))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return O(t,r,e,this,n.concat(d.call(arguments)))};return r},_.partial=function(t){var e=d.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;i>a;a++)o[a]=e[a]===_?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return O(t,n,this,this,o)};return n},_.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=_.bind(t[n],t);return t},_.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return _.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},_.delay=function(t,e){var n=d.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},_.defer=_.partial(_.delay,_,1),_.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:_.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=_.now();s||n.leading!==!1||(s=c);var l=e-(c-s);return r=this,i=arguments,0>=l||l>e?(a&&(clearTimeout(a),a=null),s=c,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,l)),o}},_.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var c=_.now()-a;e>c&&c>=0?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=_.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(s=t.apply(o,i),o=i=null),s}},_.wrap=function(t,e){return _.partial(e,t)},_.negate=function(t){return function(){return!t.apply(this,arguments)}},_.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},_.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},_.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},_.once=_.partial(_.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.keys=function(t){if(!_.isObject(t))return[];if(y)return y(t);var e=[];for(var n in t)_.has(t,n)&&e.push(n);return j&&s(t,e),e},_.allKeys=function(t){if(!_.isObject(t))return[];var e=[];for(var n in t)e.push(n);return j&&s(t,e),e},_.values=function(t){for(var e=_.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},_.mapObject=function(t,e,n){e=S(e,n);for(var r,i=_.keys(t),o=i.length,a={},s=0;o>s;s++)r=i[s],a[r]=e(t[r],r,t);return a},_.pairs=function(t){for(var e=_.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},_.invert=function(t){for(var e={},n=_.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()},_.extend=M(_.allKeys),_.extendOwn=_.assign=M(_.keys),_.findKey=function(t,e,n){e=S(e,n);for(var r,i=_.keys(t),o=0,a=i.length;a>o;o++)if(r=i[o],e(t[r],r,t))return r},_.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;_.isFunction(e)?(i=_.allKeys(a),r=E(e,n)):(i=R(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;u>s;s++){var c=i[s],l=a[c];r(l,c,a)&&(o[c]=l)}return o},_.omit=function(t,e,n){if(_.isFunction(e))e=_.negate(e);else{var r=_.map(R(arguments,!1,!1,1),String);e=function(t,e){return!_.contains(r,e)}}return _.pick(t,e,n)},_.defaults=M(_.allKeys,!0),_.create=function(t,e){var n=T(t);return e&&_.extendOwn(n,e),n},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t},_.isMatch=function(t,e){var n=_.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var P=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var i=g.call(t);if(i!==g.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(_.isFunction(a)&&a instanceof a&&_.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!P(t[u],e[u],n,r))return!1}else{var c,l=_.keys(t);if(u=l.length,_.keys(e).length!==u)return!1;for(;u--;)if(c=l[u],!_.has(e,c)||!P(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};_.isEqual=function(t,e){return P(t,e)},_.isEmpty=function(t){return null==t?!0:N(t)&&(_.isArray(t)||_.isString(t)||_.isArguments(t))?0===t.length:0===_.keys(t).length},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=m||function(t){return"[object Array]"===g.call(t)},_.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){_["is"+t]=function(e){return g.call(e)==="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return _.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(t){return"function"==typeof t||!1}),_.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&t!==+t},_.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===g.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return null!=t&&v.call(t,e)},_.noConflict=function(){return u._=c,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.noop=function(){},_.property=k,_.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(e){return _.isMatch(e,t)}},_.times=function(t,e,n){var r=Array(Math.max(0,t));e=E(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=_.invert(q),U=function(t){var e=function(e){return t[e]},n="(?:"+_.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};_.escape=U(q),_.unescape=U(D),_.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),_.isFunction(r)?r.call(t):r};var F=0;_.uniqueId=function(t){var e=++F+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,V=function(t){return"\\"+z[t]};_.template=function(t,e,n){!e&&n&&(e=n),e=_.defaults({},e,_.templateSettings);var r=RegExp([(e.escape||B).source,(e.interpolate||B).source,(e.evaluate||B).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(H,V),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var u=function(t){return a.call(this,t,_)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},_.chain=function(t){var e=_(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?_(e).chain():e};_.mixin=function(t){_.each(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return p.apply(t,arguments),Y(this,n.apply(_,t))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Y(this,n)}}),_.each(["concat","join","slice"],function(t){var e=l[t];_.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return _}.apply(e,r),!(void 0!==i&&(t.exports=i))}).call(this)},function(t,e,n){var r,i;!function(){function o(t){return t&&(t.ownerDocument||t.document||t).documentElement}function a(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function s(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function u(t){return null===t?NaN:+t}function c(t){return!isNaN(t)}function l(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function f(t){return t.length}function h(t){for(var e=1;t*e%1;)e*=10;return e}function p(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function d(){this._=Object.create(null)}function g(t){return(t+="")===Ta||t[0]===ka?ka+t:t}function v(t){return(t+="")[0]===ka?t.slice(1):t}function m(t){return g(t)in this._}function y(t){return(t=g(t))in this._&&delete this._[t]}function b(){var t=[];for(var e in this._)t.push(v(e));return t}function w(){var t=0;for(var e in this._)++t;return t}function x(){for(var t in this._)return!1;return!0}function _(){this._=Object.create(null)}function E(t){return t}function S(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function M(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=Aa.length;r>n;++n){var i=Aa[n]+e;if(i in t)return i}}function T(){}function k(){}function A(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new d;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function C(){pa.event.preventDefault()}function N(){for(var t,e=pa.event;t=e.sourceEvent;)e=t;return e}function L(t){for(var e=new k,n=0,r=arguments.length;++n<r;)e[arguments[n]]=A(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=pa.event;i.target=t,pa.event=i,e[i.type].apply(n,r)}finally{pa.event=o}}},e}function R(t){return Na(t,ja),t}function O(t){return"function"==typeof t?t:function(){return La(t,this)}}function j(t){return"function"==typeof t?t:function(){return Ra(t,this)}}function I(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=pa.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:a:t.local?o:i}function P(t){return t.trim().replace(/\s+/g," ")}function q(t){return new RegExp("(?:^|\\s+)"+pa.requote(t)+"(?:\\s+|$)","g")}function D(t){return(t+"").trim().split(/^|\s+/)}function U(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=D(t).map(F);var i=t.length;return"function"==typeof e?r:n}function F(t){var e=q(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",P(i+" "+t))):n.setAttribute("class",P(i.replace(e," ")))}}function B(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function z(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function H(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=pa.ns.qualify(t)).local?n:e}function V(){var t=this.parentNode;t&&t.removeChild(this)}function Y(t){return{__data__:t}}function W(t){return function(){return Oa(this,t)}}function X(t){return arguments.length||(t=s),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function $(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,s=o.length;s>a;a++)(i=o[a])&&e(i,a,n);return t}function J(t){return Na(t,Pa),t}function G(t){var e,n;return function(r,i,o){var a,s=t[o].update,u=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<u;);return a}}function Z(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=u(e,ga(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+pa.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var a="__on"+t,s=t.indexOf("."),u=K;s>0&&(t=t.slice(0,s));var c=qa.get(t);return c&&(t=c,u=Q),s?e?i:r:e?T:o}function K(t,e){return function(n){var r=pa.event;pa.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{pa.event=r}}}function Q(t,e){var n=K(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function tt(t){var e=".dragsuppress-"+ ++Ua,n="click"+e,r=pa.select(a(t)).on("touchmove"+e,C).on("dragstart"+e,C).on("selectstart"+e,C);if(null==Da&&(Da="onselectstart"in t?!1:M(t.style,"userSelect")),Da){var i=o(t).style,s=i[Da];i[Da]="none"}return function(t){if(r.on(e,null),Da&&(i[Da]=s),t){var o=function(){r.on(n,null)};r.on(n,function(){C(),o()},!0),setTimeout(o,0)}}}function et(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Fa){var i=a(t);if(i.scrollX||i.scrollY){n=pa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();Fa=!(o.f||o.e),n.remove()}}return Fa?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function nt(){return pa.event.changedTouches[0].identifier}function rt(t){return t>0?1:0>t?-1:0}function it(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function ot(t){return t>1?0:-1>t?Ha:Math.acos(t)}function at(t){return t>1?Wa:-1>t?-Wa:Math.asin(t)}function st(t){return((t=Math.exp(t))-1/t)/2}function ut(t){return((t=Math.exp(t))+1/t)/2}function ct(t){return((t=Math.exp(2*t))-1)/(t+1)}function lt(t){return(t=Math.sin(t/2))*t}function ft(){}function ht(t,e,n){return this instanceof ht?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ht?new ht(t.h,t.s,t.l):Tt(""+t,kt,ht):new ht(t,e,n)}function pt(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new _t(i(t+120),i(t),i(t-120))}function dt(t,e,n){return this instanceof dt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof dt?new dt(t.h,t.c,t.l):t instanceof vt?yt(t.l,t.a,t.b):yt((t=At((t=pa.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new dt(t,e,n)}function gt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new vt(n,Math.cos(t*=Xa)*e,Math.sin(t)*e)}function vt(t,e,n){return this instanceof vt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof vt?new vt(t.l,t.a,t.b):t instanceof dt?gt(t.h,t.c,t.l):At((t=_t(t)).r,t.g,t.b):new vt(t,e,n)}function mt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=bt(i)*is,r=bt(r)*os,o=bt(o)*as,new _t(xt(3.2404542*i-1.5371385*r-.4985314*o),xt(-.969266*i+1.8760108*r+.041556*o),xt(.0556434*i-.2040259*r+1.0572252*o))}function yt(t,e,n){return t>0?new dt(Math.atan2(n,e)*$a,Math.sqrt(e*e+n*n),t):new dt(NaN,NaN,t)}function bt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function wt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function xt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function _t(t,e,n){return this instanceof _t?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof _t?new _t(t.r,t.g,t.b):Tt(""+t,_t,pt):new _t(t,e,n)}function Et(t){return new _t(t>>16,t>>8&255,255&t)}function St(t){return Et(t)+""}function Mt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Tt(t,e,n){var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Nt(i[0]),Nt(i[1]),Nt(i[2]))}return(o=cs.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,u=15&o,u=u<<4|u):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),e(a,s,u))}function kt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,u=(a+o)/2;return s?(i=.5>u?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=u>0&&1>u?0:r),new ht(r,i,u)}function At(t,e,n){t=Ct(t),e=Ct(e),n=Ct(n);var r=wt((.4124564*t+.3575761*e+.1804375*n)/is),i=wt((.2126729*t+.7151522*e+.072175*n)/os),o=wt((.0193339*t+.119192*e+.9503041*n)/as);
return vt(116*i-16,500*(r-i),200*(i-o))}function Ct(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Nt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Lt(t){return"function"==typeof t?t:function(){return t}}function Rt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ot(e,n,t,r)}}function Ot(t,e,n,r){function i(){var t,e=u.status;if(!e&&It(u)||e>=200&&300>e||304===e){try{t=n.call(o,u)}catch(r){return void a.error.call(o,r)}a.load.call(o,t)}else a.error.call(o,u)}var o={},a=pa.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(t){var e=pa.event;pa.event=t;try{a.progress.call(o,u)}finally{pa.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ga(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),u.setRequestHeader)for(var l in s)u.setRequestHeader(l,s[l]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=c&&(u.responseType=c),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},pa.rebind(o,a,"on"),null==r?o:o.get(jt(r))}function jt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function It(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Pt(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return fs?fs.n=o:ls=o,fs=o,hs||(ps=clearTimeout(ps),hs=1,ds(qt)),o}function qt(){var t=Dt(),e=Ut()-t;e>24?(isFinite(e)&&(clearTimeout(ps),ps=setTimeout(qt,e)),hs=0):(hs=1,ds(qt))}function Dt(){for(var t=Date.now(),e=ls;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ut(){for(var t,e=ls,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ls=e.n;return fs=t,n}function Ft(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Bt(t,e){var n=Math.pow(10,3*Ma(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function zt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:E;return function(t){var n=vs.exec(t),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",u=n[4]||"",c=n[5],l=+n[6],f=n[7],h=n[8],p=n[9],d=1,g="",v="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===a)&&(c=r="0",a="="),p){case"n":f=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(g="0"+p.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":d=-1,p="r"}"$"===u&&(g=i[0],v=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=ms.get(p)||Ht;var b=c&&f;return function(t){var n=v;if(m&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>d){var u=pa.formatPrefix(t,h);t=u.scale(t),n=u.symbol+v}else t*=d;t=p(t,h);var w,x,_=t.lastIndexOf(".");if(0>_){var E=y?t.lastIndexOf("e"):-1;0>E?(w=t,x=""):(w=t.substring(0,E),x=t.substring(E))}else w=t.substring(0,_),x=e+t.substring(_+1);!c&&f&&(w=o(w,1/0));var S=g.length+w.length+x.length+(b?0:i.length),M=l>S?new Array(S=l-S+1).join(r):"";return b&&(w=o(M+w,M.length?l-x.length:1/0)),i+=g,t=w+x,("<"===a?i+t+M:">"===a?M+i+t:"^"===a?M.substring(0,S>>=1)+i+t+M.substring(S):i+(b?t:M+t))+n}}}function Ht(t){return t+""}function Vt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Yt(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new bs(n-1)),1),n}function o(t,n){return e(t=new bs(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;r>a;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,n){try{bs=Vt;var r=new Vt;return r._=t,a(r,e,n)}finally{bs=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var u=t.utc=Wt(t);return u.floor=u,u.round=Wt(r),u.ceil=Wt(i),u.offset=Wt(o),u.range=s,t}function Wt(t){return function(e,n){try{bs=Vt;var r=new Vt;return r._=e,t(r,n)._}finally{bs=Date}}}function Xt(t){function e(t){function e(e){for(var n,i,o,a=[],s=-1,u=0;++s<r;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=xs[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=A[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),u=s+1);return a.push(t.slice(u,s)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&bs!==Vt,a=new(o?Vt:bs);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,s=0,u=e.length,c=n.length;u>s;){if(r>=c)return-1;if(i=e.charCodeAt(s++),37===i){if(a=e.charAt(s++),o=C[a in xs?e.charAt(s++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){w.lastIndex=0;var r=w.exec(e.slice(n));return r?(t.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){T.lastIndex=0;var r=T.exec(e.slice(n));return r?(t.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){S.lastIndex=0;var r=S.exec(e.slice(n));return r?(t.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,r){return n(t,A.c.toString(),e,r)}function u(t,e,r){return n(t,A.x.toString(),e,r)}function c(t,e,r){return n(t,A.X.toString(),e,r)}function l(t,e,n){var r=b.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,h=t.date,p=t.time,d=t.periods,g=t.days,v=t.shortDays,m=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{bs=Vt;var e=new bs;return e._=t,r(e)}finally{bs=Date}}var r=e(t);return n.parse=function(t){try{bs=Vt;var e=r.parse(t);return e&&e._}finally{bs=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=pe;var b=pa.map(),w=Jt(g),x=Gt(g),_=Jt(v),E=Gt(v),S=Jt(m),M=Gt(m),T=Jt(y),k=Gt(y);d.forEach(function(t,e){b.set(t.toLowerCase(),e)});var A={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(f),d:function(t,e){return $t(t.getDate(),e,2)},e:function(t,e){return $t(t.getDate(),e,2)},H:function(t,e){return $t(t.getHours(),e,2)},I:function(t,e){return $t(t.getHours()%12||12,e,2)},j:function(t,e){return $t(1+ys.dayOfYear(t),e,3)},L:function(t,e){return $t(t.getMilliseconds(),e,3)},m:function(t,e){return $t(t.getMonth()+1,e,2)},M:function(t,e){return $t(t.getMinutes(),e,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,e){return $t(t.getSeconds(),e,2)},U:function(t,e){return $t(ys.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return $t(ys.mondayOfYear(t),e,2)},x:e(h),X:e(p),y:function(t,e){return $t(t.getFullYear()%100,e,2)},Y:function(t,e){return $t(t.getFullYear()%1e4,e,4)},Z:fe,"%":function(){return"%"}},C={a:r,A:i,b:o,B:a,c:s,d:oe,e:oe,H:se,I:se,j:ae,L:le,m:ie,M:ue,p:l,S:ce,U:Kt,w:Zt,W:Qt,x:u,X:c,y:ee,Y:te,Z:ne,"%":he};return e}function $t(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Jt(t){return new RegExp("^(?:"+t.map(pa.requote).join("|")+")","i")}function Gt(t){for(var e=new d,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Zt(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Kt(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Qt(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function te(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ee(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+2));return r?(t.y=re(+r[0]),n+r[0].length):-1}function ne(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function re(t){return t+(t>68?1900:2e3)}function ie(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function oe(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ae(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function se(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ue(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ce(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function le(t,e,n){_s.lastIndex=0;var r=_s.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function fe(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=Ma(e)/60|0,i=Ma(e)%60;return n+$t(r,"0",2)+$t(i,"0",2)}function he(t,e,n){Es.lastIndex=0;var r=Es.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function pe(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function de(){}function ge(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function ve(t,e){t&&ks.hasOwnProperty(t.type)&&ks[t.type](t,e)}function me(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ye(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)me(t[n],e,1);e.polygonEnd()}function be(){function t(t,e){t*=Xa,e=e*Xa/2+Ha/4;var n=t-r,a=n>=0?1:-1,s=a*n,u=Math.cos(e),c=Math.sin(e),l=o*c,f=i*u+l*Math.cos(s),h=l*a*Math.sin(s);Cs.add(Math.atan2(h,f)),r=t,i=u,o=c}var e,n,r,i,o;Ns.point=function(a,s){Ns.point=t,r=(e=a)*Xa,i=Math.cos(s=(n=s)*Xa/2+Ha/4),o=Math.sin(s)},Ns.lineEnd=function(){t(e,n)}}function we(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function xe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function _e(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ee(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Se(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Me(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Te(t){return[Math.atan2(t[1],t[0]),at(t[2])]}function ke(t,e){return Ma(t[0]-e[0])<Ba&&Ma(t[1]-e[1])<Ba}function Ae(t,e){t*=Xa;var n=Math.cos(e*=Xa);Ce(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Ce(t,e,n){++Ls,Os+=(t-Os)/Ls,js+=(e-js)/Ls,Is+=(n-Is)/Ls}function Ne(){function t(t,i){t*=Xa;var o=Math.cos(i*=Xa),a=o*Math.cos(t),s=o*Math.sin(t),u=Math.sin(i),c=Math.atan2(Math.sqrt((c=n*u-r*s)*c+(c=r*a-e*u)*c+(c=e*s-n*a)*c),e*a+n*s+r*u);Rs+=c,Ps+=c*(e+(e=a)),qs+=c*(n+(n=s)),Ds+=c*(r+(r=u)),Ce(e,n,r)}var e,n,r;zs.point=function(i,o){i*=Xa;var a=Math.cos(o*=Xa);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),zs.point=t,Ce(e,n,r)}}function Le(){zs.point=Ae}function Re(){function t(t,e){t*=Xa;var n=Math.cos(e*=Xa),a=n*Math.cos(t),s=n*Math.sin(t),u=Math.sin(e),c=i*u-o*s,l=o*a-r*u,f=r*s-i*a,h=Math.sqrt(c*c+l*l+f*f),p=r*a+i*s+o*u,d=h&&-ot(p)/h,g=Math.atan2(h,p);Us+=d*c,Fs+=d*l,Bs+=d*f,Rs+=g,Ps+=g*(r+(r=a)),qs+=g*(i+(i=s)),Ds+=g*(o+(o=u)),Ce(r,i,o)}var e,n,r,i,o;zs.point=function(a,s){e=a,n=s,zs.point=t,a*=Xa;var u=Math.cos(s*=Xa);r=u*Math.cos(a),i=u*Math.sin(a),o=Math.sin(s),Ce(r,i,o)},zs.lineEnd=function(){t(e,n),zs.lineEnd=Le,zs.point=Ae}}function Oe(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function je(){return!0}function Ie(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(ke(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var u=new qe(n,t,null,!0),c=new qe(n,null,u,!1);u.o=c,o.push(u),a.push(c),u=new qe(r,t,null,!1),c=new qe(r,null,u,!0),u.o=c,o.push(u),a.push(c)}}),a.sort(e),Pe(o),Pe(a),o.length){for(var s=0,u=n,c=a.length;c>s;++s)a[s].e=u=!u;for(var l,f,h=o[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var s=0,c=l.length;c>s;++s)i.point((f=l[s])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var s=l.length-1;s>=0;--s)i.point((f=l[s])[0],f[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Pe(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function qe(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function De(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);v.point(n[0],n[1])}function u(){y.point=s,v.lineStart()}function c(){y.point=a,v.lineEnd()}function l(t,e){g.push([t,e]);var n=i(t,e);w.point(n[0],n[1])}function f(){w.lineStart(),g=[]}function h(){l(g[0][0],g[0][1]),w.lineEnd();var t,e=w.clean(),n=b.buffer(),r=n.length;if(g.pop(),d.push(g),g=null,r)if(1&e){t=n[0];var i,r=t.length-1,a=-1;if(r>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Ue))}var p,d,g,v=e(o),m=i.invert(r[0],r[1]),y={point:a,lineStart:u,lineEnd:c,polygonStart:function(){y.point=l,y.lineStart=f,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=a,y.lineStart=u,y.lineEnd=c,p=pa.merge(p);var t=Ye(m,d);p.length?(x||(o.polygonStart(),x=!0),Ie(p,Be,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Fe(),w=e(b),x=!1;return y}}function Ue(t){return t.length>1}function Fe(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:T,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Be(t,e){return((t=t.x)[0]<0?t[1]-Wa-Ba:Wa-t[1])-((e=e.x)[0]<0?e[1]-Wa-Ba:Wa-e[1])}function ze(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ha:-Ha,u=Ma(o-n);Ma(u-Ha)<Ba?(t.point(n,r=(r+a)/2>0?Wa:-Wa),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Ha&&(Ma(n-i)<Ba&&(n-=i*Ba),Ma(o-s)<Ba&&(o-=s*Ba),r=He(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function He(t,e,n,r){var i,o,a=Math.sin(t-n);return Ma(a)>Ba?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}function Ve(t,e,n,r){var i;if(null==t)i=n*Wa,r.point(-Ha,i),r.point(0,i),r.point(Ha,i),r.point(Ha,0),r.point(Ha,-i),r.point(0,-i),r.point(-Ha,-i),r.point(-Ha,0),r.point(-Ha,i);else if(Ma(t[0]-e[0])>Ba){var o=t[0]<e[0]?Ha:-Ha;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Ye(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Cs.reset();for(var s=0,u=e.length;u>s;++s){var c=e[s],l=c.length;if(l)for(var f=c[0],h=f[0],p=f[1]/2+Ha/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===l&&(v=0),t=c[v];var m=t[0],y=t[1]/2+Ha/4,b=Math.sin(y),w=Math.cos(y),x=m-h,_=x>=0?1:-1,E=_*x,S=E>Ha,M=d*b;if(Cs.add(Math.atan2(M*_*Math.sin(E),g*w+M*Math.cos(E))),o+=S?x+_*Va:x,S^h>=n^m>=n){var T=_e(we(f),we(t));Me(T);var k=_e(i,T);Me(k);var A=(S^x>=0?-1:1)*at(k[2]);(r>A||r===A&&(T[0]||T[1]))&&(a+=S^x>=0?1:-1)}if(!v++)break;h=m,d=b,g=w,f=t}}return(-Ba>o||Ba>o&&0>Cs)^1&a}function We(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,h){var p,d=[f,h],g=e(f,h),v=a?g?0:i(f,h):g?i(f+(0>f?Ha:-Ha),h):0;if(!n&&(c=u=g)&&t.lineStart(),g!==u&&(p=r(n,d),(ke(n,p)||ke(d,p))&&(d[0]+=Ba,d[1]+=Ba,g=e(d[0],d[1]))),g!==u)l=0,g?(t.lineStart(),p=r(d,n),t.point(p[0],p[1])):(p=r(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&a^g){var m;v&o||!(m=r(d,n,!0))||(l=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||n&&ke(n,d)||t.point(d[0],d[1]),n=d,u=g,o=v},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return l|(c&&u)<<1}}}function r(t,e,n){var r=we(t),i=we(e),a=[1,0,0],s=_e(r,i),u=xe(s,s),c=s[0],l=u-c*c;if(!l)return!n&&t;var f=o*u/l,h=-o*c/l,p=_e(a,s),d=Se(a,f),g=Se(s,h);Ee(d,g);var v=p,m=xe(d,v),y=xe(v,v),b=m*m-y*(xe(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),x=Se(v,(-m-w)/y);if(Ee(x,d),x=Te(x),!n)return x;var _,E=t[0],S=e[0],M=t[1],T=e[1];E>S&&(_=E,E=S,S=_);var k=S-E,A=Ma(k-Ha)<Ba,C=A||Ba>k;if(!A&&M>T&&(_=M,M=T,T=_),C?A?M+T>0^x[1]<(Ma(x[0]-E)<Ba?M:T):M<=x[1]&&x[1]<=T:k>Ha^(E<=x[0]&&x[0]<=S)){var N=Se(v,(-m+w)/y);return Ee(N,d),[x,Te(N)]}}}function i(e,n){var r=a?t:Ha-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),a=o>0,s=Ma(o)>Ba,u=wn(t,6*Xa);return De(e,n,u,a?[0,-t]:[-Ha,t-Ha])}function Xe(t,e,n,r){return function(i){var o,a=i.a,s=i.b,u=a.x,c=a.y,l=s.x,f=s.y,h=0,p=1,d=l-u,g=f-c;if(o=t-u,d||!(o>0)){if(o/=d,0>d){if(h>o)return;p>o&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=n-u,d||!(0>o)){if(o/=d,0>d){if(o>p)return;o>h&&(h=o)}else if(d>0){if(h>o)return;p>o&&(p=o)}if(o=e-c,g||!(o>0)){if(o/=g,0>g){if(h>o)return;p>o&&(p=o)}else if(g>0){if(o>p)return;o>h&&(h=o)}if(o=r-c,g||!(0>o)){if(o/=g,0>g){if(o>p)return;o>h&&(h=o)}else if(g>0){if(h>o)return;p>o&&(p=o)}return h>0&&(i.a={x:u+h*d,y:c+h*g}),1>p&&(i.b={x:u+p*d,y:c+p*g}),i}}}}}}function $e(t,e,n,r){function i(r,i){return Ma(r[0]-t)<Ba?i>0?0:3:Ma(r[0]-n)<Ba?i>0?2:1:Ma(r[1]-e)<Ba?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t){for(var e=0,n=v.length,r=t[1],i=0;n>i;++i)for(var o,a=1,s=v[i],u=s.length,c=s[0];u>a;++a)o=s[a],c[1]<=r?o[1]>r&&it(c,o,t)>0&&++e:o[1]<=r&&it(c,o,t)<0&&--e,c=o;return 0!==e}function c(o,s,u,c){var l=0,f=0;if(null==o||(l=i(o,u))!==(f=i(s,u))||a(o,s)<0^u>0){do c.point(0===l||3===l?t:n,l>1?r:e);while((l=(l+u+4)%4)!==f)}else c.point(s[0],s[1])}function l(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function f(t,e){l(t,e)&&s.point(t,e)}function h(){C.point=d,v&&v.push(m=[]),S=!0,E=!1,x=_=NaN}function p(){g&&(d(y,b),w&&E&&k.rejoin(),g.push(k.buffer())),C.point=f,E&&s.lineEnd()}function d(t,e){t=Math.max(-Vs,Math.min(Vs,t)),e=Math.max(-Vs,Math.min(Vs,e));var n=l(t,e);if(v&&m.push([t,e]),S)y=t,b=e,w=n,S=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&E)s.point(t,e);else{var r={a:{x:x,y:_},b:{x:t,y:e}};A(r)?(E||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),M=!1):n&&(s.lineStart(),s.point(t,e),M=!1)}x=t,_=e,E=n}var g,v,m,y,b,w,x,_,E,S,M,T=s,k=Fe(),A=Xe(t,e,n,r),C={point:f,lineStart:h,lineEnd:p,polygonStart:function(){s=k,g=[],v=[],M=!0},polygonEnd:function(){s=T,g=pa.merge(g);var e=u([t,r]),n=M&&e,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),c(null,null,1,s),s.lineEnd()),i&&Ie(g,o,e,c,s),s.polygonEnd()),g=v=m=null}};return C}}function Je(t){var e=0,n=Ha/3,r=hn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ha/180,n=t[1]*Ha/180):[e/Ha*180,n/Ha*180]},i}function Ge(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,at((o-(t*t+n*n)*i*i)/(2*i))]},n}function Ze(){function t(t,e){Ws+=i*t-r*e,r=t,i=e}var e,n,r,i;Zs.point=function(o,a){Zs.point=t,e=r=o,n=i=a},Zs.lineEnd=function(){t(e,n)}}function Ke(t,e){Xs>t&&(Xs=t),t>Js&&(Js=t),$s>e&&($s=e),e>Gs&&(Gs=e)}function Qe(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function r(){s.point=t}function i(){a.push("Z")}var o=tn(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=tn(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function tn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function en(t,e){Os+=t,js+=e,++Is}function nn(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);Ps+=a*(e+t)/2,qs+=a*(n+r)/2,Ds+=a,en(e=t,n=r)}var e,n;Qs.point=function(r,i){Qs.point=t,en(e=r,n=i)}}function rn(){Qs.point=en}function on(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);Ps+=a*(r+t)/2,qs+=a*(i+e)/2,Ds+=a,a=i*t-r*e,Us+=a*(r+t),Fs+=a*(i+e),Bs+=3*a,en(r=t,i=e)}var e,n,r,i;Qs.point=function(o,a){Qs.point=t,en(e=r=o,n=i=a)},Qs.lineEnd=function(){t(e,n)}}function an(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,Va)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:T};return s}function sn(t){function e(t){return(s?r:n)(t)}function n(e){return ln(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){b=NaN,S.point=o,e.lineStart()}function o(n,r){var o=we([n,r]),a=t(n,r);i(b,w,y,x,_,E,b=a[0],w=a[1],y=n,x=o[0],_=o[1],E=o[2],s,e),e.point(b,w)}function a(){S.point=n,e.lineEnd()}function u(){r(),S.point=c,S.lineEnd=l}function c(t,e){o(f=t,h=e),p=b,d=w,g=x,v=_,m=E,S.point=o}function l(){i(b,w,y,x,_,E,p,d,f,g,v,m,s,e),S.lineEnd=a,a()}var f,h,p,d,g,v,m,y,b,w,x,_,E,S={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),S.lineStart=u},polygonEnd:function(){e.polygonEnd(),S.lineStart=r}};return S}function i(e,n,r,s,u,c,l,f,h,p,d,g,v,m){var y=l-e,b=f-n,w=y*y+b*b;if(w>4*o&&v--){var x=s+p,_=u+d,E=c+g,S=Math.sqrt(x*x+_*_+E*E),M=Math.asin(E/=S),T=Ma(Ma(E)-1)<Ba||Ma(r-h)<Ba?(r+h)/2:Math.atan2(_,x),k=t(T,M),A=k[0],C=k[1],N=A-e,L=C-n,R=b*N-y*L;(R*R/w>o||Ma((y*N+b*L)/w-.5)>.3||a>s*p+u*d+c*g)&&(i(e,n,r,s,u,c,A,C,T,x/=S,_/=S,E,v,m),m.point(A,C),i(A,C,T,x,_,E,l,f,h,p,d,g,v,m))}}var o=.5,a=Math.cos(30*Xa),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function un(t){var e=sn(function(e,n){return t([e*$a,n*$a])});return function(t){return pn(e(t))}}function cn(t){this.stream=t}function ln(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function fn(t){return hn(function(){return t})()}function hn(t){function e(t){return t=s(t[0]*Xa,t[1]*Xa),[t[0]*h+u,c-t[1]*h]}function n(t){return t=s.invert((t[0]-u)/h,(c-t[1])/h),t&&[t[0]*$a,t[1]*$a]}function r(){s=Oe(a=vn(m,y,b),o);var t=o(g,v);return u=p-t[0]*h,c=d+t[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),e}var o,a,s,u,c,l,f=sn(function(t,e){return t=o(t,e),[t[0]*h+u,c-t[1]*h]}),h=150,p=480,d=250,g=0,v=0,m=0,y=0,b=0,w=Hs,x=E,_=null,S=null;return e.stream=function(t){return l&&(l.valid=!1),l=pn(w(a,f(x(t)))),l.valid=!0,l},e.clipAngle=function(t){return arguments.length?(w=null==t?(_=t,Hs):We((_=+t)*Xa),i()):_},e.clipExtent=function(t){return arguments.length?(S=t,x=t?$e(t[0][0],t[0][1],t[1][0],t[1][1]):E,i()):S},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},e.center=function(t){return arguments.length?(g=t[0]%360*Xa,v=t[1]%360*Xa,r()):[g*$a,v*$a]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Xa,y=t[1]%360*Xa,b=t.length>2?t[2]%360*Xa:0,r()):[m*$a,y*$a,b*$a]},pa.rebind(e,f,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function pn(t){return ln(t,function(e,n){t.point(e*Xa,n*Xa)})}function dn(t,e){return[t,e]}function gn(t,e){return[t>Ha?t-Va:-Ha>t?t+Va:t,e]}function vn(t,e,n){return t?e||n?Oe(yn(t),bn(e,n)):yn(t):e||n?bn(e,n):gn}function mn(t){return function(e,n){return e+=t,[e>Ha?e-Va:-Ha>e?e+Va:e,n]}}function yn(t){var e=mn(t);return e.invert=mn(-t),e}function bn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,c=Math.sin(e),l=c*r+s*i;return[Math.atan2(u*o-l*a,s*r-c*i),at(l*o+u*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,c=Math.sin(e),l=c*o-u*a;return[Math.atan2(u*o+c*a,s*r+l*i),at(l*r-s*i)]},n}function wn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var u=a*e;null!=i?(i=xn(n,i),o=xn(n,o),(a>0?o>i:i>o)&&(i+=a*Va)):(i=t+a*Va,o=t-.5*u);for(var c,l=i;a>0?l>o:o>l;l-=u)s.point((c=Te([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],c[1])}}function xn(t,e){var n=we(e);n[0]-=t,Me(n);var r=ot(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ba)%(2*Math.PI)}function _n(t,e,n){var r=pa.range(t,e-Ba,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function En(t,e,n){var r=pa.range(t,e-Ba,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Sn(t){return t.source}function Mn(t){return t.target}function Tn(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),c=i*Math.sin(t),l=a*Math.cos(n),f=a*Math.sin(n),h=2*Math.asin(Math.sqrt(lt(r-e)+i*a*lt(n-t))),p=1/Math.sin(h),d=h?function(t){var e=Math.sin(t*=h)*p,n=Math.sin(h-t)*p,r=n*u+e*l,i=n*c+e*f,a=n*o+e*s;return[Math.atan2(i,r)*$a,Math.atan2(a,Math.sqrt(r*r+i*i))*$a]}:function(){return[t*$a,e*$a]};return d.distance=h,d}function kn(){function t(t,i){var o=Math.sin(i*=Xa),a=Math.cos(i),s=Ma((t*=Xa)-e),u=Math.cos(s);tu+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*u)*s),n*o+r*a*u),e=t,n=o,r=a}var e,n,r;eu.point=function(i,o){e=i*Xa,n=Math.sin(o*=Xa),r=Math.cos(o),eu.point=t},eu.lineEnd=function(){eu.point=eu.lineEnd=T}}function An(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function Cn(t,e){function n(t,e){a>0?-Wa+Ba>e&&(e=-Wa+Ba):e>Wa-Ba&&(e=Wa-Ba);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Ha/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=rt(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-Wa]},n):Ln}function Nn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return Ma(i)<Ba?dn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-rt(i)*Math.sqrt(t*t+n*n)]},n)}function Ln(t,e){return[t,Math.log(Math.tan(Ha/4+e/2))]}function Rn(t){var e,n=fn(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Ha*r(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function On(t,e){return[Math.log(Math.tan(Ha/4+e/2)),-t]}function jn(t){return t[0]}function In(t){return t[1]}function Pn(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&it(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function qn(t,e){return t[0]-e[0]||t[1]-e[1]}function Dn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Un(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,u=t[1],c=n[1],l=e[1]-u,f=r[1]-c,h=(s*(u-c)-f*(i-o))/(f*a-s*l);return[i+h*a,u+h*l]}function Fn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Bn(){ur(this),this.edge=this.site=this.circle=null}function zn(t){var e=pu.pop()||new Bn;return e.site=t,e}function Hn(t){Qn(t),lu.remove(t),pu.push(t),ur(t)}function Vn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];Hn(t);for(var u=o;u.circle&&Ma(n-u.circle.x)<Ba&&Ma(r-u.circle.cy)<Ba;)o=u.P,s.unshift(u),Hn(u),u=o;s.unshift(u),Qn(u);for(var c=a;c.circle&&Ma(n-c.circle.x)<Ba&&Ma(r-c.circle.cy)<Ba;)a=c.N,s.push(c),Hn(c),c=a;s.push(c),Qn(c);var l,f=s.length;for(l=1;f>l;++l)c=s[l],u=s[l-1],or(c.edge,u.site,c.site,i);u=s[0],c=s[f-1],c.edge=rr(u.site,c.site,null,i),Kn(u),Kn(c)}function Yn(t){for(var e,n,r,i,o=t.x,a=t.y,s=lu._;s;)if(r=Wn(s,a)-o,r>Ba)s=s.L;else{if(i=o-Xn(s,a),!(i>Ba)){r>-Ba?(e=s.P,n=s):i>-Ba?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=zn(t);if(lu.insert(e,u),e||n){if(e===n)return Qn(e),n=zn(e.site),lu.insert(u,n),u.edge=n.edge=rr(e.site,u.site),Kn(e),void Kn(n);if(!n)return void(u.edge=rr(e.site,u.site));Qn(e),Qn(n);var c=e.site,l=c.x,f=c.y,h=t.x-l,p=t.y-f,d=n.site,g=d.x-l,v=d.y-f,m=2*(h*v-p*g),y=h*h+p*p,b=g*g+v*v,w={x:(v*y-p*b)/m+l,y:(h*b-g*y)/m+f};or(n.edge,c,d,w),u.edge=rr(c,t,null,w),n.edge=rr(t,d,null,w),Kn(e),Kn(n)}}function Wn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n.x,u=n.y,c=u-e;if(!c)return s;var l=s-r,f=1/o-1/c,h=l/c;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-u+c/2+i-o/2)))/f+r:(r+s)/2}function Xn(t,e){var n=t.N;if(n)return Wn(n,e);var r=t.site;return r.y===e?r.x:1/0}function $n(t){this.site=t,this.edges=[]}function Jn(t){for(var e,n,r,i,o,a,s,u,c,l,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],g=cu,v=g.length;v--;)if(o=g[v],o&&o.prepare())for(s=o.edges,u=s.length,a=0;u>a;)l=s[a].end(),r=l.x,i=l.y,c=s[++a%u].start(),e=c.x,n=c.y,(Ma(r-e)>Ba||Ma(i-n)>Ba)&&(s.splice(a,0,new ar(ir(o.site,l,Ma(r-f)<Ba&&d-i>Ba?{x:f,y:Ma(e-f)<Ba?n:d}:Ma(i-d)<Ba&&h-r>Ba?{x:Ma(n-d)<Ba?e:h,y:d}:Ma(r-h)<Ba&&i-p>Ba?{x:h,y:Ma(e-h)<Ba?n:p}:Ma(i-p)<Ba&&r-f>Ba?{x:Ma(n-p)<Ba?e:f,y:p}:null),o.site,null)),++u)}function Gn(t,e){return e.angle-t.angle}function Zn(){ur(this),this.x=this.y=this.arc=this.site=this.cy=null}function Kn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,c=r.y-s,l=o.x-a,f=o.y-s,h=2*(u*f-c*l);if(!(h>=-za)){var p=u*u+c*c,d=l*l+f*f,g=(f*p-c*d)/h,v=(u*d-l*p)/h,f=v+s,m=du.pop()||new Zn;m.arc=t,m.site=i,m.x=g+a,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,t.circle=m;for(var y=null,b=hu._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}hu.insert(y,m),y||(fu=m)}}}}function Qn(t){var e=t.circle;e&&(e.P||(fu=e.N),hu.remove(e),du.push(e),ur(e),t.circle=null)}function tr(t){for(var e,n=uu,r=Xe(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!er(e,t)||!r(e)||Ma(e.a.x-e.b.x)<Ba&&Ma(e.a.y-e.b.y)<Ba)&&(e.a=e.b=null,n.splice(i,1))}function er(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],u=e[0][1],c=e[1][1],l=t.l,f=t.r,h=l.x,p=l.y,d=f.x,g=f.y,v=(h+d)/2,m=(p+g)/2;if(g===p){if(a>v||v>=s)return;if(h>d){if(o){if(o.y>=c)return}else o={x:v,y:u};n={x:v,y:c}}else{if(o){if(o.y<u)return}else o={x:v,y:c};n={x:v,y:u}}}else if(r=(h-d)/(g-p),i=m-r*v,
-1>r||r>1)if(h>d){if(o){if(o.y>=c)return}else o={x:(u-i)/r,y:u};n={x:(c-i)/r,y:c}}else{if(o){if(o.y<u)return}else o={x:(c-i)/r,y:c};n={x:(u-i)/r,y:u}}else if(g>p){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function nr(t,e){this.l=t,this.r=e,this.a=this.b=null}function rr(t,e,n,r){var i=new nr(t,e);return uu.push(i),n&&or(i,t,e,n),r&&or(i,e,t,r),cu[t.i].edges.push(new ar(i,t,e)),cu[e.i].edges.push(new ar(i,e,t)),i}function ir(t,e,n){var r=new nr(t,null);return r.a=e,r.b=n,uu.push(r),r}function or(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function ar(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function sr(){this._=null}function ur(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function cr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function lr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function fr(t){for(;t.L;)t=t.L;return t}function hr(t,e){var n,r,i,o=t.sort(pr).pop();for(uu=[],cu=new Array(t.length),lu=new sr,hu=new sr;;)if(i=fu,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(cu[o.i]=new $n(o),Yn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;Vn(i.arc)}e&&(tr(e),Jn(e));var a={cells:cu,edges:uu};return lu=hu=uu=cu=null,a}function pr(t,e){return e.y-t.y||e.x-t.x}function dr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function gr(t){return t.x}function vr(t){return t.y}function mr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function yr(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),u=e.nodes;u[0]&&yr(t,u[0],n,r,a,s),u[1]&&yr(t,u[1],a,r,i,s),u[2]&&yr(t,u[2],n,s,a,o),u[3]&&yr(t,u[3],a,s,i,o)}}function br(t,e,n,r,i,o,a){var s,u=1/0;return function c(t,l,f,h,p){if(!(l>o||f>a||r>h||i>p)){if(d=t.point){var d,g=e-t.x,v=n-t.y,m=g*g+v*v;if(u>m){var y=Math.sqrt(u=m);r=e-y,i=n-y,o=e+y,a=n+y,s=d}}for(var b=t.nodes,w=.5*(l+h),x=.5*(f+p),_=e>=w,E=n>=x,S=E<<1|_,M=S+4;M>S;++S)if(t=b[3&S])switch(3&S){case 0:c(t,l,f,w,x);break;case 1:c(t,w,f,h,x);break;case 2:c(t,l,x,w,p);break;case 3:c(t,w,x,h,p)}}}(t,r,i,o,a),s}function wr(t,e){t=pa.rgb(t),e=pa.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return"#"+Mt(Math.round(n+o*t))+Mt(Math.round(r+a*t))+Mt(Math.round(i+s*t))}}function xr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Sr(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function _r(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Er(t,e){var n,r,i,o=vu.lastIndex=mu.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=vu.exec(t))&&(r=mu.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:_r(n,r)})),o=mu.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;e>r;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Sr(t,e){for(var n,r=pa.interpolators.length;--r>=0&&!(n=pa.interpolators[r](t,e)););return n}function Mr(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(Sr(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function Tr(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function kr(t){return function(e){return 1-t(1-e)}}function Ar(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Cr(t){return t*t}function Nr(t){return t*t*t}function Lr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Rr(t){return function(e){return Math.pow(e,t)}}function Or(t){return 1-Math.cos(t*Wa)}function jr(t){return Math.pow(2,10*(t-1))}function Ir(t){return 1-Math.sqrt(1-t*t)}function Pr(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Va*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Va/e)}}function qr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Dr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ur(t,e){t=pa.hcl(t),e=pa.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return gt(n+o*t,r+a*t,i+s*t)+""}}function Fr(t,e){t=pa.hsl(t),e=pa.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return pt(n+o*t,r+a*t,i+s*t)+""}}function Br(t,e){t=pa.lab(t),e=pa.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(t){return mt(n+o*t,r+a*t,i+s*t)+""}}function zr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Hr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Yr(e),i=Vr(e,n),o=Yr(Wr(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*$a,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*$a:0}function Vr(t,e){return t[0]*e[0]+t[1]*e[1]}function Yr(t){var e=Math.sqrt(Vr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Wr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Xr(t){return t.length?t.pop()+",":""}function $r(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:_r(t[0],e[0])},{i:i-2,x:_r(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function Jr(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Xr(n)+"rotate(",null,")")-2,x:_r(t,e)})):e&&n.push(Xr(n)+"rotate("+e+")")}function Gr(t,e,n,r){t!==e?r.push({i:n.push(Xr(n)+"skewX(",null,")")-2,x:_r(t,e)}):e&&n.push(Xr(n)+"skewX("+e+")")}function Zr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(Xr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:_r(t[0],e[0])},{i:i-2,x:_r(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&n.push(Xr(n)+"scale("+e+")")}function Kr(t,e){var n=[],r=[];return t=pa.transform(t),e=pa.transform(e),$r(t.translate,e.translate,n,r),Jr(t.rotate,e.rotate,n,r),Gr(t.skew,e.skew,n,r),Zr(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function Qr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function ti(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function ei(t){for(var e=t.source,n=t.target,r=ri(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function ni(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function ri(t,e){if(t===e)return t;for(var n=ni(t),r=ni(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function ii(t){t.fixed|=2}function oi(t){t.fixed&=-7}function ai(t){t.fixed|=4,t.px=t.x,t.py=t.y}function si(t){t.fixed&=-5}function ui(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,u=-1;++u<s;)o=a[u],null!=o&&(ui(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*n[t.point.index];t.charge+=t.pointCharge=c,r+=c*t.point.x,i+=c*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ci(t,e){return pa.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=gi,t}function li(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function fi(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function hi(t){return t.children}function pi(t){return t.value}function di(t,e){return e.value-t.value}function gi(t){return pa.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function vi(t){return t.x}function mi(t){return t.y}function yi(t,e,n){t.y0=e,t.y=n}function bi(t){return pa.range(t.length)}function wi(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function xi(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function _i(t){return t.reduce(Ei,0)}function Ei(t,e){return t+e[1]}function Si(t,e){return Mi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Mi(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function Ti(t){return[pa.min(t),pa.max(t)]}function ki(t,e){return t.value-e.value}function Ai(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ci(t,e){t._pack_next=e,e._pack_prev=t}function Ni(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Li(t){function e(t){l=Math.min(t.x-t.r,l),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(c=n.length)){var n,r,i,o,a,s,u,c,l=1/0,f=-(1/0),h=1/0,p=-(1/0);if(n.forEach(Ri),r=n[0],r.x=-r.r,r.y=0,e(r),c>1&&(i=n[1],i.x=i.r,i.y=0,e(i),c>2))for(o=n[2],Ii(r,i,o),e(o),Ai(r,o),r._pack_prev=o,Ai(o,i),i=r._pack_next,a=3;c>a;a++){Ii(r,i,o=n[a]);var d=0,g=1,v=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(Ni(s,o)){d=1;break}if(1==d)for(u=r._pack_prev;u!==s._pack_prev&&!Ni(u,o);u=u._pack_prev,v++);d?(v>g||g==v&&i.r<r.r?Ci(r,i=s):Ci(r=u,i),a--):(Ai(r,o),i=o,e(o))}var m=(l+f)/2,y=(h+p)/2,b=0;for(a=0;c>a;a++)o=n[a],o.x-=m,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(Oi)}}function Ri(t){t._pack_next=t._pack_prev=t}function Oi(t){delete t._pack_next,delete t._pack_prev}function ji(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)ji(i[o],e,n,r)}function Ii(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o;a*=a,r*=r;var u=.5+(r-a)/(2*s),c=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+u*i+c*o,n.y=t.y+u*o-c*i}else n.x=t.x+r,n.y=t.y}function Pi(t,e){return t.parent==e.parent?1:2}function qi(t){var e=t.children;return e.length?e[0]:t.t}function Di(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Ui(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Fi(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Bi(t,e,n){return t.a.parent===e.parent?t.a:n}function zi(t){return 1+pa.max(t,function(t){return t.y})}function Hi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Vi(t){var e=t.children;return e&&e.length?Vi(e[0]):t}function Yi(t){var e,n=t.children;return n&&(e=n.length)?Yi(n[e-1]):t}function Wi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Xi(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function $i(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ji(t){return t.rangeExtent?t.rangeExtent():$i(t.range())}function Gi(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Zi(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Ki(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Au}function Qi(t,e,n,r){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=pa.bisect(t,e,1,s)-1;return o[n](i[n](e))}}function to(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Qi:Gi,u=r?ti:Qr;return a=i(t,e,u,n),s=i(e,t,u,Sr),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(zr)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return io(t,e)},o.tickFormat=function(e,n){return oo(t,e,n)},o.nice=function(e){return no(t,e),i()},o.copy=function(){return to(t,e,n,r)},i()}function eo(t,e){return pa.rebind(t,e,"range","rangeRound","interpolate","clamp")}function no(t,e){return Zi(t,Ki(ro(t,e)[2]))}function ro(t,e){null==e&&(e=10);var n=$i(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function io(t,e){return pa.range.apply(pa,ro(t,e))}function oo(t,e,n){var r=ro(t,e);if(n){var i=vs.exec(n);if(i.shift(),"s"===i[8]){var o=pa.formatPrefix(Math.max(Ma(r[0]),Ma(r[1])));return i[7]||(i[7]="."+ao(o.scale(r[2]))),i[8]="f",n=pa.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+so(i[8],r)),n=i.join("")}else n=",."+ao(r[2])+"f";return pa.format(n)}function ao(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function so(t,e){var n=ao(e[2]);return t in Cu?Math.abs(n-ao(Math.max(Ma(e[0]),Ma(e[1]))))+ +("e"!==t):n-2*("%"===t)}function uo(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(i(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),a):e},a.nice=function(){var e=Zi(r.map(i),n?Math:Lu);return t.domain(e),r=e.map(o),a},a.ticks=function(){var t=$i(r),a=[],s=t[0],u=t[1],c=Math.floor(i(s)),l=Math.ceil(i(u)),f=e%1?2:e;if(isFinite(l-c)){if(n){for(;l>c;c++)for(var h=1;f>h;h++)a.push(o(c)*h);a.push(o(c))}else for(a.push(o(c));c++<l;)for(var h=f-1;h>0;h--)a.push(o(c)*h);for(c=0;a[c]<s;c++);for(l=a.length;a[l-1]>u;l--);a=a.slice(c,l)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Nu;arguments.length<2?e=Nu:"function"!=typeof e&&(e=pa.format(e));var r,s=Math.max(.1,t/a.ticks().length),u=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/o(u(i(t)+r))<=s?e(t):""}},a.copy=function(){return uo(t.copy(),e,n,r)},eo(a,t)}function co(t,e,n){function r(e){return t(i(e))}var i=lo(e),o=lo(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return io(n,t)},r.tickFormat=function(t,e){return oo(n,t,e)},r.nice=function(t){return r.domain(no(n,t))},r.exponent=function(a){return arguments.length?(i=lo(e=a),o=lo(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return co(t.copy(),e,n)},eo(r,t)}function lo(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function fo(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%o.length]}function r(e,n){return pa.range(t.length).map(function(t){return e+n*t})}var i,o,a;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new d;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],c=i[1],l=t.length<2?(u=(u+c)/2,0):(c-u)/(t.length-1+s);return o=r(u+l*s/2,l),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],c=i[1],l=t.length<2?(u=c=Math.round((u+c)/2),0):(c-u)/(t.length-1+s)|0;return o=r(u+Math.round(l*s/2+(c-u-(t.length-1+s)*l)/2),l),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var c=i[1]<i[0],l=i[c-0],f=i[1-c],h=(f-l)/(t.length-s+2*u);return o=r(l+h*u,h),c&&o.reverse(),a=h*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var c=i[1]<i[0],l=i[c-0],f=i[1-c],h=Math.floor((f-l)/(t.length-s+2*u));return o=r(l+Math.round((f-l-(t.length-s)*h)/2),h),c&&o.reverse(),a=Math.round(h*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return $i(e.a[0])},n.copy=function(){return fo(t,e)},n.domain(t)}function ho(t,e){function n(){var n=0,o=e.length;for(i=[];++n<o;)i[n-1]=pa.quantile(t,n/o);return r}function r(t){return isNaN(t=+t)?void 0:e[pa.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.map(u).filter(c).sort(s),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?i[n-1]:t[0],n<i.length?i[n]:t[t.length-1]]},r.copy=function(){return ho(t,e)},n()}function po(t,e,n){function r(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return po(t,e,n)},i()}function go(t,e){function n(n){return n>=n?e[pa.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return go(t,e)},n}function vo(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return io(t,e)},e.tickFormat=function(e,n){return oo(t,e,n)},e.copy=function(){return vo(t)},e}function mo(){return 0}function yo(t){return t.innerRadius}function bo(t){return t.outerRadius}function wo(t){return t.startAngle}function xo(t){return t.endAngle}function _o(t){return t&&t.padAngle}function Eo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function So(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),u=s*a,c=-s*o,l=t[0]+u,f=t[1]+c,h=e[0]+u,p=e[1]+c,d=(l+h)/2,g=(f+p)/2,v=h-l,m=p-f,y=v*v+m*m,b=n-r,w=l*p-h*f,x=(0>m?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),_=(w*m-v*x)/y,E=(-w*v-m*x)/y,S=(w*m+v*x)/y,M=(-w*v+m*x)/y,T=_-d,k=E-g,A=S-d,C=M-g;return T*T+k*k>A*A+C*C&&(_=S,E=M),[[_-u,E-c],[_*n/b,E*n/b]]}function Mo(t){function e(e){function a(){c.push("M",o(t(l),s))}for(var u,c=[],l=[],f=-1,h=e.length,p=Lt(n),d=Lt(r);++f<h;)i.call(this,u=e[f],f)?l.push([+p.call(this,u,f),+d.call(this,u,f)]):l.length&&(a(),l=[]);return l.length&&a(),c.length?c.join(""):null}var n=jn,r=In,i=je,o=To,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=qu.get(t)||To).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function To(t){return t.length>1?t.join("L"):t+"Z"}function ko(t){return t.join("L")+"Z"}function Ao(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Co(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function No(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Lo(t,e){return t.length<4?To(t):t[1]+jo(t.slice(1,-1),Io(t,e))}function Ro(t,e){return t.length<3?ko(t):t[0]+jo((t.push(t[0]),t),Io([t[t.length-2]].concat(t,[t[1]]),e))}function Oo(t,e){return t.length<3?To(t):t[0]+jo(t,Io(t,e))}function jo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return To(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,u=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),e.length>1){s=e[1],o=t[u],u++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<e.length;c++,u++)o=t[u],s=e[c],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var l=t[u];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+l[0]+","+l[1]}return r}function Io(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,u=t.length;++s<u;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Po(t){if(t.length<3)return To(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],u=[i,",",o,"L",Fo(Fu,a),",",Fo(Fu,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Bo(u,a,s);return t.pop(),u.push("L",r),u.join("")}function qo(t){if(t.length<4)return To(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);for(n.push(Fo(Fu,o)+","+Fo(Fu,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Bo(n,o,a);return n.join("")}function Do(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);for(e=[Fo(Fu,a),",",Fo(Fu,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Bo(e,a,s);return e.join("")}function Uo(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,u=t[n][1]-a,c=-1;++c<=n;)r=t[c],i=c/n,r[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*u);return Po(t)}function Fo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Bo(t,e,n){t.push("C",Fo(Du,e),",",Fo(Du,n),",",Fo(Uu,e),",",Fo(Uu,n),",",Fo(Fu,e),",",Fo(Fu,n))}function zo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ho(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=zo(i,o);++e<n;)r[e]=(a+(a=zo(i=o,o=t[e+1])))/2;return r[e]=a,r}function Vo(t){for(var e,n,r,i,o=[],a=Ho(t),s=-1,u=t.length-1;++s<u;)e=zo(t[s],t[s+1]),Ma(e)<Ba?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Yo(t){return t.length<3?To(t):t[0]+jo(t,Vo(t))}function Wo(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]-Wa,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Xo(t){function e(e){function u(){g.push("M",s(t(m),f),l,c(t(v.reverse()),f),"Z")}for(var h,p,d,g=[],v=[],m=[],y=-1,b=e.length,w=Lt(n),x=Lt(i),_=n===r?function(){return p}:Lt(r),E=i===o?function(){return d}:Lt(o);++y<b;)a.call(this,h=e[y],y)?(v.push([p=+w.call(this,h,y),d=+x.call(this,h,y)]),m.push([+_.call(this,h,y),+E.call(this,h,y)])):v.length&&(u(),v=[],m=[]);return v.length&&u(),g.length?g.join(""):null}var n=jn,r=jn,i=0,o=In,a=je,s=To,u=s.key,c=s,l="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?s=t:(s=qu.get(t)||To).key,c=s.reverse||s,l=s.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(f=t,e):f},e}function $o(t){return t.radius}function Jo(t){return[t.x,t.y]}function Go(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Wa;return[n*Math.cos(r),n*Math.sin(r)]}}function Zo(){return 64}function Ko(){return"circle"}function Qo(t){var e=Math.sqrt(t/Ha);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function ta(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ea(t,e,n){return Na(t,Xu),t.namespace=e,t.id=n,t}function na(t,e,n,r){var i=t.id,o=t.namespace;return $(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function ra(t){return null==t&&(t=""),function(){this.textContent=t}}function ia(t){return null==t?"__transition__":"__transition_"+t+"__"}function oa(t,e,n,r,i){function o(t){var e=g.delay;return c.t=e+u,t>=e?a(t-e):void(c.c=a)}function a(n){var i=p.active,o=p[i];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in p)if(r>+a){var d=p[a];d.timer.c=null,d.timer.t=NaN,--p.count,delete p[a]}p.active=r,g.event&&g.event.start.call(t,t.__data__,e),h=[],g.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&h.push(r)}),f=g.ease,l=g.duration,c.c=s,Pt(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,u)}function s(i){for(var o=i/l,a=f(o),s=h.length;s>0;)h[--s].call(t,a);return o>=1?(g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[r]:delete t[n],1):void 0}var u,c,l,f,h,p=t[n]||(t[n]={active:0,count:0}),g=p[r];g||(u=i.time,c=Pt(o,0,u),g=p[r]={tween:new d,time:u,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++p.count)}function aa(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function sa(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function ua(t){return t.toISOString()}function ca(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=pa.bisect(nc,i);return o==nc.length?[e.year,ro(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/nc[o-1]<nc[o]/i?o-1:o]:[oc,ro(t,n)[2]]}return r.invert=function(e){return la(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(la)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,la(+n+1),e).length}var o=r.domain(),a=$i(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),r.domain(Zi(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=la(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=la(+e+1);return e}}:t))},r.ticks=function(t,e){var n=$i(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],la(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return ca(t.copy(),e,n)},eo(r,t)}function la(t){return new Date(t)}function fa(t){return JSON.parse(t.responseText)}function ha(t){var e=va.createRange();return e.selectNode(va.body),e.createContextualFragment(t.responseText)}var pa={version:"3.5.8"},da=[].slice,ga=function(t){return da.call(t)},va=this.document;if(va)try{ga(va.documentElement.childNodes)[0].nodeType}catch(ma){ga=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),va)try{va.createElement("DIV").style.setProperty("opacity",0,"")}catch(ya){var ba=this.Element.prototype,wa=ba.setAttribute,xa=ba.setAttributeNS,_a=this.CSSStyleDeclaration.prototype,Ea=_a.setProperty;ba.setAttribute=function(t,e){wa.call(this,t,e+"")},ba.setAttributeNS=function(t,e,n){xa.call(this,t,e,n+"")},_a.setProperty=function(t,e,n){Ea.call(this,t,e+"",n)}}pa.ascending=s,pa.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},pa.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},pa.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},pa.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},pa.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)c(n=+t[o])&&(r+=n);else for(;++o<i;)c(n=+e.call(t,t[o],o))&&(r+=n);return r},pa.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)c(n=u(t[o]))?r+=n:--a;else for(;++o<i;)c(n=u(e.call(t,t[o],o)))?r+=n:--a;return a?r/a:void 0},pa.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},pa.median=function(t,e){var n,r=[],i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)c(n=u(t[o]))&&r.push(n);else for(;++o<i;)c(n=u(e.call(t,t[o],o)))&&r.push(n);return r.length?pa.quantile(r.sort(s),.5):void 0},pa.variance=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)c(n=u(t[s]))&&(r=n-o,o+=r/++l,a+=r*(n-o));else for(;++s<i;)c(n=u(e.call(t,t[s],s)))&&(r=n-o,o+=r/++l,a+=r*(n-o));return l>1?a/(l-1):void 0},pa.deviation=function(){var t=pa.variance.apply(this,arguments);return t?Math.sqrt(t):t};var Sa=l(s);pa.bisectLeft=Sa.left,pa.bisect=pa.bisectRight=Sa.right,pa.bisector=function(t){return l(1===t.length?function(e,n){return s(t(e),n)}:t)},pa.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},pa.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},pa.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>n;)o[n]=[e=i,i=t[++n]];return o},pa.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=pa.min(arguments,f),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},pa.transpose=function(t){return pa.zip.apply(pa,t)},pa.keys=function(t){var e=[];for(var n in t)e.push(n);return e},pa.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},pa.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},pa.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n};var Ma=Math.abs;pa.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=h(Ma(n)),a=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},pa.map=function(t,e){var n=new d;if(t instanceof d)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var Ta="__proto__",ka="\x00";p(d,{has:m,get:function(t){return this._[g(t)]},set:function(t,e){return this._[g(t)]=e},remove:y,keys:b,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:v(e),value:this._[e]});return t},size:w,empty:x,forEach:function(t){for(var e in this._)t.call(this,v(e),this._[e])}}),pa.nest=function(){function t(e,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var u,c,l,f,h=-1,p=a.length,g=o[s++],v=new d;++h<p;)(f=v.get(u=g(c=a[h])))?f.push(c):v.set(u,[c]);return e?(c=e(),l=function(n,r){c.set(n,t(e,r,s))}):(c={},l=function(n,r){c[n]=t(e,r,s)}),v.forEach(l),c}function e(t,n){if(n>=o.length)return t;var r=[],i=a[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(pa.map,n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},pa.set=function(t){var e=new _;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);
return e},p(_,{has:m,add:function(t){return this._[g(t+="")]=!0,t},remove:y,values:b,size:w,empty:x,forEach:function(t){for(var e in this._)t.call(this,v(e))}}),pa.behavior={},pa.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=S(t,e,e[n]);return t};var Aa=["webkit","ms","moz","Moz","o","O"];pa.dispatch=function(){for(var t=new k,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=A(t);return t},k.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},pa.event=null,pa.requote=function(t){return t.replace(Ca,"\\$&")};var Ca=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Na={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},La=function(t,e){return e.querySelector(t)},Ra=function(t,e){return e.querySelectorAll(t)},Oa=function(t,e){var n=t.matches||t[M(t,"matchesSelector")];return(Oa=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(La=function(t,e){return Sizzle(t,e)[0]||null},Ra=Sizzle,Oa=Sizzle.matchesSelector),pa.selection=function(){return pa.select(va.documentElement)};var ja=pa.selection.prototype=[];ja.select=function(t){var e,n,r,i,o=[];t=O(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var u=-1,c=r.length;++u<c;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return R(o)},ja.selectAll=function(t){var e,n,r=[];t=j(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,u=a.length;++s<u;)(n=a[s])&&(r.push(e=ga(t.call(n,n.__data__,s,i))),e.parentNode=n);return R(r)};var Ia={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};pa.ns={prefix:Ia,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ia.hasOwnProperty(n)?{space:Ia[n],local:t}:t}},ja.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=pa.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},ja.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=D(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!q(t[i]).test(e))return!1;return!0}for(e in t)this.each(U(e,t[e]));return this}return this.each(U(t,e))},ja.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(B(n,t[n],e));return this}if(2>r){var i=this.node();return a(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(B(t,e,n))},ja.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(z(e,t[e]));return this}return this.each(z(t,e))},ja.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ja.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ja.append=function(t){return t=H(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ja.insert=function(t,e){return t=H(t),e=O(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ja.remove=function(){return this.each(V)},ja.data=function(t,e){function n(t,n){var r,i,o,a=t.length,l=n.length,f=Math.min(a,l),h=new Array(l),p=new Array(l),g=new Array(a);if(e){var v,m=new d,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(m.has(v=e.call(i,i.__data__,r))?g[r]=i:m.set(v,i),y[r]=v);for(r=-1;++r<l;)(i=m.get(v=e.call(n,o=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=o):p[r]=Y(o),m.set(v,!0);for(r=-1;++r<a;)r in y&&m.get(y[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):p[r]=Y(o);for(;l>r;++r)p[r]=Y(n[r]);for(;a>r;++r)g[r]=t[r]}p.update=h,p.parentNode=h.parentNode=g.parentNode=t.parentNode,s.push(p),u.push(h),c.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=J([]),u=R([]),c=R([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return u.enter=function(){return s},u.exit=function(){return c},u},ja.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ja.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=W(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return R(i)},ja.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},ja.sort=function(t){t=X.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},ja.each=function(t){return $(this,function(e,n,r){t.call(e,e.__data__,n,r)})},ja.call=function(t){var e=ga(arguments);return t.apply(e[0]=this,e),this},ja.empty=function(){return!this.node()},ja.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},ja.size=function(){var t=0;return $(this,function(){++t}),t};var Pa=[];pa.selection.enter=J,pa.selection.enter.prototype=Pa,Pa.append=ja.append,Pa.empty=ja.empty,Pa.node=ja.node,Pa.call=ja.call,Pa.size=ja.size,Pa.select=function(t){for(var e,n,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(e.push(r[c]=n=t.call(i.parentNode,o.__data__,c,s)),n.__data__=o.__data__):e.push(null)}return R(a)},Pa.insert=function(t,e){return arguments.length<2&&(e=G(this)),ja.insert.call(this,t,e)},pa.select=function(t){var e;return"string"==typeof t?(e=[La(t,va)],e.parentNode=va.documentElement):(e=[t],e.parentNode=o(t)),R([e])},pa.selectAll=function(t){var e;return"string"==typeof t?(e=ga(Ra(t,va)),e.parentNode=va.documentElement):(e=ga(t),e.parentNode=null),R([e])},ja.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(Z(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(Z(t,e,n))};var qa=pa.map({mouseenter:"mouseover",mouseleave:"mouseout"});va&&qa.forEach(function(t){"on"+t in va&&qa.remove(t)});var Da,Ua=0;pa.mouse=function(t){return et(t,N())};var Fa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;pa.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=N().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return et(t,r)},pa.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(t,e,i,o,a){return function(){function s(){var t,n,r=e(h,g);r&&(t=r[0]-b[0],n=r[1]-b[1],d|=t|n,b=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:n}))}function u(){e(h,g)&&(m.on(o+v,null).on(a+v,null),y(d&&pa.event.target===f),p({type:"dragend"}))}var c,l=this,f=pa.event.target,h=l.parentNode,p=n.of(l,arguments),d=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=pa.select(i(f)).on(o+v,s).on(a+v,u),y=tt(f),b=e(h,g);r?(c=r.apply(l,arguments),c=[c.x-b[0],c.y-b[1]]):c=[0,0],p({type:"dragstart"})}}var n=L(t,"drag","dragstart","dragend"),r=null,i=e(T,pa.mouse,a,"mousemove","mouseup"),o=e(nt,pa.touch,E,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},pa.rebind(t,n,"on")},pa.touches=function(t,e){return arguments.length<2&&(e=N().touches),e?ga(e).map(function(e){var n=et(t,e);return n.identifier=e.identifier,n}):[]};var Ba=1e-6,za=Ba*Ba,Ha=Math.PI,Va=2*Ha,Ya=Va-Ba,Wa=Ha/2,Xa=Ha/180,$a=180/Ha,Ja=Math.SQRT2,Ga=2,Za=4;pa.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,f=u-o,h=l*l+f*f;if(za>h)r=Math.log(c/a)/Ja,n=function(t){return[i+t*l,o+t*f,a*Math.exp(Ja*t*r)]};else{var p=Math.sqrt(h),d=(c*c-a*a+Za*h)/(2*a*Ga*p),g=(c*c-a*a-Za*h)/(2*c*Ga*p),v=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/Ja,n=function(t){var e=t*r,n=ut(v),s=a/(Ga*p)*(n*ct(Ja*e+v)-st(v));return[i+s*l,o+s*f,a*n/ut(Ja*e+v)]}}return n.duration=1e3*r,n},pa.behavior.zoom=function(){function t(t){t.on(N,f).on(Qa+".zoom",p).on("dblclick.zoom",d).on(j,h)}function e(t){return[(t[0]-S.x)/S.k,(t[1]-S.y)/S.k]}function n(t){return[t[0]*S.k+S.x,t[1]*S.k+S.y]}function r(t){S.k=Math.max(T[0],Math.min(T[1],t))}function i(t,e){e=n(e),S.x+=t[0]-e[0],S.y+=t[1]-e[1]}function o(e,n,o,a){e.__chart__={x:S.x,y:S.y,k:S.k},r(Math.pow(2,a)),i(v=n,o),e=pa.select(e),k>0&&(e=e.transition().duration(k)),e.call(t.event)}function s(){x&&x.domain(w.range().map(function(t){return(t-S.x)/S.k}).map(w.invert)),E&&E.domain(_.range().map(function(t){return(t-S.y)/S.k}).map(_.invert))}function u(t){A++||t({type:"zoomstart"})}function c(t){s(),t({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function l(t){--A||(t({type:"zoomend"}),v=null)}function f(){function t(){f=1,i(pa.mouse(r),p),c(s)}function n(){h.on(R,null).on(O,null),d(f&&pa.event.target===o),l(s)}var r=this,o=pa.event.target,s=I.of(r,arguments),f=0,h=pa.select(a(r)).on(R,t).on(O,n),p=e(pa.mouse(r)),d=tt(r);Wu.call(r),u(s)}function h(){function t(){var t=pa.touches(d);return p=S.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=e(t))}),t}function n(){var e=pa.event.target;pa.select(e).on(w,a).on(x,s),_.push(e);for(var n=pa.event.changedTouches,r=0,i=n.length;i>r;++r)v[n[r].identifier]=null;var u=t(),c=Date.now();if(1===u.length){if(500>c-b){var l=u[0];o(d,l,v[l.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),C()}b=c}else if(u.length>1){var l=u[0],f=u[1],h=l[0]-f[0],p=l[1]-f[1];m=h*h+p*p}}function a(){var t,e,n,o,a=pa.touches(d);Wu.call(d);for(var s=0,u=a.length;u>s;++s,o=null)if(n=a[s],o=v[n.identifier]){if(e)break;t=n,e=o}if(o){var l=(l=n[0]-t[0])*l+(l=n[1]-t[1])*l,f=m&&Math.sqrt(l/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],r(f*p)}b=null,i(t,e),c(g)}function s(){if(pa.event.touches.length){for(var e=pa.event.changedTouches,n=0,r=e.length;r>n;++n)delete v[e[n].identifier];for(var i in v)return void t()}pa.selectAll(_).on(y,null),E.on(N,f).on(j,h),M(),l(g)}var p,d=this,g=I.of(d,arguments),v={},m=0,y=".zoom-"+pa.event.changedTouches[0].identifier,w="touchmove"+y,x="touchend"+y,_=[],E=pa.select(d),M=tt(d);n(),u(g),E.on(N,null).on(j,n)}function p(){var t=I.of(this,arguments);y?clearTimeout(y):(Wu.call(this),g=e(v=m||pa.mouse(this)),u(t)),y=setTimeout(function(){y=null,l(t)},50),C(),r(Math.pow(2,.002*Ka())*S.k),i(v,g),c(t)}function d(){var t=pa.mouse(this),n=Math.log(S.k)/Math.LN2;o(this,t,e(t),pa.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,v,m,y,b,w,x,_,E,S={x:0,y:0,k:1},M=[960,500],T=ts,k=250,A=0,N="mousedown.zoom",R="mousemove.zoom",O="mouseup.zoom",j="touchstart.zoom",I=L(t,"zoomstart","zoom","zoomend");return Qa||(Qa="onwheel"in va?(Ka=function(){return-pa.event.deltaY*(pa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in va?(Ka=function(){return pa.event.wheelDelta},"mousewheel"):(Ka=function(){return-pa.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=I.of(this,arguments),e=S;Vu?pa.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var n=M[0],r=M[1],i=v?v[0]:n/2,o=v?v[1]:r/2,a=pa.interpolateZoom([(i-S.x)/S.k,(o-S.y)/S.k,n/S.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=a(e),s=n/r[2];this.__chart__=S={x:i-r[0]*s,y:o-r[1]*s,k:s},c(t)}}).each("interrupt.zoom",function(){l(t)}).each("end.zoom",function(){l(t)}):(this.__chart__=S,u(t),c(t),l(t))})},t.translate=function(e){return arguments.length?(S={x:+e[0],y:+e[1],k:S.k},s(),t):[S.x,S.y]},t.scale=function(e){return arguments.length?(S={x:S.x,y:S.y,k:null},r(+e),s(),t):S.k},t.scaleExtent=function(e){return arguments.length?(T=null==e?ts:[+e[0],+e[1]],t):T},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(M=e&&[+e[0],+e[1]],t):M},t.duration=function(e){return arguments.length?(k=+e,t):k},t.x=function(e){return arguments.length?(x=e,w=e.copy(),S={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(E=e,_=e.copy(),S={x:0,y:0,k:1},t):E},pa.rebind(t,I,"on")};var Ka,Qa,ts=[0,1/0];pa.color=ft,ft.prototype.toString=function(){return this.rgb()+""},pa.hsl=ht;var es=ht.prototype=new ft;es.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ht(this.h,this.s,this.l/t)},es.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ht(this.h,this.s,t*this.l)},es.rgb=function(){return pt(this.h,this.s,this.l)},pa.hcl=dt;var ns=dt.prototype=new ft;ns.brighter=function(t){return new dt(this.h,this.c,Math.min(100,this.l+rs*(arguments.length?t:1)))},ns.darker=function(t){return new dt(this.h,this.c,Math.max(0,this.l-rs*(arguments.length?t:1)))},ns.rgb=function(){return gt(this.h,this.c,this.l).rgb()},pa.lab=vt;var rs=18,is=.95047,os=1,as=1.08883,ss=vt.prototype=new ft;ss.brighter=function(t){return new vt(Math.min(100,this.l+rs*(arguments.length?t:1)),this.a,this.b)},ss.darker=function(t){return new vt(Math.max(0,this.l-rs*(arguments.length?t:1)),this.a,this.b)},ss.rgb=function(){return mt(this.l,this.a,this.b)},pa.rgb=_t;var us=_t.prototype=new ft;us.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new _t(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new _t(i,i,i)},us.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new _t(t*this.r,t*this.g,t*this.b)},us.hsl=function(){return kt(this.r,this.g,this.b)},us.toString=function(){return"#"+Mt(this.r)+Mt(this.g)+Mt(this.b)};var cs=pa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cs.forEach(function(t,e){cs.set(t,Et(e))}),pa.functor=Lt,pa.xhr=Rt(E),pa.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Ot(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(l>=c)return a;if(i)return i=!1,o;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<c;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}l=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++l):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c>l;){var r=t.charCodeAt(l++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(l)&&(++l,++s);else if(r!==u)continue;return t.slice(e,l-s)}return t.slice(e)}for(var r,i,o={},a={},s=[],c=t.length,l=0,f=0;(r=n())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=n();e&&null==(h=e(h,f++))||s.push(h)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new _,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},pa.csv=pa.dsv(",","text/csv"),pa.tsv=pa.dsv("	","text/tab-separated-values");var ls,fs,hs,ps,ds=this[M(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};pa.timer=function(){Pt.apply(this,arguments)},pa.timer.flush=function(){Dt(),Ut()},pa.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var gs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Bt);pa.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=pa.round(t,Ft(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),gs[8+n/3]};var vs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ms=pa.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=pa.round(t,Ft(t,e))).toFixed(Math.max(0,Math.min(20,Ft(t*(1+1e-15),e))))}}),ys=pa.time={},bs=Date;Vt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ws.setUTCDate.apply(this._,arguments)},setDay:function(){ws.setUTCDay.apply(this._,arguments)},setFullYear:function(){ws.setUTCFullYear.apply(this._,arguments)},setHours:function(){ws.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ws.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ws.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ws.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ws.setUTCSeconds.apply(this._,arguments)},setTime:function(){ws.setTime.apply(this._,arguments)}};var ws=Date.prototype;ys.year=Yt(function(t){return t=ys.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ys.years=ys.year.range,ys.years.utc=ys.year.utc.range,ys.day=Yt(function(t){var e=new bs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ys.days=ys.day.range,ys.days.utc=ys.day.utc.range,ys.dayOfYear=function(t){var e=ys.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ys[t]=Yt(function(t){return(t=ys.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ys.year(t).getDay();return Math.floor((ys.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ys[t+"s"]=n.range,ys[t+"s"].utc=n.utc.range,ys[t+"OfYear"]=function(t){var n=ys.year(t).getDay();return Math.floor((ys.dayOfYear(t)+(n+e)%7)/7)}}),ys.week=ys.sunday,ys.weeks=ys.sunday.range,ys.weeks.utc=ys.sunday.utc.range,ys.weekOfYear=ys.sundayOfYear;var xs={"-":"",_:" ",0:"0"},_s=/^\s*\d+/,Es=/^%/;pa.locale=function(t){return{numberFormat:zt(t),timeFormat:Xt(t)}};var Ss=pa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});pa.format=Ss.numberFormat,pa.geo={},de.prototype={s:0,t:0,add:function(t){ge(t,this.t,Ms),ge(Ms.s,this.s,this),this.s?this.t+=Ms.t:this.s=Ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ms=new de;pa.geo.stream=function(t,e){t&&Ts.hasOwnProperty(t.type)?Ts[t.type](t,e):ve(t,e)};var Ts={Feature:function(t,e){ve(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ve(n[r].geometry,e)}},ks={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){me(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)me(n[r],e,0)},Polygon:function(t,e){ye(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ye(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ve(n[r],e)}};pa.geo.area=function(t){return As=0,pa.geo.stream(t,Ns),As};var As,Cs=new de,Ns={sphere:function(){As+=4*Ha},point:T,lineStart:T,lineEnd:T,polygonStart:function(){Cs.reset(),Ns.lineStart=be},polygonEnd:function(){var t=2*Cs;As+=0>t?4*Ha+t:t,Ns.lineStart=Ns.lineEnd=Ns.point=T}};pa.geo.bounds=function(){function t(t,e){b.push(w=[l=t,h=t]),f>e&&(f=e),e>p&&(p=e)}function e(e,n){var r=we([e*Xa,n*Xa]);if(m){var i=_e(m,r),o=[i[1],-i[0],0],a=_e(o,i);Me(a),a=Te(a);var u=e-d,c=u>0?1:-1,g=a[0]*$a*c,v=Ma(u)>180;if(v^(g>c*d&&c*e>g)){var y=a[1]*$a;y>p&&(p=y)}else if(g=(g+360)%360-180,v^(g>c*d&&c*e>g)){var y=-a[1]*$a;f>y&&(f=y)}else f>n&&(f=n),n>p&&(p=n);v?d>e?s(l,e)>s(l,h)&&(h=e):s(e,h)>s(l,h)&&(l=e):h>=l?(l>e&&(l=e),e>h&&(h=e)):e>d?s(l,e)>s(l,h)&&(h=e):s(e,h)>s(l,h)&&(l=e)}else t(e,n);m=r,d=e}function n(){x.point=e}function r(){w[0]=l,w[1]=h,x.point=t,m=null}function i(t,n){if(m){var r=t-d;y+=Ma(r)>180?r+(r>0?360:-360):r}else g=t,v=n;Ns.point(t,n),e(t,n)}function o(){Ns.lineStart()}function a(){i(g,v),Ns.lineEnd(),Ma(y)>Ba&&(l=-(h=180)),w[0]=l,w[1]=h,m=null}function s(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function c(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var l,f,h,p,d,g,v,m,y,b,w,x={point:t,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=o,x.lineEnd=a,y=0,Ns.polygonStart()},polygonEnd:function(){Ns.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=r,0>Cs?(l=-(h=180),f=-(p=90)):y>Ba?p=90:-Ba>y&&(f=-90),w[0]=l,w[1]=h}};return function(t){p=h=-(l=f=1/0),b=[],pa.geo.stream(t,x);var e=b.length;if(e){b.sort(u);for(var n,r=1,i=b[0],o=[i];e>r;++r)n=b[r],c(n[0],i)||c(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,d=-(1/0),e=o.length-1,r=0,i=o[e];e>=r;i=n,++r)n=o[r],(a=s(i[1],n[0]))>d&&(d=a,l=n[0],h=i[1])}return b=w=null,l===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,f],[h,p]]}}(),pa.geo.centroid=function(t){Ls=Rs=Os=js=Is=Ps=qs=Ds=Us=Fs=Bs=0,pa.geo.stream(t,zs);var e=Us,n=Fs,r=Bs,i=e*e+n*n+r*r;return za>i&&(e=Ps,n=qs,r=Ds,Ba>Rs&&(e=Os,n=js,r=Is),i=e*e+n*n+r*r,za>i)?[NaN,NaN]:[Math.atan2(n,e)*$a,at(r/Math.sqrt(i))*$a]};var Ls,Rs,Os,js,Is,Ps,qs,Ds,Us,Fs,Bs,zs={sphere:T,point:Ae,lineStart:Ne,lineEnd:Le,polygonStart:function(){zs.lineStart=Re},polygonEnd:function(){zs.lineStart=Ne}},Hs=De(je,ze,Ve,[-Ha,-Ha/2]),Vs=1e9;pa.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(s){return arguments.length?(o=$e(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(pa.geo.conicEqualArea=function(){return Je(Ge)}).raw=Ge,pa.geo.albers=function(){return pa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},pa.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}var e,n,r,i,o=pa.geo.albers(),a=pa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=pa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var c=o.scale(),l=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[l-.455*c,f-.238*c],[l+.455*c,f+.238*c]]).stream(u).point,r=a.translate([l-.307*c,f+.201*c]).clipExtent([[l-.425*c+Ba,f+.12*c+Ba],[l-.214*c-Ba,f+.234*c-Ba]]).stream(u).point,i=s.translate([l-.205*c,f+.212*c]).clipExtent([[l-.214*c+Ba,f+.166*c+Ba],[l-.115*c-Ba,f+.234*c-Ba]]).stream(u).point,t},t.scale(1070)};var Ys,Ws,Xs,$s,Js,Gs,Zs={point:T,lineStart:T,lineEnd:T,polygonStart:function(){Ws=0,Zs.lineStart=Ze},polygonEnd:function(){Zs.lineStart=Zs.lineEnd=Zs.point=T,Ys+=Ma(Ws/2)}},Ks={point:Ke,lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T},Qs={point:en,lineStart:nn,lineEnd:rn,polygonStart:function(){Qs.lineStart=on},polygonEnd:function(){Qs.point=en,Qs.lineStart=nn,Qs.lineEnd=rn}};pa.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),pa.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,r,i,o,a,s=4.5;return t.area=function(t){return Ys=0,pa.geo.stream(t,i(Zs)),Ys},t.centroid=function(t){return Os=js=Is=Ps=qs=Ds=Us=Fs=Bs=0,pa.geo.stream(t,i(Qs)),Bs?[Us/Bs,Fs/Bs]:Ds?[Ps/Ds,qs/Ds]:Is?[Os/Is,js/Is]:[NaN,NaN]},t.bounds=function(t){return Js=Gs=-(Xs=$s=1/0),pa.geo.stream(t,i(Ks)),[[Xs,$s],[Js,Gs]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||un(t):E,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Qe:new an(t),"function"!=typeof s&&o.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(pa.geo.albersUsa()).context(null)},pa.geo.transform=function(t){return{stream:function(e){var n=new cn(e);for(var r in t)n[r]=t[r];return n}}},cn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},pa.geo.projection=fn,pa.geo.projectionMutator=hn,(pa.geo.equirectangular=function(){return fn(dn)}).raw=dn.invert=dn,pa.geo.rotation=function(t){function e(e){return e=t(e[0]*Xa,e[1]*Xa),e[0]*=$a,e[1]*=$a,e}return t=vn(t[0]%360*Xa,t[1]*Xa,t.length>2?t[2]*Xa:0),e.invert=function(e){return e=t.invert(e[0]*Xa,e[1]*Xa),e[0]*=$a,e[1]*=$a,e},e},gn.invert=dn,pa.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=vn(-t[0]*Xa,-t[1]*Xa,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=$a,t[1]*=$a}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=wn((e=+r)*Xa,i*Xa),t):e},t.precision=function(r){return arguments.length?(n=wn(e*Xa,(i=+r)*Xa),t):i},t.angle(90)},pa.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Xa,i=t[1]*Xa,o=e[1]*Xa,a=Math.sin(r),s=Math.cos(r),u=Math.sin(i),c=Math.cos(i),l=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=c*l-u*f*s)*n),u*l+c*f*s)},pa.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return pa.range(Math.ceil(o/v)*v,i,v).map(h).concat(pa.range(Math.ceil(c/m)*m,u,m).map(p)).concat(pa.range(Math.ceil(r/d)*d,n,d).filter(function(t){return Ma(t%v)>Ba}).map(l)).concat(pa.range(Math.ceil(s/g)*g,a,g).filter(function(t){return Ma(t%m)>Ba}).map(f))}var n,r,i,o,a,s,u,c,l,f,h,p,d=10,g=d,v=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(u).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],c=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),c>u&&(e=c,c=u,u=e),t.precision(y)):[[o,c],[i,u]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,
s=a,a=e),t.precision(y)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(d=+e[0],g=+e[1],t):[d,g]},t.precision=function(e){return arguments.length?(y=+e,l=_n(s,a,90),f=En(r,n,y),h=_n(c,u,90),p=En(o,i,y),t):y},t.majorExtent([[-180,-90+Ba],[180,90-Ba]]).minorExtent([[-180,-80-Ba],[180,80+Ba]])},pa.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=Sn,i=Mn;return t.distance=function(){return pa.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},pa.geo.interpolate=function(t,e){return Tn(t[0]*Xa,t[1]*Xa,e[0]*Xa,e[1]*Xa)},pa.geo.length=function(t){return tu=0,pa.geo.stream(t,eu),tu};var tu,eu={sphere:T,point:T,lineStart:kn,lineEnd:T,polygonStart:T,polygonEnd:T},nu=An(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(pa.geo.azimuthalEqualArea=function(){return fn(nu)}).raw=nu;var ru=An(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},E);(pa.geo.azimuthalEquidistant=function(){return fn(ru)}).raw=ru,(pa.geo.conicConformal=function(){return Je(Cn)}).raw=Cn,(pa.geo.conicEquidistant=function(){return Je(Nn)}).raw=Nn;var iu=An(function(t){return 1/t},Math.atan);(pa.geo.gnomonic=function(){return fn(iu)}).raw=iu,Ln.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Wa]},(pa.geo.mercator=function(){return Rn(Ln)}).raw=Ln;var ou=An(function(){return 1},Math.asin);(pa.geo.orthographic=function(){return fn(ou)}).raw=ou;var au=An(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(pa.geo.stereographic=function(){return fn(au)}).raw=au,On.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Wa]},(pa.geo.transverseMercator=function(){var t=Rn(On),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=On,pa.geom={},pa.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Lt(n),o=Lt(r),a=t.length,s=[],u=[];for(e=0;a>e;e++)s.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(qn),e=0;a>e;e++)u.push([s[e][0],-s[e][1]]);var c=Pn(s),l=Pn(u),f=l[0]===c[0],h=l[l.length-1]===c[c.length-1],p=[];for(e=c.length-1;e>=0;--e)p.push(t[s[c[e]][2]]);for(e=+f;e<l.length-h;++e)p.push(t[s[l[e]][2]]);return p}var n=jn,r=In;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},pa.geom.polygon=function(t){return Na(t,su),t};var su=pa.geom.polygon.prototype=[];su.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},su.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},su.clip=function(t){for(var e,n,r,i,o,a,s=Fn(t),u=-1,c=this.length-Fn(this),l=this[c-1];++u<c;){for(e=t.slice(),t.length=0,i=this[u],o=e[(r=e.length-s)-1],n=-1;++n<r;)a=e[n],Dn(a,l,i)?(Dn(o,l,i)||t.push(Un(o,a,l,i)),t.push(a)):Dn(o,l,i)&&t.push(Un(o,a,l,i)),o=a;s&&t.push(t[0]),l=i}return t};var uu,cu,lu,fu,hu,pu=[],du=[];$n.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Gn),e.length},ar.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},sr.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=fr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(cr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,lr(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(lr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,cr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?fr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,cr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,lr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,cr(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,lr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,cr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,lr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},pa.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return hr(n(t),s).cells.forEach(function(n,s){var u=n.edges,c=n.site,l=e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=r&&c.x<=o&&c.y>=i&&c.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];l.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Ba)*Ba,y:Math.round(a(t,e)/Ba)*Ba,i:e}})}var r=jn,i=In,o=r,a=i,s=gu;return t?e(t):(e.links=function(t){return hr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return hr(n(t)).cells.forEach(function(n,r){for(var i,o,a=n.site,s=n.edges.sort(Gn),u=-1,c=s.length,l=s[c-1].edge,f=l.l===a?l.r:l.l;++u<c;)i=l,o=f,l=s[u].edge,f=l.l===a?l.r:l.l,r<o.i&&r<f.i&&dr(a,o,f)<0&&e.push([t[r],t[o.i],t[f.i]])}),e},e.x=function(t){return arguments.length?(o=Lt(r=t),e):r},e.y=function(t){return arguments.length?(a=Lt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?gu:t,e):s===gu?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===gu?null:s&&s[1]},e)};var gu=[[-1e6,-1e6],[1e6,1e6]];pa.geom.delaunay=function(t){return pa.geom.voronoi().triangles(t)},pa.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(Ma(u-n)+Ma(l-r)<.01)c(t,e,n,r,i,o,a,s);else{var f=t.point;t.x=t.y=t.point=null,c(t,f,u,l,i,o,a,s),c(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else c(t,e,n,r,i,o,a,s)}function c(t,e,n,r,i,a,s,u){var c=.5*(i+s),l=.5*(a+u),f=n>=c,h=r>=l,p=h<<1|f;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=mr()),f?i=c:s=c,h?a=l:u=l,o(t,e,n,r,i,a,s,u)}var l,f,h,p,d,g,v,m,y,b=Lt(s),w=Lt(u);if(null!=e)g=e,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],h=[],d=t.length,a)for(p=0;d>p;++p)l=t[p],l.x<g&&(g=l.x),l.y<v&&(v=l.y),l.x>m&&(m=l.x),l.y>y&&(y=l.y),f.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var x=+b(l=t[p],p),_=+w(l,p);g>x&&(g=x),v>_&&(v=_),x>m&&(m=x),_>y&&(y=_),f.push(x),h.push(_)}var E=m-g,S=y-v;E>S?y=v+E:m=g+S;var M=mr();if(M.add=function(t){o(M,t,+b(t,++p),+w(t,p),g,v,m,y)},M.visit=function(t){yr(t,M,g,v,m,y)},M.find=function(t){return br(M,t[0],t[1],g,v,m,y)},p=-1,null==e){for(;++p<d;)o(M,t[p],f[p],h[p],g,v,m,y);--p}else t.forEach(M.add);return f=h=t=l=null,M}var a,s=jn,u=In;return(a=arguments.length)?(s=gr,u=vr,3===a&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},pa.interpolateRgb=wr,pa.interpolateObject=xr,pa.interpolateNumber=_r,pa.interpolateString=Er;var vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mu=new RegExp(vu.source,"g");pa.interpolate=Sr,pa.interpolators=[function(t,e){var n=typeof e;return("string"===n?cs.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?wr:Er:e instanceof ft?wr:Array.isArray(e)?Mr:"object"===n&&isNaN(e)?xr:_r)(t,e)}],pa.interpolateArray=Mr;var yu=function(){return E},bu=pa.map({linear:yu,poly:Rr,quad:function(){return Cr},cubic:function(){return Nr},sin:function(){return Or},exp:function(){return jr},circle:function(){return Ir},elastic:Pr,back:qr,bounce:function(){return Dr}}),wu=pa.map({"in":E,out:kr,"in-out":Ar,"out-in":function(t){return Ar(kr(t))}});pa.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=bu.get(n)||yu,r=wu.get(r)||E,Tr(r(n.apply(null,da.call(arguments,1))))},pa.interpolateHcl=Ur,pa.interpolateHsl=Fr,pa.interpolateLab=Br,pa.interpolateRound=zr,pa.transform=function(t){var e=va.createElementNS(pa.ns.prefix.svg,"g");return(pa.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Hr(n?n.matrix:xu)})(t)},Hr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var xu={a:1,b:0,c:0,d:1,e:0,f:0};pa.interpolateTransform=Kr,pa.layout={},pa.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(ei(t[n]));return e}},pa.layout.chord=function(){function t(){var t,c,f,h,p,d={},g=[],v=pa.range(o),m=[];for(n=[],r=[],t=0,h=-1;++h<o;){for(c=0,p=-1;++p<o;)c+=i[h][p];g.push(c),m.push(pa.range(o)),t+=c}for(a&&v.sort(function(t,e){return a(g[t],g[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(Va-l*o)/t,c=0,h=-1;++h<o;){for(f=c,p=-1;++p<o;){var y=v[h],b=m[y][p],w=i[y][b],x=c,_=c+=w*t;d[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:_,value:w}}r[y]={index:y,startAngle:f,endAngle:c,value:(c-f)/t},c+=l}for(h=-1;++h<o;)for(p=h-1;++p<o;){var E=d[h+"-"+p],S=d[p+"-"+h];(E.value||S.value)&&n.push(E.value<S.value?{source:S,target:E}:{source:E,target:S})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,a,s,u,c={},l=0;return c.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,c):i},c.padding=function(t){return arguments.length?(l=t,n=r=null,c):l},c.sortGroups=function(t){return arguments.length?(a=t,n=r=null,c):a},c.sortSubgroups=function(t){return arguments.length?(s=t,n=null,c):s},c.sortChords=function(t){return arguments.length?(u=t,n&&e(),c):u},c.chords=function(){return n||t(),n},c.groups=function(){return r||t(),r},c},pa.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,u=o*o+a*a;if(u>s*s/m){if(g>u){var c=e.charge/u;t.px-=o*c,t.py-=a*c}return!0}if(e.point&&u&&g>u){var c=e.pointCharge/u;t.px-=o*c,t.py-=a*c}}return!e.charge}}function e(t){t.px=pa.event.x,t.py=pa.event.y,u.resume()}var n,r,i,o,a,s,u={},c=pa.dispatch("start","tick","end"),l=[1,1],f=.9,h=_u,p=Eu,d=-30,g=Su,v=.1,m=.64,y=[],b=[];return u.tick=function(){if((i*=.99)<.005)return n=null,c.end({type:"end",alpha:i=0}),!0;var e,r,u,h,p,g,m,w,x,_=y.length,E=b.length;for(r=0;E>r;++r)u=b[r],h=u.source,p=u.target,w=p.x-h.x,x=p.y-h.y,(g=w*w+x*x)&&(g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,w*=g,x*=g,p.x-=w*(m=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=x*m,h.x+=w*(m=1-m),h.y+=x*m);if((m=i*v)&&(w=l[0]/2,x=l[1]/2,r=-1,m))for(;++r<_;)u=y[r],u.x+=(w-u.x)*m,u.y+=(x-u.y)*m;if(d)for(ui(e=pa.geom.quadtree(y),i,s),r=-1;++r<_;)(u=y[r]).fixed||e.visit(t(u));for(r=-1;++r<_;)u=y[r],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*f,u.y-=(u.py-(u.py=u.y))*f);c.tick({type:"tick",alpha:i})},u.nodes=function(t){return arguments.length?(y=t,u):y},u.links=function(t){return arguments.length?(b=t,u):b},u.size=function(t){return arguments.length?(l=t,u):l},u.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,u):p},u.friction=function(t){return arguments.length?(f=+t,u):f},u.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.chargeDistance=function(t){return arguments.length?(g=t*t,u):Math.sqrt(g)},u.gravity=function(t){return arguments.length?(v=+t,u):v},u.theta=function(t){return arguments.length?(m=t*t,u):Math.sqrt(m)},u.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,c.start({type:"end",alpha:i=0})):t>0&&(c.start({type:"start",alpha:i=t}),n=Pt(u.tick)),u):i},u.start=function(){function t(t,r){if(!n){for(n=new Array(i),u=0;i>u;++u)n[u]=[];for(u=0;c>u;++u){var o=b[u];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[e],u=-1,l=s.length;++u<l;)if(!isNaN(a=s[u][t]))return a;return Math.random()*r}var e,n,r,i=y.length,c=b.length,f=l[0],g=l[1];for(e=0;i>e;++e)(r=y[e]).index=e,r.weight=0;for(e=0;c>e;++e)r=b[e],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(e=0;i>e;++e)r=y[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof h)for(e=0;c>e;++e)o[e]=+h.call(this,b[e],e);else for(e=0;c>e;++e)o[e]=h;if(a=[],"function"==typeof p)for(e=0;c>e;++e)a[e]=+p.call(this,b[e],e);else for(e=0;c>e;++e)a[e]=p;if(s=[],"function"==typeof d)for(e=0;i>e;++e)s[e]=+d.call(this,y[e],e);else for(e=0;i>e;++e)s[e]=d;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return r||(r=pa.behavior.drag().origin(E).on("dragstart.force",ii).on("drag.force",e).on("dragend.force",oi)),arguments.length?void this.on("mouseover.force",ai).on("mouseout.force",si).call(r):r},pa.rebind(u,c,"on")};var _u=20,Eu=1,Su=1/0;pa.layout.hierarchy=function(){function t(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(c=n.call(t,o,o.depth))&&(u=c.length)){for(var u,c,l;--u>=0;)a.push(l=c[u]),l.parent=o,l.depth=o.depth+1;r&&(o.value=0),o.children=c}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return fi(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=di,n=hi,r=pi;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(li(e,function(t){t.children&&(t.value=0)}),fi(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},pa.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,u,c=-1;for(r=e.value?r/e.value:0;++c<a;)t(s=o[c],n,u=s.value*r,i),n+=u}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return t(a[0],0,i[0],i[1]/e(a[0])),a}var r=pa.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},ci(n,r)},pa.layout.pie=function(){function t(a){var s,u=a.length,c=a.map(function(n,r){return+e.call(t,n,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-l,h=Math.min(Math.abs(f)/u,+("function"==typeof o?o.apply(this,arguments):o)),p=h*(0>f?-1:1),d=pa.sum(c),g=d?(f-u*p)/d:0,v=pa.range(u),m=[];return null!=n&&v.sort(n===Mu?function(t,e){return c[e]-c[t]}:function(t,e){return n(a[t],a[e])}),v.forEach(function(t){m[t]={data:a[t],value:s=c[t],startAngle:l,endAngle:l+=s*g+p,padAngle:h}}),m}var e=Number,n=Mu,r=0,i=Va,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var Mu={};pa.layout.stack=function(){function t(s,u){if(!(h=s.length))return s;var c=s.map(function(n,r){return e.call(t,n,r)}),l=c.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),f=n.call(t,l,u);c=pa.permute(c,f),l=pa.permute(l,f);var h,p,d,g,v=r.call(t,l,u),m=c[0].length;for(d=0;m>d;++d)for(i.call(t,c[0][d],g=v[d],l[0][d][1]),p=1;h>p;++p)i.call(t,c[p][d],g+=l[p-1][d][1],l[p][d][1]);return s}var e=E,n=bi,r=wi,i=yi,o=vi,a=mi;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Tu.get(e)||bi,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:ku.get(e)||wi,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var Tu=pa.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(xi),o=t.map(_i),a=pa.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,c=[],l=[];for(e=0;r>e;++e)n=a[e],u>s?(s+=o[n],c.push(n)):(u+=o[n],l.push(n));return l.reverse().concat(c)},reverse:function(t){return pa.range(t.length).reverse()},"default":bi}),ku=pa.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,u=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)u[n]=(s-a[n])/2;return u},wiggle:function(t){var e,n,r,i,o,a,s,u,c,l=t.length,f=t[0],h=f.length,p=[];for(p[0]=u=c=0,n=1;h>n;++n){for(e=0,i=0;l>e;++e)i+=t[e][n][1];for(e=0,o=0,s=f[n][0]-f[n-1][0];l>e;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}p[n]=u-=i?o/i*s:0,c>u&&(c=u)}for(n=0;h>n;++n)p[n]-=c;return p},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:wi});pa.layout.histogram=function(){function t(t,o){for(var a,s,u=[],c=t.map(n,this),l=r.call(this,c,o),f=i.call(this,l,c,o),o=-1,h=c.length,p=f.length-1,d=e?1:1/h;++o<p;)a=u[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(p>0)for(o=-1;++o<h;)s=c[o],s>=l[0]&&s<=l[1]&&(a=u[pa.bisect(f,s,1,p)-1],a.y+=d,a.push(t[o]));return u}var e=!0,n=Number,r=Ti,i=Si;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Lt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return Mi(t,e)}:Lt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},pa.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],u=i[0],c=i[1],l=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,fi(s,function(t){t.r=+l(t.value)}),fi(s,Li),r){var f=r*(e?1:Math.max(2*s.r/u,2*s.r/c))/2;fi(s,function(t){t.r+=f}),fi(s,Li),fi(s,function(t){t.r-=f})}return ji(s,u/2,c/2,e?1:1/Math.max(2*s.r/u,2*s.r/c)),a}var e,n=pa.layout.hierarchy().sort(ki),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},ci(t,n)},pa.layout.tree=function(){function t(t,i){var l=a.call(this,t,i),f=l[0],h=e(f);if(fi(h,n),h.parent.m=-h.z,li(h,r),c)li(f,o);else{var p=f,d=f,g=f;li(f,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var v=s(p,d)/2-p.x,m=u[0]/(d.x+s(d,p)/2+v),y=u[1]/(g.depth||1);li(f,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return l}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Fi(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+s(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+s(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,o=t,a=e,u=i.parent.children[0],c=i.m,l=o.m,f=a.m,h=u.m;a=Di(a),i=qi(i),a&&i;)u=qi(u),o=Di(o),o.a=t,r=a.z+f-i.z-c+s(a._,i._),r>0&&(Ui(Bi(a,t,n),t,r),c+=r,l+=r),f+=a.m,c+=i.m,h+=u.m,l+=o.m;a&&!Di(o)&&(o.t=a,o.m+=f-l),i&&!qi(u)&&(u.t=i,u.m+=c-h,n=t)}return n}function o(t){t.x*=u[0],t.y=t.depth*u[1]}var a=pa.layout.hierarchy().sort(null).value(null),s=Pi,u=[1,1],c=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(c=null==(u=e)?o:null,t):c?null:u},t.nodeSize=function(e){return arguments.length?(c=null==(u=e)?null:o,t):c?u:null},ci(t,a)},pa.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),u=s[0],c=0;fi(u,function(t){var e=t.children;e&&e.length?(t.x=Hi(e),t.y=zi(e)):(t.x=a?c+=n(t,a):0,t.y=0,a=t)});var l=Vi(u),f=Yi(u),h=l.x-n(l,f)/2,p=f.x+n(f,l)/2;return fi(u,i?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),s}var e=pa.layout.hierarchy().sort(null).value(null),n=Pi,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},ci(t,e)},pa.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var a,s,u,c=f(n),l=[],h=o.slice(),d=1/0,g="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(h,c.dx*c.dy/n.value),l.area=0;(u=h.length)>0;)l.push(a=h[u-1]),l.area+=a.area,"squarify"!==p||(s=r(l,g))<=d?(h.pop(),d=s):(l.area-=l.pop().area,i(l,g,c,!1),g=Math.min(c.dx,c.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,g,c,!0),l.length=l.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,a=f(e),s=r.slice(),u=[];for(t(s,a.dx*a.dy/e.value),u.area=0;o=s.pop();)u.push(o),u.area+=o.area,null!=o.z&&(i(u,o.z?a.dx:a.dy,a,!s.length),u.length=u.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*d/r,r/(e*o*d)):1/0}function i(t,e,n,r){var i,o=-1,a=t.length,s=n.x,c=n.y,l=e?u(t.area/e):0;if(e==n.dx){for((r||l>n.dy)&&(l=n.dy);++o<a;)i=t[o],i.x=s,i.y=c,i.dy=l,s+=i.dx=Math.min(n.x+n.dx-s,l?u(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++o<a;)i=t[o],i.x=s,i.y=c,i.dx=l,c+=i.dy=Math.min(n.y+n.dy-c,l?u(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-c,n.x+=l,n.dx-=l}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=c[0],o.dy=c[1]):o.dx=o.dy=0,a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),h&&(a=i),i}var a,s=pa.layout.hierarchy(),u=Math.round,c=[1,1],l=null,f=Wi,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(c=t,o):c},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Wi(e):Xi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Xi(e,t)}if(!arguments.length)return l;var r;return f=null==(l=t)?Wi:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},ci(o,s)},pa.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=pa.random.normal.apply(pa,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=pa.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},pa.scale={};var Au={floor:E,ceil:E};pa.scale.linear=function(){return to([0,1],[0,1],Sr,!1)};var Cu={s:1,g:1,p:1,r:1,e:1};pa.scale.log=function(){return uo(pa.scale.linear().domain([0,1]),10,!0,[1,10])};var Nu=pa.format(".0e"),Lu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};pa.scale.pow=function(){return co(pa.scale.linear(),1,[0,1])},pa.scale.sqrt=function(){return pa.scale.pow().exponent(.5)},pa.scale.ordinal=function(){return fo([],{t:"range",a:[[]]})},pa.scale.category10=function(){return pa.scale.ordinal().range(Ru)},pa.scale.category20=function(){return pa.scale.ordinal().range(Ou)},pa.scale.category20b=function(){return pa.scale.ordinal().range(ju)},pa.scale.category20c=function(){return pa.scale.ordinal().range(Iu)};var Ru=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(St),Ou=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(St),ju=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(St),Iu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(St);pa.scale.quantile=function(){return ho([],[])},pa.scale.quantize=function(){return po(0,1,[0,1])},pa.scale.threshold=function(){return go([.5],[0,1])},pa.scale.identity=function(){return vo([0,1])},pa.svg={},pa.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),l=a.apply(this,arguments)-Wa,f=s.apply(this,arguments)-Wa,h=Math.abs(f-l),p=l>f?0:1;if(t>c&&(d=c,c=t,t=d),h>=Ya)return e(c,p)+(t?e(t,1-p):"")+"Z";var d,g,v,m,y,b,w,x,_,E,S,M,T=0,k=0,A=[];if((m=(+u.apply(this,arguments)||0)/2)&&(v=o===Pu?Math.sqrt(t*t+c*c):+o.apply(this,arguments),p||(k*=-1),c&&(k=at(v/c*Math.sin(m))),t&&(T=at(v/t*Math.sin(m)))),c){y=c*Math.cos(l+k),b=c*Math.sin(l+k),w=c*Math.cos(f-k),x=c*Math.sin(f-k);var C=Math.abs(f-l-2*k)<=Ha?0:1;if(k&&Eo(y,b,w,x)===p^C){var N=(l+f)/2;y=c*Math.cos(N),b=c*Math.sin(N),w=x=null}}else y=b=0;if(t){_=t*Math.cos(f-T),E=t*Math.sin(f-T),S=t*Math.cos(l+T),M=t*Math.sin(l+T);var L=Math.abs(l-f+2*T)<=Ha?0:1;if(T&&Eo(_,E,S,M)===1-p^L){var R=(l+f)/2;_=t*Math.cos(R),E=t*Math.sin(R),S=M=null}}else _=E=0;if(h>Ba&&(d=Math.min(Math.abs(c-t)/2,+i.apply(this,arguments)))>.001){g=c>t^p?0:1;var O=d,j=d;if(Ha>h){var I=null==S?[_,E]:null==w?[y,b]:Un([y,b],[S,M],[w,x],[_,E]),P=y-I[0],q=b-I[1],D=w-I[0],U=x-I[1],F=1/Math.sin(Math.acos((P*D+q*U)/(Math.sqrt(P*P+q*q)*Math.sqrt(D*D+U*U)))/2),B=Math.sqrt(I[0]*I[0]+I[1]*I[1]);j=Math.min(d,(t-B)/(F-1)),O=Math.min(d,(c-B)/(F+1))}if(null!=w){var z=So(null==S?[_,E]:[S,M],[y,b],c,O,p),H=So([w,x],[_,E],c,O,p);d===O?A.push("M",z[0],"A",O,",",O," 0 0,",g," ",z[1],"A",c,",",c," 0 ",1-p^Eo(z[1][0],z[1][1],H[1][0],H[1][1]),",",p," ",H[1],"A",O,",",O," 0 0,",g," ",H[0]):A.push("M",z[0],"A",O,",",O," 0 1,",g," ",H[0])}else A.push("M",y,",",b);if(null!=S){var V=So([y,b],[S,M],t,-j,p),Y=So([_,E],null==w?[y,b]:[w,x],t,-j,p);d===j?A.push("L",Y[0],"A",j,",",j," 0 0,",g," ",Y[1],"A",t,",",t," 0 ",p^Eo(Y[1][0],Y[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",j,",",j," 0 0,",g," ",V[0]):A.push("L",Y[0],"A",j,",",j," 0 0,",g," ",V[0])}else A.push("L",_,",",E)}else A.push("M",y,",",b),null!=w&&A.push("A",c,",",c," 0 ",C,",",p," ",w,",",x),A.push("L",_,",",E),null!=S&&A.push("A",t,",",t," 0 ",L,",",1-p," ",S,",",M);return A.push("Z"),A.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=yo,r=bo,i=mo,o=Pu,a=wo,s=xo,u=_o;return t.innerRadius=function(e){return arguments.length?(n=Lt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Lt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=Lt(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==Pu?Pu:Lt(e),t):o},t.startAngle=function(e){return arguments.length?(a=Lt(e),t):a},t.endAngle=function(e){return arguments.length?(s=Lt(e),t):s},t.padAngle=function(e){return arguments.length?(u=Lt(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Wa;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Pu="auto";pa.svg.line=function(){return Mo(E)};var qu=pa.map({linear:To,"linear-closed":ko,step:Ao,"step-before":Co,"step-after":No,basis:Po,"basis-open":qo,"basis-closed":Do,bundle:Uo,cardinal:Oo,"cardinal-open":Lo,"cardinal-closed":Ro,monotone:Yo});qu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Du=[0,2/3,1/3,0],Uu=[0,1/3,2/3,0],Fu=[0,1/6,2/3,1/6];pa.svg.line.radial=function(){var t=Mo(Wo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Co.reverse=No,No.reverse=Co,pa.svg.area=function(){return Xo(E)},pa.svg.area.radial=function(){var t=Xo(Wo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},pa.svg.chord=function(){function t(t,s){var u=e(this,o,t,s),c=e(this,a,t,s);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,c)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,u.r,u.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=s.call(t,i,r),a=u.call(t,i,r)-Wa,l=c.call(t,i,r)-Wa;return{r:o,a0:a,a1:l,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(l),o*Math.sin(l)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ha)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=Sn,a=Mn,s=$o,u=wo,c=xo;return t.radius=function(e){return arguments.length?(s=Lt(e),t):s},t.source=function(e){return arguments.length?(o=Lt(e),t):o},t.target=function(e){return arguments.length?(a=Lt(e),t):a},t.startAngle=function(e){return arguments.length?(u=Lt(e),t):u},t.endAngle=function(e){return arguments.length?(c=Lt(e),t):c},t},pa.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=Sn,n=Mn,r=Jo;return t.source=function(n){return arguments.length?(e=Lt(n),t):e},t.target=function(e){return arguments.length?(n=Lt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},pa.svg.diagonal.radial=function(){var t=pa.svg.diagonal(),e=Jo,n=t.projection;return t.projection=function(t){return arguments.length?n(Go(e=t)):e},t},pa.svg.symbol=function(){function t(t,r){return(Bu.get(e.call(this,t,r))||Qo)(n.call(this,t,r))}var e=Ko,n=Zo;return t.type=function(n){return arguments.length?(e=Lt(n),t):e},t.size=function(e){return arguments.length?(n=Lt(e),t):n},t};var Bu=pa.map({circle:Qo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Hu)),n=e*Hu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/zu),n=e*zu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/zu),n=e*zu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});pa.svg.symbolTypes=Bu.keys();var zu=Math.sqrt(3),Hu=Math.tan(30*Xa);ja.transition=function(t){for(var e,n,r=Vu||++$u,i=ia(t),o=[],a=Yu||{time:Date.now(),ease:Lr,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(e=[]);for(var c=this[s],l=-1,f=c.length;++l<f;)(n=c[l])&&oa(n,l,i,r,a),e.push(n)}return ea(o,i,r)},ja.interrupt=function(t){
return this.each(null==t?Wu:ta(ia(t)))};var Vu,Yu,Wu=ta(ia()),Xu=[],$u=0;Xu.call=ja.call,Xu.empty=ja.empty,Xu.node=ja.node,Xu.size=ja.size,pa.transition=function(t,e){return t&&t.transition?Vu?t.transition(e):t:pa.selection().transition(t)},pa.transition.prototype=Xu,Xu.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=O(t);for(var s=-1,u=this.length;++s<u;){a.push(e=[]);for(var c=this[s],l=-1,f=c.length;++l<f;)(r=c[l])&&(n=t.call(r,r.__data__,l,s))?("__data__"in r&&(n.__data__=r.__data__),oa(n,l,o,i,r[o][i]),e.push(n)):e.push(null)}return ea(a,o,i)},Xu.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,u=[];t=j(t);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],h=-1,p=f.length;++h<p;)if(r=f[h]){o=r[s][a],n=t.call(r,r.__data__,h,c),u.push(e=[]);for(var d=-1,g=n.length;++d<g;)(i=n[d])&&oa(i,d,s,a,o),e.push(i)}return ea(u,s,a)},Xu.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=W(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]);for(var n=this[o],s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return ea(i,this.namespace,this.id)},Xu.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):$(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Xu.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Kr:Sr,s=pa.ns.qualify(t);return na(this,"attr."+t,e,s.local?o:i)},Xu.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=pa.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Xu.style=function(t,e,n){function r(){this.style.removeProperty(t)}function i(e){return null==e?r:(e+="",function(){var r,i=a(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Sr(i,e),function(e){this.style.setProperty(t,r(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return na(this,"style."+t,e,i)},Xu.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,a(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Xu.text=function(t){return na(this,"text",t,ra)},Xu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Xu.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=pa.ease.apply(pa,arguments)),$(this,function(r){r[n][e].ease=t}))},Xu.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:$(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Xu.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:$(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Xu.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Yu,o=Vu;try{Vu=n,$(this,function(e,i,o){Yu=e[r][n],t.call(e,e.__data__,i,o)})}finally{Yu=i,Vu=o}}else $(this,function(i){var o=i[r][n];(o.event||(o.event=pa.dispatch("start","end","interrupt"))).on(t,e)});return this},Xu.transition=function(){for(var t,e,n,r,i=this.id,o=++$u,a=this.namespace,s=[],u=0,c=this.length;c>u;u++){s.push(t=[]);for(var e=this[u],l=0,f=e.length;f>l;l++)(n=e[l])&&(r=n[a][i],oa(n,l,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return ea(s,a,o)},pa.svg.axis=function(){function t(t){t.each(function(){var t,c=pa.select(this),l=this.__chart__||n,f=this.__chart__=n.copy(),h=null==u?f.ticks?f.ticks.apply(f,s):f.domain():u,p=null==e?f.tickFormat?f.tickFormat.apply(f,s):E:e,d=c.selectAll(".tick").data(h,f),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ba),v=pa.transition(d.exit()).style("opacity",Ba).remove(),m=pa.transition(d.order()).style("opacity",1),y=Math.max(i,0)+a,b=Ji(f),w=c.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),pa.transition(w));g.append("line"),g.append("text");var _,S,M,T,k=g.select("line"),A=m.select("line"),C=d.select("text").text(p),N=g.select("text"),L=m.select("text"),R="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=aa,_="x",M="y",S="x2",T="y2",C.attr("dy",0>R?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+R*o+"V0H"+b[1]+"V"+R*o)):(t=sa,_="y",M="x",S="y2",T="x2",C.attr("dy",".32em").style("text-anchor",0>R?"end":"start"),x.attr("d","M"+R*o+","+b[0]+"H0V"+b[1]+"H"+R*o)),k.attr(T,R*i),N.attr(M,R*y),A.attr(S,0).attr(T,R*i),L.attr(_,0).attr(M,R*y),f.rangeBand){var O=f,j=O.rangeBand()/2;l=f=function(t){return O(t)+j}}else l.rangeBand?l=f:v.call(t,f,l);g.call(t,l,f),m.call(t,f,f)})}var e,n=pa.scale.linear(),r=Ju,i=6,o=6,a=3,s=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Gu?e+"":Ju,t):r},t.ticks=function(){return arguments.length?(s=ga(arguments),t):s},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Ju="bottom",Gu={top:1,right:1,bottom:1,left:1};pa.svg.brush=function(){function t(o){o.each(function(){var o=pa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=o.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=o.selectAll(".resize").data(g,E);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Zu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var u,f=pa.transition(o),h=pa.transition(a);c&&(u=Ji(c),h.attr("x",u[0]).attr("width",u[1]-u[0]),n(f)),l&&(u=Ji(l),h.attr("y",u[0]).attr("height",u[1]-u[0]),r(f)),e(f)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function r(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==pa.event.keyCode&&(A||(b=null,L[0]-=f[1],L[1]-=h[1],A=2),C())}function g(){32==pa.event.keyCode&&2==A&&(L[0]+=f[1],L[1]+=h[1],A=0,C())}function v(){var t=pa.mouse(x),i=!1;w&&(t[0]+=w[0],t[1]+=w[1]),A||(pa.event.altKey?(b||(b=[(f[0]+f[1])/2,(h[0]+h[1])/2]),L[0]=f[+(t[0]<b[0])],L[1]=h[+(t[1]<b[1])]):b=null),T&&m(t,c,0)&&(n(S),i=!0),k&&m(t,l,1)&&(r(S),i=!0),i&&(e(S),E({type:"brush",mode:A?"move":"resize"}))}function m(t,e,n){var r,i,a=Ji(e),u=a[0],c=a[1],l=L[n],g=n?h:f,v=g[1]-g[0];return A&&(u-=l,c-=v+l),r=(n?d:p)?Math.max(u,Math.min(c,t[n])):t[n],A?i=(r+=l)+v:(b&&(l=Math.max(u,Math.min(c,2*b[n]-r))),r>l?(i=r,r=l):i=l),g[0]!=r||g[1]!=i?(n?s=null:o=null,g[0]=r,g[1]=i,!0):void 0}function y(){v(),S.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),pa.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),N(),E({type:"brushend"})}var b,w,x=this,_=pa.select(pa.event.target),E=u.of(x,arguments),S=pa.select(x),M=_.datum(),T=!/^(n|s)$/.test(M)&&c,k=!/^(e|w)$/.test(M)&&l,A=_.classed("extent"),N=tt(x),L=pa.mouse(x),R=pa.select(a(x)).on("keydown.brush",i).on("keyup.brush",g);if(pa.event.changedTouches?R.on("touchmove.brush",v).on("touchend.brush",y):R.on("mousemove.brush",v).on("mouseup.brush",y),S.interrupt().selectAll("*").interrupt(),A)L[0]=f[0]-L[0],L[1]=h[0]-L[1];else if(M){var O=+/w$/.test(M),j=+/^n/.test(M);w=[f[1-O]-L[0],h[1-j]-L[1]],L[0]=f[O],L[1]=h[j]}else pa.event.altKey&&(b=L.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),pa.select("body").style("cursor",_.style("cursor")),E({type:"brushstart"}),v()}var o,s,u=L(t,"brushstart","brush","brushend"),c=null,l=null,f=[0,0],h=[0,0],p=!0,d=!0,g=Ku[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:f,y:h,i:o,j:s},n=this.__chart__||e;this.__chart__=e,Vu?pa.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,f=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Mr(f,e.x),r=Mr(h,e.y);return o=s=null,function(i){f=e.x=n(i),h=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(c=e,g=Ku[!c<<1|!l],t):c},t.y=function(e){return arguments.length?(l=e,g=Ku[!c<<1|!l],t):l},t.clamp=function(e){return arguments.length?(c&&l?(p=!!e[0],d=!!e[1]):c?p=!!e:l&&(d=!!e),t):c&&l?[p,d]:c?p:l?d:null},t.extent=function(e){var n,r,i,a,u;return arguments.length?(c&&(n=e[0],r=e[1],l&&(n=n[0],r=r[0]),o=[n,r],c.invert&&(n=c(n),r=c(r)),n>r&&(u=n,n=r,r=u),(n!=f[0]||r!=f[1])&&(f=[n,r])),l&&(i=e[0],a=e[1],c&&(i=i[1],a=a[1]),s=[i,a],l.invert&&(i=l(i),a=l(a)),i>a&&(u=i,i=a,a=u),(i!=h[0]||a!=h[1])&&(h=[i,a])),t):(c&&(o?(n=o[0],r=o[1]):(n=f[0],r=f[1],c.invert&&(n=c.invert(n),r=c.invert(r)),n>r&&(u=n,n=r,r=u))),l&&(s?(i=s[0],a=s[1]):(i=h[0],a=h[1],l.invert&&(i=l.invert(i),a=l.invert(a)),i>a&&(u=i,i=a,a=u))),c&&l?[[n,i],[r,a]]:c?[n,r]:l&&[i,a])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],o=s=null),t},t.empty=function(){return!!c&&f[0]==f[1]||!!l&&h[0]==h[1]},pa.rebind(t,u,"on")};var Zu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ku=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Qu=ys.format=Ss.timeFormat,tc=Qu.utc,ec=tc("%Y-%m-%dT%H:%M:%S.%LZ");Qu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ua:ec,ua.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ua.toString=ec.toString,ys.second=Yt(function(t){return new bs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ys.seconds=ys.second.range,ys.seconds.utc=ys.second.utc.range,ys.minute=Yt(function(t){return new bs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ys.minutes=ys.minute.range,ys.minutes.utc=ys.minute.utc.range,ys.hour=Yt(function(t){var e=t.getTimezoneOffset()/60;return new bs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ys.hours=ys.hour.range,ys.hours.utc=ys.hour.utc.range,ys.month=Yt(function(t){return t=ys.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ys.months=ys.month.range,ys.months.utc=ys.month.utc.range;var nc=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],rc=[[ys.second,1],[ys.second,5],[ys.second,15],[ys.second,30],[ys.minute,1],[ys.minute,5],[ys.minute,15],[ys.minute,30],[ys.hour,1],[ys.hour,3],[ys.hour,6],[ys.hour,12],[ys.day,1],[ys.day,2],[ys.week,1],[ys.month,1],[ys.month,3],[ys.year,1]],ic=Qu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",je]]),oc={range:function(t,e,n){return pa.range(Math.ceil(t/n)*n,+e,n).map(la)},floor:E,ceil:E};rc.year=ys.year,ys.scale=function(){return ca(pa.scale.linear(),rc,ic)};var ac=rc.map(function(t){return[t[0].utc,t[1]]}),sc=tc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",je]]);ac.year=ys.year.utc,ys.scale.utc=function(){return ca(pa.scale.linear(),ac,sc)},pa.text=Rt(function(t){return t.responseText}),pa.json=function(t,e){return Ot(t,"application/json",fa,e)},pa.html=function(t,e){return Ot(t,"text/html",ha,e)},pa.xml=Rt(function(t){return t.responseXML}),r=this.d3=pa,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i))}()},function(t,e,n){"use strict";var r=(n(2),n(1),10),i=0,o=0,a={chain:"rectangle",transit:"rectangle",init_met:"arrow",propep:"rectangle",peptide:"rectangle",signal:"rectangle",helix:"rectangle",strand:"rectangle",turn:"rectangle",region:"rectangle",coiled:"rectangle",motif:"rectangle",repeat:"rectangle",ca_bind:"rectangle",dna_bind:"rectangle",domain:"rectangle",zn_fing:"rectangle",np_bind:"rectangle",metal:"diamond",site:"chevron",binding:"catFace",act_site:"circle",mod_res:"triangle",lipid:"wave",carbohyd:"hexagon",disulfid:"bridge",crosslnk:"bridge",compbias:"rectangle",conflict:"rectangle",non_cons:"doubleBar",non_ter:"doubleBar",unsure:"rectangle",non_std:"pentagon",mutagen:"rectangle",topo_dom:"rectangle",transmem:"rectangle",intramem:"rectangle",missense:"variant",ms_del:"variant",insdel:"variant",stop_lost:"variant",stop_gained:"variant",init_codon:"variant"},s=function(){var t=this;return t},u=function(){return{getFeature:function(t,e,n,r){var u,c=a[t.toLowerCase()],l=e*r;return o=1===r?0:l/r/2,i=e/2,"function"!=typeof s[c]&&(console.log(t+" doesn't exist"),c="rectangle"),s[c].prototype=new s,u=s[c](l,n,r)},isContinuous:function(t){return t=t.toLowerCase(),"disulfid"===t||"crosslnk"===t?!1:!0}}}();s.rectangle=function(t,e){return"M"+-i+",0L"+(t-i)+",0L"+(t-i)+","+e+"L"+-i+","+e+"Z"},s.bridge=function(t,e,n){return 1!==n?"M"+-i+","+e+"L"+-i+",0L"+(t-i)+",0L"+(t-i)+","+e+"L"+(t-i)+",2L"+-i+",2Z":"M"+-i+","+e+"L"+-i+","+e/2+"L0,"+e/2+"L0,0L0,"+e/2+"L"+(t-i)+","+e/2+"L"+(t-i)+","+e+"Z"};var c=function(t,e){return"M"+(t+o)+","+t+"L"+(e/2+o)+","+t+"M"+(-t+o)+","+t+"L"+(-e/2+o)+","+t};s.diamond=function(t,e,n){var i=r/2,a="M"+o+",0L"+(i+o)+","+i+"L"+o+","+r+"L"+(-i+o)+","+i;return 1!==n?a+"L"+o+",0Z"+c(i,t):a+"Z"},s.chevron=function(t,e,n){var i=r/2,a="M"+o+","+i+"L"+(i+o)+",0L"+(i+o)+","+i+"L"+o+","+r+"L"+(-i+o)+","+i+"L"+(-i+o)+",0";return 1!==n?a+"L"+o+","+i+c(i,t)+"Z":a+"Z"},s.catFace=function(t,e,n){var i=r/2,a=r/10,s="M"+(-i+o)+",0L"+(-i+o)+","+6*a+"L"+(-2*a+o)+","+r+"L"+(2*a+o)+","+r+"L"+(i+o)+","+6*a+"L"+(i+o)+",0L"+(2*a+o)+","+4*a+"L"+(-2*a+o)+","+4*a;return 1!==n?s+"M"+(-i+o)+",0"+c(i,t)+"Z":s+"Z"},s.triangle=function(t,e,n){var i=r/2,a="M"+o+",0L"+(i+o)+","+r+"L"+(-i+o)+","+r;return 1!==n?a+"L"+o+",0"+c(i,t)+"Z":a+"Z"},s.wave=function(t,e,n){var i=r/4,a=r/2,s="M"+(-r/2+o)+","+a+"A"+i+","+a+" 0 1,1 "+o+","+a+"A"+i+","+a+" 0 1,0 "+(r/2+o)+","+a;return 1!==n?s+c(a,t)+"Z":s+"Z"};var l=function(t,e,n){for(var i=r/2,a="M ",s=0;t>s;s++)a+=i*Math.cos(2*Math.PI*s/t)+o+","+(i*Math.sin(2*Math.PI*s/t)+i)+" ";return 1!==n?a+" "+(i*Math.cos(0)+o)+","+(i*Math.sin(0)+i)+" "+c(i,e)+"Z":a+"Z"};s.hexagon=function(t,e,n){return l(6,t,n)},s.pentagon=function(t,e,n){return l(5,t,n)},s.circle=function(t,e,n){var i=Math.sqrt(r/Math.PI),a="M"+o+",0A"+i+","+i+" 0 1,1 "+o+","+r+"A"+i+","+i+" 0 1,1 "+o+",0";return 1!==n?a+c(r/2,t)+"Z":a+"Z"},s.arrow=function(t,e,n){var i=r/10,a="M"+o+",0L"+(-i+o)+",0L"+(-5*i+o)+","+4*i+"L"+(-i+o)+","+e+"L"+o+","+e+"L"+(4*i+o)+","+4*i;return 1!==n?a+"L"+o+",0"+c(r/2,t)+"Z":a+"Z"},s.doubleBar=function(t,e,n){var i=r/2,a="M"+o+",0L"+(-i+o)+","+r+"L"+o+","+r+"L"+(i+o)+",0";return 1!==n?a+"L"+o+",0"+c(r/2,t)+"Z":a+"Z"},s.variant=function(){},t.exports=u},function(t,e,n){"use strict";var r=n(2),i=(n(1),n(6)),o=n(3),a=function(){var t={x:-1,y:-1},e={x:-2,y:-2};return{createSVG:function(n,i,o,s,u){var c=n.append("svg").attr("width",i).attr("height",o).on("mousedown",function(){t={x:r.event.pageX,y:r.event.pageY},e={x:-2,y:-2}}).on("mouseup",function(){e={x:r.event.pageX,y:r.event.pageY},t.x===e.x&&t.y===e.y&&!s.overFeature&&s.selectedFeature&&a.selectFeature(s.selectedFeature,s.selectedFeatureElement,s),t={x:-1,y:-1}}).call(s.zoom);return u&&c.attr("class",u),c.append("g").append("path").classed("up_pftv_shadow",!0).attr("d","M-1,-1").attr("transform","translate(-1,-1)").attr("height",o),c}}}();a.shadowPath=function(t,e,n){var r,i=e.xScale(2)-e.xScale(1),a=i/2,s=i*(t.end?t.end-t.begin+1:1);return r=t.type?o.isContinuous(t.type.name)?"M"+-a+",0L"+(-a+s)+",0L"+(-a+s)+","+n+"L"+-a+","+n+"Z":"M"+-a+",0L"+(-a+s)+",0L"+(-a+s)+","+n+"L"+(-a+s-i)+","+n+"L"+(-a+s-i)+",0L"+(-a+i)+",0L"+(-a+i)+","+n+"L"+-a+","+n+"Z":"M-1,-1"},a.updateShadow=function(t,e){var n=e.xScale(t.begin);r.selectAll(".up_pftv_shadow").attr("d",function(){var n=r.select(this).attr("height");return a.shadowPath(t,e,n)}).attr("transform","translate("+n+",0)")},a.selectFeature=function(t,e,n){var i=r.select(e),o={feature:n.selectedFeature,elem:n.selectedFeatureElement};t===n.selectedFeature?(n.selectedFeature=void 0,n.selectedFeatureElement=void 0,r.selectAll(".up_pftv_shadow").attr("d","M-1,-1").attr("transform","translate(-1,-1)")):(n.selectedFeature=t,n.selectedFeatureElement=e,this.updateShadow(t,n));var a=i.classed("up_pftv_activeFeature");r.selectAll("svg path.up_pftv_activeFeature").classed("up_pftv_activeFeature",!1),i.classed("up_pftv_activeFeature",!a),n.updateFeatureSelector(),o.feature&&n.dispatcher.featureDeselected({feature:o.feature,color:r.select(o.elem).style("fill")}),t!==o.feature&&(o.elem&&r.select(o.elem).classed("up_pftv_activeFeature",!1),n.dispatcher.featureSelected({feature:n.selectedFeature,color:i.style("fill")}))},a.addEventsClassAndTitle=function(t,e,n){t.classed("up_pftv_activeFeature",function(t){return t===e.selectedFeature}).on("click",function(t){i.createTooltip(e,t,n),a.selectFeature(t,this,e)}).on("mouseover",function(){e.overFeature=!0}).on("mouseout",function(){e.overFeature=!1})},t.exports=a},function(t,e,n){"use strict";var r=n(1),i=function(t,e){var n=this,i=[],o=0,a=1,s=15;n.totalHeight=e;var u=function(){var t=this;t.rowFeatures=[],t.containsOverlap=function(e){return r.some(t.rowFeatures,function(t){var n=e.end?e.end:e.begin,r=t.end?t.end:t.begin;return Number(e.begin)>=Number(t.begin)&&Number(e.begin)<=Number(r)||Number(n)>=Number(t.begin)&&Number(n)<=Number(r)||Number(t.begin)>=Number(e.begin)&&Number(t.begin)<=Number(n)||Number(r)>=Number(e.begin)&&Number(r)<=Number(n)})},t.addFeature=function(e){t.rowFeatures.push(e)}};n.calculate=function(){o=(n.totalHeight/i.length<s?n.totalHeight/i.length:s)-2*a},n.getYPos=function(t){var e,u=n.totalHeight/i.length>s?(n.totalHeight-i.length*s)/2:0;return r.each(i,function(n,i){r.each(n.rowFeatures,function(n){n===t&&(e=i*(o+2*a)+u)})}),e},n.getRows=function(){return i},n.getFeatureHeight=function(){return o},r.each(t,function(t){var e=r.some(i,function(e){return e.containsOverlap(t)?void 0:(e.addFeature(t),!0)});if(!e){var n=new u;n.addFeature(t),i.push(n)}})};t.exports=i},function(t,e,n){"use strict";var r=n(2),i=n(1),o=function(t){r.select(".up_pftv_tooltip-container").remove();var e=t.append("div").attr("class","up_pftv_tooltip-container");return e.append("span").text("x").attr("class","up_pftv_tooltip-close").on("click",function(){e.transition(20).style("opacity",0).style("display","none"),e.remove()}),e},a=function(t,e,n){var r=t.evidences[e],o=i.where(n,{name:"PubMed"}).length;if(o+=i.where(n,{name:"citation"}).length,"EXP"===r||"NAS"===r)return o+(o>1?" Publications":" Publication");if("IC"===r)return 0===o?"Curated":o+(o>1?" Publications":" Publication");if("ISS"===r)return"By similarity";if("ISM"===r)return n&&0!==n.length?n[0].name+" annotation":"Sequence Analysis";if("MIXM"===r||"MIXA"===r)return"Combined sources";if("MI"===r||"AI"===r)return"Imported";if("AA"===r){var a=n?i.find(n,function(t){return t.url&&-1!==n.url.indexOf("unirule")}):!1,s=n?i.find(n,function(t){return t.url&&-1!==n.url.indexOf("SAAS")}):!1;return a?"UniRule annotation":s?"SAAS annotation":n?n[0].name+" annotation":"Automatic annotation"}return e},s=function(t,e,n){var s=this;s.data=e,s.sequence=t.sequence,s.tooltipViewer=void 0,s.evidences={"ECO:0000269":"EXP","ECO:0000303":"NAS","ECO:0000305":"IC","ECO:0000250":"ISS","ECO:0000255":"ISM","ECO:0000244":"MIXM","ECO:0000312":"MI","ECO:0000256":"AA","ECO:0000213":"MIXA","ECO:0000313":"AI"};var u=o(n);u.style("left",r.mouse(n.node())[0]+10+"px").style("top",r.mouse(n.node())[1]+"px").transition(200).style("opacity",1).style("display","block"),r.select(".up_pftv_tooltip-container table").remove(),s.table=r.select(".up_pftv_tooltip-container").append("table"),s.table.on("mousedown",function(){t.overTooltip=!0}).on("mouseup",function(){t.overTooltip=!1});var c=s.table.append("tr");if(c.append("th").attr("colspan",2).text(s.data.type.label+" "+s.data.begin+(s.data.end?"-"+s.data.end:"")),void 0!==s.data.sp){var l=s.table.append("tr");l.append("td").text("Source"),l.append("td").text(function(){var t=s.data.siftPrediction&&"-"!==s.data.siftPrediction&&"unknown"!==s.data.siftPrediction,e=s.data.polyphenPrediction&&"-"!==s.data.polyphenPrediction&&"unknown"!==s.data.polyphenPrediction;return s.data.sp&&(t||e)?"UniProt and large scale studies":s.data.sp?"UniProt":"Large scale studies"})}if(s.data.description){var f=s.table.append("tr");f.append("td").text("Description"),f.append("td").text(s.data.description)}s.addEvidences=function(t){var e=this;i.each(t,function(t){var n=e.table.append("tr").attr("class","up_pftv_evidence-col");n.append("td").text("Evidence"),n.append("td").text(a(s,t.code,t.sources));var r=i.groupBy(t.sources,"name");i.each(r,function(t,n){var r=e.table.append("tr").attr("class","up_pftv_evidence-source");r.append("td").text(n);var o=r.append("td");i.each(t,function(e,n){o.append("span").append("a").attr("href",e.url).attr("target","_blank").text(e.id),n!==t.length-1&&o.append("span").text(", ")})})})}},u=function(t){t.addEvidences(t.data.evidences)},c=function(t,e,n){if(t.data[n]){var r=t.table.append("tr");r.append("td").text(e),r.append("td").text(function(){var e=t.sequence.substring(+t.data.begin-1,+t.data.begin-1+t.data[n].length);return e+" > "+t.data[n]})}t.addEvidences(t.data.evidences)},l=function(t){var e=t.table.append("tr");if(e.append("td").text("Mutation"),e.append("td").text(t.data.wildType+" > "+t.data.mutation),t.data.frequency&&0!==t.data.frequency){var n=t.table.append("tr");n.append("td").text("Frequency"),n.append("td").text(t.data.frequency)}if(t.data.polyphenPrediction&&"-"!==t.data.polyphenPrediction&&"unknown"!==t.data.polyphenPrediction){var r=t.table.append("tr");r.append("td").text("Polyphen"),r.append("td").text(t.data.polyphenPrediction+", score "+t.data.polyphenScore)}if(t.data.siftPrediction&&"-"!==t.data.siftPrediction&&"unknown"!==t.data.siftPrediction){var o=t.table.append("tr");o.append("td").text("SIFT"),o.append("td").text(t.data.siftPrediction+", score "+t.data.siftScore)}if(t.addEvidences(t.data.evidences),t.data.association){var a=t.table.append("tr");a.append("th").attr("colspan",2).text("Disease Association"),i.each(t.data.association,function(e){if(e.name){var n=t.table.append("tr");n.append("td").text("Disease"),n.append("td").text(e.name)}if(e.description){var r=t.table.append("tr");r.append("td").text("Description"),r.append("td").text(e.description)}e.moreInfo&&i.each(e.moreInfo,function(e){var n=t.table.append("tr");n.append("td").text("See also"),n.append("td").append("a").attr("href",e.url).attr("target","_blank").text(e.name+":"+e.id)})})}};s.basic=function(){this.tooltipViewer=new u(this)},s.mutagen=function(){this.tooltipViewer=new c(this,"Mutation","mutation")},s.conflict=function(){this.tooltipViewer=new c(this,"Conflict","alternativeSequence")},s.missense=function(){this.tooltipViewer=new l(this)},s.ms_del=function(){this.tooltipViewer=new l(this)},s.insdel=function(){this.tooltipViewer=new l(this)},s.stop_lost=function(){this.tooltipViewer=new l(this)},s.stop_gained=function(){this.tooltipViewer=new l(this)},s.init_codon=function(){this.tooltipViewer=new l(this)},s.variant=function(){this.tooltipViewer=new l(this)};var f=function(){return{createTooltip:function(t,e,n){var r,i=e.type.name.toLowerCase();return"function"!=typeof s[i]?(s.basic.prototype=new s(t,e,n),r=new s.basic):(s[i].prototype=new s(t,e,n),r=new s[i]),r}}}();t.exports=f},function(t,e,n){"use strict";var r=n(2),i=n(1),o=[{id:"up_pftv_dialog-checkReviewed",label:"UniProt reviewed",on:!0,property:"sp",value:!0,subfilters:[{id:"up_pftv_dialog-checkDisease",label:"Disease associated",clazz:"up_pftv_indentedCheck",on:!0,property:"disease",value:!0},{id:"up_pftv_dialog-checkNotDisease",label:"Not disease associated",clazz:"up_pftv_indentedCheck",on:!0,property:"disease",value:!1}]},{id:"up_pftv_dialog-checkOther",label:"Large scale studies",on:!0,property:"lss",value:!0}],a=function(t){i.each(o,function(t){var e=!1;t.subfilters?(i.each(t.subfilters,function(t){var n=r.select("#"+t.id).property("checked");t.on=n,e=e||n}),t.on=e,r.select("#"+t.id).property("checked",e)):t.on=r.select("#"+t.id).property("checked")}),t.applyFilter()},s=function(t,e,n){var i=t.append("div");return e.clazz&&i.attr("class",e.clazz),i.append("input").attr("type","checkbox").attr("id",e.id).property("checked",!0).on("click",function(){var t=r.select(this);r.select(this.parentNode).selectAll("div").selectAll("input").property("checked",t.property("checked")),a(n)}),i.append("label").text(e.label),i},u=function(t,e){t.dialog.append("div").text("Filter"),i.each(o,function(n){var r=s(t.dialog,n,e);n.subfilters&&i.each(n.subfilters,function(t){s(r,t,e)})})},c=function(){return{displayDialog:function(t,e){return this.dialog=t.append("div").attr("class","up_pftv_dialog-container"),u(this,e),this.dialog},displayFeature:function(t){var e=!1;return i.each(o,function(n){if(n.on){var r=void 0===t[n.property]?!1:t[n.property],o=r===n.value;if(o&&n.subfilters){var a=!1;i.each(n.subfilters,function(e){if(e.on){var n=void 0===t[e.property]?!1:t[e.property];a=a||n===e.value}}),e=e||o&&a}else e=e||r===n.value}}),e}}}();t.exports=c},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(28).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=arguments.length<2?!1:s.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(8).setImmediate,n(8).clearImmediate)},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(5),a=n(4),s=function(t,e,n){var s=40,u=n.width,c=new o(t,s);c.calculate();var l=function(){var t,o,s=function(s){s.each(function(s){t=r.select(this),o=t.selectAll(".up_pftv_feature").data(s),o.enter().append("path"),o.attr("d",function(t){return i.getFeature(t.type.name,n.xScale(2)-n.xScale(1),c.getFeatureHeight(),t.end?t.end-t.begin+1:1)}).attr("name",function(t){return t.internalId}).attr("transform",function(t){return"translate("+n.xScale(t.begin)+","+c.getYPos(t)+")"}).attr("class",function(t){return"up_pftv_feature up_pftv_"+t.type.name.toLowerCase()}),a.addEventsClassAndTitle(o,n,e),o.exit().remove()})};return s},f=l(),h=a.createSVG(e,u,s,n),p=h.append("g").classed("up_pftv_category-viewer-group",!0),d=p.datum(t).call(f);return this.update=function(){d.call(f),n.selectedFeature&&a.updateShadow(n.selectedFeature,n)},this};t.exports=s},function(t,e,n){"use strict";var r=n(2),i=(n(1),function(){var t=function(t,e,n){var r=t.dialog.append("div").classed("up_pftv_legend",!0);r.append("span").classed("up_pftv_legendRect",!0).style("background-color",e),r.append("span").classed("up_pftv_legendTitle",!0).text(n)},e=function(e){e.dialog.append("div").text("Legend").classed("up_pftv_dialog-legend",!0),t(e,e.UPDiseaseColor,"Disease (UniProt)"),t(e,e.getPredictionColor(0),"Deleterious (Large scale studies)");var n=e.dialog.append("div");n.selectAll("div").data([.2,.4,.6,.8]).enter().append("div").classed("up_pftv_legend",!0).append("span").classed("up_pftv_legendRect",!0).style("background-color",function(t){return e.getPredictionColor(t)}),t(e,e.getPredictionColor(1),"Benign (Large scale studies)"),t(e,e.UPNonDiseaseColor,"Non-disease (UniProt)"),t(e,e.othersColor,"Init codon, stop lost & gained")};return{UPDiseaseColor:"#990000",deleteriousColor:"#ff3300",benignColor:"#009900",UPNonDiseaseColor:"#99cc00",othersColor:"#0033cc",getPredictionColor:r.scale.linear().domain([0,1]).range(["#ff3300","#009900"]),createLegendDialog:function(t,n){return this.dialog=t.append("div").attr("class","up_pftv_dialog-container"),e(this,n),this.dialog}}}());t.exports=i},function(t,e,n){(function(t,r){function i(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(this.length=0,this.parent=void 0,"number"==typeof e?a(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function a(e,n){if(e=g(e,0>n?0:0|v(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)e[r]=0;return e}function s(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|y(e,n);return t=g(t,r),t.write(e,n),t}function u(e,n){if(t.isBuffer(n))return c(e,n);if(G(n))return l(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return f(e,n);if(n instanceof ArrayBuffer)return h(e,n);
}return n.length?p(e,n):d(e,n)}function c(t,e){var n=0|v(e.length);return t=g(t,n),e.copy(t,0,0,n),t}function l(t,e){var n=0|v(e.length);t=g(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function f(t,e){var n=0|v(e.length);t=g(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function h(e,n){return t.TYPED_ARRAY_SUPPORT?(n.byteLength,e=t._augment(new Uint8Array(n))):e=f(e,new Uint8Array(n)),e}function p(t,e){var n=0|v(e.length);t=g(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function d(t,e){var n,r=0;"Buffer"===e.type&&G(e.data)&&(n=e.data,r=0|v(n.length)),t=g(t,r);for(var i=0;r>i;i+=1)t[i]=255&n[i];return t}function g(e,n){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(n)),e.__proto__=t.prototype):(e.length=n,e._isBuffer=!0);var r=0!==n&&n<=t.poolSize>>>1;return r&&(e.parent=Z),e}function v(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function m(e,n){if(!(this instanceof m))return new m(e,n);var r=new t(e,n);return delete r.parent,r}function y(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return H(t).length;e=(""+e).toLowerCase(),r=!0}}function b(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return C(this,e,n);case"binary":return N(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[n+a]=s}return a}function x(t,e,n,r){return X(H(e,t.length-n),t,n,r)}function _(t,e,n,r){return X(V(e),t,n,r)}function E(t,e,n,r){return _(t,e,n,r)}function S(t,e,n,r){return X(W(e),t,n,r)}function M(t,e,n,r){return X(Y(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;n>i;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=i+s){var u,c,l,f;switch(s){case 1:128>o&&(a=o);break;case 2:u=t[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(a=f));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return A(r)}function A(t){var e=t.length;if(K>=e)return String.fromCharCode.apply(String,t);for(var n="",r=0;e>r;)n+=String.fromCharCode.apply(String,t.slice(r,r+=K));return n}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(127&t[i]);return r}function N(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function L(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=z(t[o]);return i}function R(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,n,r,i,o,a){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>o||a>n)throw new RangeError("value is out of bounds");if(r+i>e.length)throw new RangeError("index out of range")}function I(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function q(t,e,n,r,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function D(t,e,n,r,i){return i||q(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,i){return i||q(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,e,n,r,52,8),n+8}function F(t){if(t=B(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function B(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function z(t){return 16>t?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;r>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function Y(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(t){return $.toByteArray(F(t))}function X(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var $=n(25),J=n(26),G=n(27);e.Buffer=t,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var Z={};t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:i(),t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,i=n.length,o=0,a=Math.min(r,i);a>o&&e[o]===n[o];)++o;return o!==a&&(r=e[o],i=n[o]),i>r?-1:r>i?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!G(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;r++)n+=e[r].length;var i=new t(n),o=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(i,o),o+=a.length}return i},t.byteLength=y,t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function r(t,e,n){for(var r=-1,i=0;n+i<t.length;i++)if(t[n+i]===e[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===e.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return r(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):r(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=e,e=0|n,n=i}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return _(this,t,e,n);case"binary":return E(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),e>n&&(n=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=t._augment(this.subarray(e,n));else{var o=n-e;i=new t(o,void 0);for(var a=0;o>a;a++)i[a]=this[a+e]}return i.length&&(i.parent=this.parent||this),i},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},t.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),J.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),J.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),J.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),J.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||j(this,t,e,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||j(this,t,e,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):I(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):I(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):P(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):P(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=0,a=1,s=0>t?1:0;for(this[e]=255&t;++o<n&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):I(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):I(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):P(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):P(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var o,a=i-r;if(this===e&&n>r&&i>n)for(o=a-1;o>=0;o--)e[o+n]=this[o+r];else if(1e3>a||!t.TYPED_ARRAY_SUPPORT)for(o=0;a>o;o++)e[o+n]=this[o+r];else e._set(this.subarray(r,r+a),n);return a},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=H(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,r=e.length;r>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(11).Buffer,function(){return this}())},function(t,e){var n=function(){"use strict";function t(t,e,n,r){function o(e){for(var n=0;n<e.length;n++)if(e[n].win===t)return!0;return!1}var a=!1;if("*"===e){for(var s in i)if(i.hasOwnProperty(s)&&"*"!==s&&"object"==typeof i[s][n]&&(a=o(i[s][n])))break}else i["*"]&&i["*"][n]&&(a=o(i["*"][n])),!a&&i[e]&&i[e][n]&&(a=o(i[e][n]));if(a)throw"A channel is already bound to the same window which overlaps with origin '"+e+"' and has scope '"+n+"'";"object"!=typeof i[e]&&(i[e]={}),"object"!=typeof i[e][n]&&(i[e][n]=[]),i[e][n].push({win:t,handler:r})}function e(t,e,n){for(var r=i[e][n],o=0;o<r.length;o++)r[o].win===t&&r.splice(o,1);0===i[e][n].length&&delete i[e][n]}function n(t){return Array.isArray?Array.isArray(t):-1!=t.constructor.toString().indexOf("Array")}var r=Math.floor(1000001*Math.random()),i={},o={},a=function(t){try{var e=JSON.parse(t.data);if("object"!=typeof e||null===e)throw"malformed"}catch(t){return}var n,r,a,s=t.source,u=t.origin;if("string"==typeof e.method){var c=e.method.split("::");2==c.length?(n=c[0],a=c[1]):a=e.method}if("undefined"!=typeof e.id&&(r=e.id),"string"==typeof a){var l=!1;if(i[u]&&i[u][n])for(var f=0;f<i[u][n].length;f++)if(i[u][n][f].win===s){i[u][n][f].handler(u,a,e),l=!0;break}if(!l&&i["*"]&&i["*"][n])for(var f=0;f<i["*"][n].length;f++)if(i["*"][n][f].win===s){i["*"][n][f].handler(u,a,e);break}}else"undefined"!=typeof r&&o[r]&&o[r](u,a,e)};return window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent&&window.attachEvent("onmessage",a),{build:function(i){var a=function(t){if(i.debugOutput&&window.console&&window.console.log){try{"string"!=typeof t&&(t=JSON.stringify(t))}catch(e){}console.log("["+c+"] "+t)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof i)throw"Channel build invoked without a proper object argument";if(!i.window||!i.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===i.window)throw"target window is same as present window -- not allowed";var s=!1;if("string"==typeof i.origin){var u;"*"===i.origin?s=!0:null!==(u=i.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(i.origin=u[0].toLowerCase(),s=!0)}if(!s)throw"Channel.build() called with an invalid origin";if("undefined"!=typeof i.scope){if("string"!=typeof i.scope)throw"scope, when specified, must be a string";if(i.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var c=function(){for(var t="",e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;5>n;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}(),l={},f={},h={},p=!1,d=[],g=function(t,e,n){var r=!1,i=!1;return{origin:e,invoke:function(e,r){if(!h[t])throw"attempting to invoke a callback of a nonexistent transaction: "+t;for(var i=!1,o=0;o<n.length;o++)if(e===n[o]){i=!0;break}if(!i)throw"request supports no such callback '"+e+"'";b({id:t,callback:e,params:r})},error:function(e,n){if(i=!0,!h[t])throw"error called for nonexistent message: "+t;delete h[t],b({id:t,error:e,message:n})},complete:function(e){if(i=!0,!h[t])throw"complete called for nonexistent message: "+t;delete h[t],b({id:t,result:e})},delayReturn:function(t){return"boolean"==typeof t&&(r=t===!0),r},completed:function(){return i}}},v=function(t,e,n){return window.setTimeout(function(){if(f[t]){var r="timeout ("+e+"ms) exceeded on method '"+n+"'";(1,f[t].error)("timeout_error",r),delete f[t],delete o[t]}},e)},m=function(t,e,r){if("function"==typeof i.gotMessageObserver)try{i.gotMessageObserver(t,r)}catch(s){a("gotMessageObserver() raised an exception: "+s.toString())}if(r.id&&e){if(l[e]){var u=g(r.id,t,r.callbacks?r.callbacks:[]);h[r.id]={};try{if(r.callbacks&&n(r.callbacks)&&r.callbacks.length>0)for(var c=0;c<r.callbacks.length;c++){for(var p=r.callbacks[c],d=r.params,v=p.split("/"),m=0;m<v.length-1;m++){var y=v[m];"object"!=typeof d[y]&&(d[y]={}),d=d[y]}d[v[v.length-1]]=function(){var t=p;return function(e){return u.invoke(t,e)}}()}var b=l[e](u,r.params);u.delayReturn()||u.completed()||u.complete(b)}catch(s){var w="runtime_error",x=null;if("string"==typeof s?x=s:"object"==typeof s&&(s&&n(s)&&2==s.length?(w=s[0],x=s[1]):"string"==typeof s.error&&(w=s.error,s.message?"string"==typeof s.message?x=s.message:s=s.message:x="")),null===x)try{x=JSON.stringify(s),"undefined"==typeof x&&(x=s.toString())}catch(_){x=s.toString()}u.error(w,x)}}}else r.id&&r.callback?f[r.id]&&f[r.id].callbacks&&f[r.id].callbacks[r.callback]?f[r.id].callbacks[r.callback](r.params):a("ignoring invalid callback, id:"+r.id+" ("+r.callback+")"):r.id?f[r.id]?(r.error?(1,f[r.id].error)(r.error,r.message):void 0!==r.result?(1,f[r.id].success)(r.result):(1,f[r.id].success)(),delete f[r.id],delete o[r.id]):a("ignoring invalid response: "+r.id):e&&l[e]&&l[e]({origin:t},r.params)};t(i.window,i.origin,"string"==typeof i.scope?i.scope:"",m);var y=function(t){return"string"==typeof i.scope&&i.scope.length&&(t=[i.scope,t].join("::")),t},b=function(t,e){if(!t)throw"postMessage called with null message";var n=p?"post  ":"queue ";if(a(n+" message: "+JSON.stringify(t)),e||p){if("function"==typeof i.postMessageObserver)try{i.postMessageObserver(i.origin,t)}catch(r){a("postMessageObserver() raised an exception: "+r.toString())}i.window.postMessage(JSON.stringify(t),i.origin)}else d.push(t)},w=function(t,e){if(a("ready msg received"),p)throw"received ready message while in ready state.  help!";for(c+="ping"===e?"-R":"-L",x.unbind("__ready"),p=!0,a("ready msg accepted."),"ping"===e&&x.notify({method:"__ready",params:"pong"});d.length;)b(d.pop());"function"==typeof i.onReady&&i.onReady(x)},x={unbind:function(t){if(l[t]){if(!delete l[t])throw"can't delete method: "+t;return!0}return!1},bind:function(t,e){if(!t||"string"!=typeof t)throw"'method' argument to bind must be string";if(!e||"function"!=typeof e)throw"callback missing from bind params";if(l[t])throw"method '"+t+"' is already bound!";return l[t]=e,this},call:function(t){if(!t)throw"missing arguments to call function";if(!t.method||"string"!=typeof t.method)throw"'method' argument to call must be string";if(!t.success||"function"!=typeof t.success)throw"'success' callback missing from call";var e={},n=[],i=function(t,r){if("object"==typeof r)for(var o in r)if(r.hasOwnProperty(o)){var a=t+(t.length?"/":"")+o;"function"==typeof r[o]?(e[a]=r[o],n.push(a),delete r[o]):"object"==typeof r[o]&&i(a,r[o])}};i("",t.params);var a={id:r,method:y(t.method),params:t.params};n.length&&(a.callbacks=n),t.timeout&&v(r,t.timeout,y(t.method)),f[r]={callbacks:e,error:t.error,success:t.success},o[r]=m,r++,b(a)},notify:function(t){if(!t)throw"missing arguments to notify function";if(!t.method||"string"!=typeof t.method)throw"'method' argument to notify must be string";b({method:y(t.method),params:t.params})},destroy:function(){e(i.window,i.origin,"string"==typeof i.scope?i.scope:""),window.removeEventListener?window.removeEventListener("message",m,!1):window.detachEvent&&window.detachEvent("onmessage",m),p=!1,l={},h={},f={},i.origin=null,d=[],a("channel destroyed"),c=""}};return x.bind("__ready",w),setTimeout(function(){b({method:y("__ready"),params:"ping"},!0)},0),x}}}();t.exports=n},function(t,e,n){"use strict";var r=n(2),i=n(1),o=n(16),a=(n(3),n(5),n(6),n(9)),s=n(4),u=function(t,e,n){var a=this;a.tracks=[],a.data=t,a.viewerType=e,a.fv=n,a.tracksCreated=!1,a.categoryViewer=void 0;var s=n.container.append("div").attr("class","up_pftv_category");a.header=s.append("a").attr("class","up_pftv_category-name up_pftv_arrow-right").attr("title",t.label).text(t.label).on("click",function(){a.toggle(),a.propagateSelection()}),a.viewerContainer=s.append("div").attr("class","up_pftv_category-viewer"),a.tracksContainer=s.append("div").attr("class","up_pftv_category-tracks").style("display","none"),a.addTrack=function(t){this.tracks.push(t)},a.buildTracks=function(){var t=i.groupBy(a.data.features,function(t){return t.type?t.type.label:void 0}),e=this;i.each(t,function(n,r){e.addTrack(o.createTrack(t[r],a.viewerType,a))})},a.toggle=function(){"none"===a.tracksContainer.style("display")?(a.tracksContainer.style("display","block"),a.viewerContainer.select(".up_pftv_category-viewer-group").style("display","none"),a.header.attr("class","up_pftv_category-name up_pftv_arrow-down")):(a.tracksContainer.style("display","none"),a.viewerContainer.select(".up_pftv_category-viewer-group").style("display","block"),a.header.attr("class","up_pftv_category-name up_pftv_arrow-right"))},a.propagateSelection=function(){this.fv.selectedFeature&&r.selectAll("svg path[name="+this.fv.selectedFeature.internalId+"]").classed("up_pftv_activeFeature",!0)},a.setDisabled=function(){s.attr("class","up_pftv_category up_pftv_category-disabled"),a.viewerContainer.style("display","none"),a.header.on("click",function(){})}};u.prototype.update=function(){var t=this;t.categoryViewer.update(),i.each(t.tracks,function(t){t.update()})};var c=function(t){return new a(t.data.features,t.viewerContainer,t.fv)},l=function(t){var e=40,n=t.data.features,o=t.viewerContainer,a=t.fv.xScale,u=t.fv.width,c=(t.fv.zoom,s.createSVG(o,u,e,t.fv,"up_pftv_variation-chart")),l=i.map(n,function(t){return t.variants.length}),f=r.scale.linear().domain([0,r.max(l)]).range([e,0]),h=r.svg.line().x(function(t,e){return a(e)}).y(function(t){return f(t)}).interpolate("linear");return c.append("path").data(n).attr("class","up_pftv_block-area").attr("d",h(l)).on("click",function(){t.toggle()}),c.append("path").data(n).attr("class","up_pftv_line").attr("d",h(l)).on("click",function(){t.toggle()}),this.update=function(){c.selectAll(".up_pftv_block-area").data(n).attr("class","up_pftv_block-area").attr("d",h(l)),c.selectAll(".up_pftv_line").data(n).attr("class","up_pftv_line").attr("d",h(l))},this};u.basic=function(){this.categoryViewer=new c(this)},u.variant=function(){this.categoryViewer=new l(this)};var f=function(){return{createCategory:function(t,e,n){var r;return"function"!=typeof u[e]&&console.log("WARNING: Category viewer type "+e+" doesn't exist"),u[e].prototype=new u(t,e,n),r=new u[e],t.features.length>0?r.buildTracks():r.setDisabled(),r}}}();t.exports=f},function(t,e,n){"use strict";var r=n(2),i=n(1),o=n(4),a=function(t,e,n){var a=0;i.each(t.categoryOrderAndType,function(s,u){if(e[u]&&0!==e[u].features.length){var c=n.append("div");c.append("input").attr("type","checkbox").property("checked",!0).attr("index",a).on("click",function(){var e=r.select(this),a=+e.attr("index"),s=r.selectAll(".up_pftv_category");if(e.property("checked"))r.select(s[0][a]).style("display","block"),n.selectAll("input:disabled").attr("disabled",null);else{if(r.select(s[0][a]).style("display","none"),t.selectedFeature){var u=i.keys(t.categoryOrderAndType)[a];i.contains(t.categoryOrderAndType[u].ftTypes,t.selectedFeature.type.name)&&o.selectFeature(t.selectedFeature,t.selectedFeatureElement,t)}var c=n.selectAll("input:checked");1===c[0].length&&c.attr("disabled",!0)}}),c.append("label").text(e[u].label),a++}})},s=function(t,e,n){var i=n.append("div").attr("class","up_pftv_popupDialog-container").style("left",r.mouse(n.node())[0]+10+"px").style("top",r.mouse(n.node())[1]+5+"px").on("mousedown",function(){t.overCatFilterDialog=!0}).on("mouseup",function(){t.overCatFilterDialog=!1});return i.append("span").text("x").attr("class","up_pftv_tooltip-close").on("click",function(){t.overCatFilterDialog=!1,i.transition(20).style("opacity",0).style("display","none")}),a(t,e,i),i},u=function(){var t;return{displayDialog:function(e,n,r){t||(t=s(e,n,r)),t.transition(20).style("opacity",1).style("display","block")},closeDialog:function(){t&&t.transition(20).style("opacity",0).style("display","none")}}}();t.exports=u},function(t,e,n){var r=n(1),i=n(18),o=n(13),a=n(2),s=n(4),u=(n(3),n(7)),c=n(14),l=function(t){t.zoom.x(t.xScale);var e=t.maxPos-1,n=t.xScale.domain()[1]-t.xScale.domain()[0],r=n/e,i=r*Math.floor(t.sequence.length/t.maxZoomSize);t.zoom.scaleExtent([r,i])},f=function(t){t.viewport.extent(t.xScale.domain()),a.select(".up_pftv_viewport").call(t.viewport),t.viewport.updateTrapezoid()},h=function(t){t.aaViewer.update(),t.aaViewer2.update(),r.each(t.categories,function(t){t.update()})},p=function(t,e,n){try{var r=a.select("."+t);r.classed(t,!1),r.classed(e,!0),r.attr("title",n)}catch(i){console.log("updateZoomButton error: "+i)}},d=function(t){if(t.xScale.domain([1,t.maxZoomSize]),t.selectedFeature){var e=t.xScale.domain(),n=e[e.length-1],r=+t.selectedFeature.begin+(t.selectedFeature.end?Math.floor((+t.selectedFeature.end-+t.selectedFeature.begin)/2):0),i=1>r-n/2?1:r-n/2;i+n>t.sequence.length&&(i=t.sequence.length-n),t.xScale.domain([i,i+n])}h(t),f(t),l(t),p("up_pftv_icon-zoom-in","up_pftv_icon-zoom-out","Zoom out to overview")},g=function(t){h(t),f(t),l(t)},v=function(t){t.xScale.domain([1,t.maxPos]),g(t),p("up_pftv_icon-zoom-out","up_pftv_icon-zoom-in","Zoom in to sequence view")},m=function(t){t.xScale.domain([1,t.maxPos]),t.selectedFeature&&s.selectFeature(t.selectedFeature,t.selectedFeatureElement,t),g(t),p("up_pftv_icon-zoom-out","up_pftv_icon-zoom-in","Zoom in to sequence view")},y=function(t){var e=a.behavior.zoom().x(t.xScale).on("zoom",function(){if(t.xScale.domain()[0]<1){var n=e.translate()[0]-t.xScale(1)+t.xScale.range()[0];e.translate([n,0])}else if(t.xScale.domain()[1]>t.maxPos){var r=e.translate()[0]-t.xScale(t.maxPos)+t.xScale.range()[1];e.translate([r,0])}h(t),f(t)});return e},b=function(t){if(!t.overFeature&&!t.overTooltip){var e=a.selectAll(".up_pftv_tooltip-container").transition(20).style("opacity",0).style("display","none");e.remove()}t.overCatFilterDialog||c.closeDialog()},w=function(t,e){var n=40,r=50,i=a.scale.linear().domain([1,t.maxPos]).range([t.padding.left,t.width-t.padding.right]),o=e.append("div").attr("class","up_pftv_navruler").append("svg").attr("id","up_pftv_svg-navruler").attr("width",t.width).attr("height",r),s=a.svg.axis().scale(t.xScale).orient("bottom");o.append("g").attr("class","x axis").call(s);var u=a.svg.brush().x(i).on("brush",function(){var e=a.event.target.extent();e[1]-e[0]<t.maxZoomSize&&(a.event.target.extent([e[0],e[0]+t.maxZoomSize]),a.event.target(a.select(this))),t.xScale.domain(u.empty()?i.domain():u.extent()),h(t),u.updateTrapezoid()});u.on("brushstart",function(){b(t)}),u.on("brushend",function(){l(t);var e=a.select(".up_pftv_navruler .extent");+e.attr("width")>=t.width-t.padding.left-t.padding.right&&p("up_pftv_icon-zoom-out","up_pftv_icon-zoom-in","Zoom in to sequence view")});var c=a.svg.arc().outerRadius(n/4).startAngle(0).endAngle(function(t,e){return e?-Math.PI:Math.PI});return o.append("g").attr("class","up_pftv_viewport").call(u).selectAll("rect").attr("height",n),u.trapezoid=o.append("g").selectAll("path").data([0]).enter().append("path").classed("up_pftv_trapezoid",!0),u.domainStartLabel=o.append("text").attr("class","domain-label").attr("x",0).attr("y",n),u.domainEndLabel=o.append("text").attr("class","domain-label").attr("x",t.width).attr("y",n).attr("text-anchor","end"),o.selectAll(".resize").append("path").attr("transform","translate(0,"+(n/2-5)+")").attr("class","handle").attr("d",c),u.updateTrapezoid=function(){var e=a.select(".up_pftv_navruler .extent").attr("x"),i=a.select(".up_pftv_navruler .extent").attr("width"),o=+e+ +i,s="M0,"+r+"L0,"+(r-2)+"L"+e+","+(n-12)+"L"+e+","+n+"L"+o+","+n+"L"+o+","+(n-12)+"L"+t.width+","+(r-2)+"L"+t.width+","+r+"Z";this.trapezoid.attr("d",s),this.domainStartLabel.text(Math.round(t.xScale.domain()[0])),this.domainEndLabel.text(Math.min(Math.round(t.xScale.domain()[1]),t.maxPos))},u.clearTrapezoid=function(){this.trapezoid.attr("d","M0,0")},u},x=function(t,e,n){var r=n.append("div").attr("class","up_pftv_buttons");r.append("span").attr("class","up_pftv_icon-eye-off").attr("title","Hide/Show tracks").on("click",function(){c.displayDialog(t,e,r)}),r.append("span").attr("class","up_pftv_icon-zoom-in").attr("title","Zoom in to sequence view").on("click",function(){a.select(this).classed("up_pftv_icon-zoom-in")?d(t):v(t)}),r.append("span").attr("class","up_pftv_icon-arrows-cw").attr("title","Reset view").on("click",function(){m(t)})},_=function(t,e,n){var r={},i=t.width,o=30,u=e.append("div").attr("class","up_pftv_aaviewer").append("svg").attr("width",i).attr("height",o),c=function(){var e,n,r=function(r){r.each(function(r){e=a.select(this),n=e.selectAll(".up_pftv_amino_acid_selector").data(r),n.enter().append("path"),n.attr("d",function(e){return s.shadowPath(e.feature,t,o)}).attr("transform",function(e){return"translate("+t.xScale(e.feature.begin)+",0)"}).classed("up_pftv_amino_acid_selector",!0),n.exit().remove()})};return r},l=c(),f=u.append("g").attr("clip-path","url(#aaSelectorViewClip)").style("opacity",1);f.datum([{feature:{begin:-10,end:-10}}]).call(l);var h=a.svg.axis().scale(t.xScale),p=u.append("g").attr("class","x axis").attr("transform","translate(0, -7)").call(h),d=function(){var e,n,r=function(r){r.each(function(r){e=a.select(this),n=e.selectAll(".up_pftv_amino-acid").data(r),n.enter().append("text").style("text-anchor","middle"),n.attr("x",function(e,n){return t.xScale(n+1)}).attr("y",o/2).text(function(t){return t.toUpperCase()}).attr("title",function(t,e){return e+1}).attr("class","up_pftv_amino-acid"),n.exit().remove()})};return r},g=d(),v=u.append("g").attr("class","up_pftv_aa-text").attr("clip-path","url(#aaViewClip)").attr("transform","translate(0,"+o/5+")").style("opacity",0);return v.datum(n.split("")).call(g),r.update=function(){v.call(g),p.call(h),f.call(l);var e=t.xScale.domain()[1]-t.xScale.domain()[0];e>70?v.transition(50).style("opacity",0):v.transition(50).style("opacity",1)},r.selectFeature=function(){t.selectedFeature?f.datum([{feature:t.selectedFeature}]).call(l):f.datum([{feature:{begin:-10,end:-10}}]).call(l)},r},E=function(t){var e=this;e.dispatcher=a.dispatch("featureSelected","featureDeselected","ready","noData","noFeatures"),e.width=760,e.maxZoomSize=30,e.selectedFeature=void 0,e.selectedFeatureElement=void 0,e.sequence="",e.categoryOrderAndType={domainsAndSites:{type:"basic",filter:!1,ftTypes:["REGION","COILED","MOTIF","REPEAT","CA_BIND","DNA_BIND","DOMAIN","ZN_FING","NP_BIND","METAL","SITE","BINDING","ACT_SITE"]},moleculeProcessing:{type:"basic",filter:!1,ftTypes:["CHAIN","TRANSIT","INIT_MET","PROPEP","PEPTIDE","SIGNAL"]},ptm:{type:"basic",filter:!1,ftTypes:["MOD_RES","LIPID","CARBOHYD","DISULFID","CROSSLNK"]},seqInfo:{type:"basic",filter:!1,ftTypes:["COMPBIAS","CONFLICT","NON_CONS","NON_TER","UNSURE","NON_STD"]},structural:{type:"basic",filter:!1,ftTypes:["HELIX","STRAND","TURN"]},topology:{type:"basic",filter:!1,ftTypes:["TOPO_DOM","TRANSMEM","INTRAMEM"]},mutagenesis:{type:"basic",filter:!1,ftTypes:["MUTAGEN"]},variants:{type:"variant",filter:!0,ftTypes:["MISSENSE","MS_DEL","INSDEL","STOP_LOST","STOP_GAINED","INIT_CODON"]}},e.filterTypes=e.categoryOrderAndType.variants.ftTypes,e.categories=[],e.filterCategories=[],e.padding={top:2,right:10,bottom:2,left:10},e.load=function(){t.proxy=t.proxy?t.proxy:"";var n=i.get(t.proxy,t.uniprotacc);n.done(function(n){0===n.totalFeatureCount?(a.select(t.el).text("No features available for protein "+t.uniprotacc),e.dispatcher.noFeatures(n)):e.init(t,n)}).fail(function(n){a.select(t.el).text(n.responseText),e.dispatcher.noData(n)})},e.applyFilter=function(){r.each(e.filterCategories,function(t){t.update()}),e.selectedFeature&&r.contains(e.filterTypes,e.selectedFeature.type.name)&&!u.displayFeature(e.selectedFeature)&&s.selectFeature(e.selectedFeature,e.selectedFeatureElement,e)},e.updateFeatureSelector=function(){e.aaViewer.selectFeature(),e.aaViewer2.selectFeature()},e.getDispatcher=function(){return e.dispatcher},e.load()};E.prototype.init=function(t,e){var n=this;n.sequence=e.sequence,n.maxPos=e.sequence.length,n.xScale=a.scale.linear().domain([1,e.sequence.length+1]).range([n.padding.left,n.width-n.padding.right]);var i=a.select(t.el).text("").append("div").attr("class","up_pftv_container").on("mousedown",function(){b(n)});n.viewport=w(n,i),x(n,e,i),n.aaViewer=_(n,i,e.sequence),n.zoom=y(n),n.container=i.append("div").attr("class","up_pftv_category-container"),r.each(n.categoryOrderAndType,function(i,a){if(!r.contains(t.exclusions,a)&&0!==e[a].features.length){var s=o.createCategory(e[a],n.categoryOrderAndType[a].type,n);n.categories.push(s),n.categoryOrderAndType[a].filter&&n.filterCategories.push(s)}});var s=i.append("div").attr("class","bottom-aa-container");
n.aaViewer2=_(n,s,e.sequence),f(n),l(n),n.dispatcher.ready(e)},t.exports=E},function(t,e,n){"use strict";var r=(n(2),n(1),n(3),n(5),n(6),n(9)),i=n(17),o=n(7),a=n(10),s=function(t,e){var n=this;n.data=t,n.type=t[0].type.name,n.label=t[0].type.label,n.category=e,n.id=n.type+"_track",n.titleContainer=e.tracksContainer.append("div").style("display","inline-block"),n.trackContainer=e.tracksContainer.append("div").attr("class","up_pftv_track"),n.typeLabels={chain:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",transit:"This describes the extent of a transit peptide",init_met:"This indicates that the initiator methionine is cleaved from the mature protein",propep:"Part of a protein that is cleaved during maturation or activation",peptide:"The position and length of an active peptide in the mature protein",signal:"N-terminal signal peptide",helix:"The positions of experimentally determined helical regions",strand:"The positions of experimentally determined beta strands",turn:"The positions of experimentally determined hydrogen-bonded turns",disulfid:"The positions of cysteine residues participating in disulphide bonds",crosslnk:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",region:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",coiled:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",motif:"Short conserved sequence motif of biological significance",repeat:"Repeated sequence motifs or repeated domains within the protein",ca_bind:"Calcium-binding regions, such as the EF-hand motif",dna_bind:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",domain:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",zn_fing:"Small, functional, independently folded domain that coordinates one or more zinc ions",np_bind:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",metal:"Binding site for a metal ion",site:"Any interesting single amino acid site on the sequence",binding:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",act_site:"Amino acid(s) directly involved in the activity of an enzyme",mod_res:"Modified residues such as phosphorylation, acetylation, acylation, methylation",lipid:"Covalently attached lipid group(s)",carbohyd:"Covalently attached glycan group(s)",compbias:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",conflict:"Sequence discrepancies of unknown origin",non_cons:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",non_ter:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",unsure:"Regions of a sequence for which the authors are unsure about the sequence assignment",non_std:"Non-standard amino acids (selenocysteine and pyrrolysine)",mutagen:"Site which has been experimentally altered by mutagenesis",topo_dom:"Location of non-membrane regions of membrane-spanning proteins",transmem:"Extent of a membrane-spanning region",intramem:"Extent of a region located in a membrane without crossing it",variant:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events"}};s.prototype.update=function(){var t=this;t.trackViewer.update()};var u=function(t){return new r(t.data,t.trackContainer,t.category.fv)},c=function(t){return new i(t.data,t.trackContainer,t.category.fv)};s.basic=function(){var t=this;this.titleContainer.attr("class","up_pftv_track-header").attr("title",t.label.toUpperCase()+"\n"+t.typeLabels[t.type.toLowerCase()]).text(t.label),this.trackViewer=new u(this)},s.variant=function(){var t=this;this.titleContainer.classed("up_pftv_track-header-container",!0),this.titleContainer.append("div").attr("class","up_pftv_track-header").attr("title",t.label+"\n"+t.typeLabels.variant).text(t.label),o.displayDialog(t.titleContainer,t.category.fv),a.createLegendDialog(t.titleContainer),this.trackViewer=new c(this)};var l=function(){return{createTrack:function(t,e,n){var r;return"function"!=typeof s[e]&&console.log("WARNING: Track viewer type "+e+" doesn't exist"),s[e].prototype=new s(t,n,e),r=new s[e]}}}();t.exports=l},function(t,e,n){"use strict";var r=n(2),i=(n(1),n(4)),o=n(10),a=n(7),s=["G","A","V","L","I","S","T","C","M","D","N","E","Q","R","K","H","F","Y","W","P","*"],u=function(t,e,n,r,s){var u=e.selectAll("circle").data(function(t){return t.variants});u.enter().append("circle"),u.attr("cx",function(e){return t.xScale(Math.min(e.begin,r.sequence.length))}).attr("cy",function(e){return t.yScale(e.mutation)}).attr("r",function(){return n(0)}).attr("fill",function(t){return"*"===t.mutation||t.begin>r.maxPos?o.othersColor:t.sp&&t.association?o.UPDiseaseColor:t.sp?o.UPNonDiseaseColor:void 0!==t.siftScore?o.getPredictionColor((t.siftScore+(1-t.polyphenScore))/2):o.othersColor}).style("opacity",function(t){return a.displayFeature(t)?"":0}),i.addEventsClassAndTitle(u,r,s),u.exit().remove()},c=function(t,e,n,i){var o=e.append("g").attr("transform","translate(0,"+t.margin.top+")"),a=o.append("g").attr("clip-path","url(#plotAreaClip)");o.append("clipPath").attr("id","plotAreaClip").append("rect").attr({width:t.width-20,height:t.height}).attr("transform","translate(10, -10)");var s=a.datum(n).call(i),u=r.svg.axis().scale(t.yScale).tickSize(-t.width).orient("left"),c=r.svg.axis().scale(t.yScale).orient("right");return o.append("g").attr("transform","translate(12 ,0)").attr("class","variation-y axis").call(u),o.append("g").attr("transform","translate("+(t.width-18)+", 0)").attr("class","variation-y axis").call(c),s},l=function(t,e,n){var o=this;o.height=430,o.width=n.width,o.showManual=!0,o.showAutomatic=!0,o.xScale=n.xScale,o.margin={top:20,bottom:10},o.yScale=r.scale.ordinal().domain(s).rangePoints([0,o.height-o.margin.top-o.margin.bottom]);var a=function(){var t=r.scale.ordinal(),i=r.scale.linear(),a=r.scale.pow().exponent(.001).domain([0,1]).range([5,10]),s=function(t){var i,s;t.each(function(t){i=r.select(this),s=i.selectAll(".up_pftv_var-series").data(t,function(t){return t.pos}),s.enter().append("g").classed("up_pftv_var-series",!0),u(o,s,a,n,e),s.exit().remove()})};return s.xScale=function(e){return arguments.length?(t=e,s):t},s.yScale=function(t){return arguments.length?(i=t,s):i},s},l=i.createSVG(e,o.width,o.height,n,"up_pftv_variants-svg"),f=a().xScale(o.xScale).yScale(o.yScale),h=c(o,l,t,f);return this.update=function(){h.call(f),n.selectedFeature&&i.updateShadow(n.selectedFeature,n)},this};t.exports=l},function(t,e,n){"use strict";var r=n(19),i=n(1),o=function(){return{get:function(t,e){return r.ajax(t+"https://wwwdev.ebi.ac.uk/uniprot/services/rest/uniprot/features/"+e,{params:{}}).done(function(t){return t.variants.features=o.processVariants(t),o.processData(t)}).fail(function(t){return t})},processData:function(t){var e=0;return i.each(t,function(t){t&&t.features&&i.each(t.features,function(t){t.internalId="ft_"+e,e++})}),t.totalFeatureCount=e,t},processVariants:function(t){var e=[];if(t.variants.features.length>0){e.push({type:{name:"VARIANT",label:"Sequence Variant"},normal:"-",pos:0,variants:[]});var n=t.sequence.split("");i.each(n,function(t,r){e.push({type:{name:"VARIANT",label:"Sequence Variant"},normal:n[r],pos:r+1,variants:[]})}),e.push({type:{name:"VARIANT",label:"Sequence Variant"},normal:"-",pos:n.length+1,variants:[]}),i.each(t.variants.features,function(t){t.begin=+t.begin,t.wildType=t.wildType?t.wildType:e[t.begin].normal,(t.polyphenPrediction||t.siftPrediction||t.sp===!1)&&(t.lss=!0),1<=t.begin&&t.begin<=n.length?e[t.begin].variants.push(t):n.length+1===t.begin&&e[t.begin-1].variants.push(t)})}return e}}}();t.exports=o},function(t,e,n){var r,i;/*!
	 * jQuery JavaScript Library v2.1.4
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2015-04-28T16:01Z
	 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,o){function a(t){var e="length"in t&&t.length,n=rt.type(t);return"function"===n||rt.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function s(t,e,n){if(rt.isFunction(e))return rt.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return rt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(ft.test(e))return rt.filter(e,t,n);e=rt.filter(e,t)}return rt.grep(t,function(t){return G.call(e,t)>=0!==n})}function u(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t){var e=yt[t]={};return rt.each(t.match(mt)||[],function(t,n){e[n]=!0}),e}function l(){et.removeEventListener("DOMContentLoaded",l,!1),n.removeEventListener("load",l,!1),rt.ready()}function f(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=rt.expando+f.uid++}function h(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(St,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Et.test(n)?rt.parseJSON(n):n}catch(i){}_t.set(t,e,n)}else n=void 0;return n}function p(){return!0}function d(){return!1}function g(){try{return et.activeElement}catch(t){}}function v(t,e){return rt.nodeName(t,"table")&&rt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function m(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function y(t){var e=Ft.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){for(var n=0,r=t.length;r>n;n++)xt.set(t[n],"globalEval",!e||xt.get(e[n],"globalEval"))}function w(t,e){var n,r,i,o,a,s,u,c;if(1===e.nodeType){if(xt.hasData(t)&&(o=xt.access(t),a=xt.set(e,o),c=o.events)){delete a.handle,a.events={};for(i in c)for(n=0,r=c[i].length;r>n;n++)rt.event.add(e,i,c[i][n])}_t.hasData(t)&&(s=_t.access(t),u=rt.extend({},s),_t.set(e,u))}}function x(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&rt.nodeName(t,e)?rt.merge([t],n):n}function _(t,e){var n=e.nodeName.toLowerCase();"input"===n&&At.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function E(t,e){var r,i=rt(e.createElement(t)).appendTo(e.body),o=n.getDefaultComputedStyle&&(r=n.getDefaultComputedStyle(i[0]))?r.display:rt.css(i[0],"display");return i.detach(),o}function S(t){var e=et,n=Vt[t];return n||(n=E(t,e),"none"!==n&&n||(Ht=(Ht||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ht[0].contentDocument,e.write(),e.close(),n=E(t,e),Ht.detach()),Vt[t]=n),n}function M(t,e,n){var r,i,o,a,s=t.style;return n=n||Xt(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||rt.contains(t.ownerDocument,t)||(a=rt.style(t,e)),Wt.test(a)&&Yt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function T(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Qt.length;i--;)if(e=Qt[i]+n,e in t)return e;return r}function A(t,e,n){var r=Jt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function C(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=rt.css(t,n+Tt[o],!0,i)),r?("content"===n&&(a-=rt.css(t,"padding"+Tt[o],!0,i)),"margin"!==n&&(a-=rt.css(t,"border"+Tt[o]+"Width",!0,i))):(a+=rt.css(t,"padding"+Tt[o],!0,i),"padding"!==n&&(a+=rt.css(t,"border"+Tt[o]+"Width",!0,i)));return a}function N(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Xt(t),a="border-box"===rt.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=M(t,e,o),(0>i||null==i)&&(i=t.style[e]),Wt.test(i))return i;r=a&&(tt.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+C(t,e,n||(a?"border":"content"),r,o)+"px"}function L(t,e){for(var n,r,i,o=[],a=0,s=t.length;s>a;a++)r=t[a],r.style&&(o[a]=xt.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&kt(r)&&(o[a]=xt.access(r,"olddisplay",S(r.nodeName)))):(i=kt(r),"none"===n&&i||xt.set(r,"olddisplay",i?n:rt.css(r,"display"))));for(a=0;s>a;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function R(t,e,n,r,i){return new R.prototype.init(t,e,n,r,i)}function O(){return setTimeout(function(){te=void 0}),te=rt.now()}function j(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=Tt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function I(t,e,n){for(var r,i=(ae[e]||[]).concat(ae["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function P(t,e,n){var r,i,o,a,s,u,c,l,f=this,h={},p=t.style,d=t.nodeType&&kt(t),g=xt.get(t,"fxshow");n.queue||(s=rt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,rt.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=rt.css(t,"display"),l="none"===c?xt.get(t,"olddisplay")||S(t.nodeName):c,"inline"===l&&"none"===rt.css(t,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],ne.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;d=!0}h[r]=g&&g[r]||rt.style(t,r)}else c=void 0;if(rt.isEmptyObject(h))"inline"===("none"===c?S(t.nodeName):c)&&(p.display=c);else{g?"hidden"in g&&(d=g.hidden):g=xt.access(t,"fxshow",{}),o&&(g.hidden=!d),d?rt(t).show():f.done(function(){rt(t).hide()}),f.done(function(){var e;xt.remove(t,"fxshow");for(e in h)rt.style(t,e,h[e])});for(r in h)a=I(d?g[r]:0,r,f),r in g||(g[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function q(t,e){var n,r,i,o,a;for(n in t)if(r=rt.camelCase(n),i=e[r],o=t[n],rt.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),a=rt.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function D(t,e,n){var r,i,o=0,a=oe.length,s=rt.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=te||O(),n=Math.max(0,c.startTime+c.duration-e),r=n/c.duration||0,o=1-r,a=0,u=c.tweens.length;u>a;a++)c.tweens[a].run(o);return s.notifyWith(t,[c,o,n]),1>o&&u?n:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:rt.extend({},e),opts:rt.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:te||O(),duration:n.duration,tweens:[],createTween:function(e,n){var r=rt.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return e?s.resolveWith(t,[c,e]):s.rejectWith(t,[c,e]),this}}),l=c.props;for(q(l,c.opts.specialEasing);a>o;o++)if(r=oe[o].call(c,t,l,c.opts))return r;return rt.map(l,I,c),rt.isFunction(c.opts.start)&&c.opts.start.call(t,c),rt.fx.timer(rt.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function U(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(mt)||[];if(rt.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function F(t,e,n,r){function i(s){var u;return o[s]=!0,rt.each(t[s]||[],function(t,s){var c=s(e,n,r);return"string"!=typeof c||a||o[c]?a?!(u=c):void 0:(e.dataTypes.unshift(c),i(c),!1)}),u}var o={},a=t===Ee;return i(e.dataTypes[0])||!o["*"]&&i("*")}function B(t,e){var n,r,i=rt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&rt.extend(!0,t,r),t}function z(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function H(t,e,n,r){var i,o,a,s,u,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function V(t,e,n,r){var i;if(rt.isArray(e))rt.each(e,function(e,i){n||Ae.test(t)?r(t,i):V(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==rt.type(e))r(t,e);else for(i in e)V(t+"["+i+"]",e[i],n,r)}function Y(t){return rt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var W=[],X=W.slice,$=W.concat,J=W.push,G=W.indexOf,Z={},K=Z.toString,Q=Z.hasOwnProperty,tt={},et=n.document,nt="2.1.4",rt=function(t,e){return new rt.fn.init(t,e)},it=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ot=/^-ms-/,at=/-([\da-z])/gi,st=function(t,e){return e.toUpperCase()};rt.fn=rt.prototype={jquery:nt,constructor:rt,selector:"",length:0,toArray:function(){return X.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:X.call(this)},pushStack:function(t){var e=rt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return rt.each(this,t,e)},map:function(t){return this.pushStack(rt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:W.sort,splice:W.splice},rt.extend=rt.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||rt.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],r=t[e],a!==r&&(c&&r&&(rt.isPlainObject(r)||(i=rt.isArray(r)))?(i?(i=!1,o=n&&rt.isArray(n)?n:[]):o=n&&rt.isPlainObject(n)?n:{},a[e]=rt.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},rt.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===rt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!rt.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==rt.type(t)||t.nodeType||rt.isWindow(t)?!1:t.constructor&&!Q.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[K.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=rt.trim(t),t&&(1===t.indexOf("use strict")?(e=et.createElement("script"),e.text=t,et.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ot,"ms-").replace(at,st)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,i=0,o=t.length,s=a(t);if(n){if(s)for(;o>i&&(r=e.apply(t[i],n),r!==!1);i++);else for(i in t)if(r=e.apply(t[i],n),r===!1)break}else if(s)for(;o>i&&(r=e.call(t[i],i,t[i]),r!==!1);i++);else for(i in t)if(r=e.call(t[i],i,t[i]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(it,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(a(Object(t))?rt.merge(n,"string"==typeof t?[t]:t):J.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:G.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,a=t.length,s=!n;a>o;o++)r=!e(t[o],o),r!==s&&i.push(t[o]);return i},map:function(t,e,n){var r,i=0,o=t.length,s=a(t),u=[];if(s)for(;o>i;i++)r=e(t[i],i,n),null!=r&&u.push(r);else for(i in t)r=e(t[i],i,n),null!=r&&u.push(r);return $.apply([],u)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),rt.isFunction(t)?(r=X.call(arguments,2),i=function(){return t.apply(e||this,r.concat(X.call(arguments)))},i.guid=t.guid=t.guid||rt.guid++,i):void 0},now:Date.now,support:tt}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ut=/*!
	 * Sizzle CSS Selector Engine v2.2.0-pre
	 * http://sizzlejs.com/
	 *
	 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2014-12-16
	 */
function(t){function e(t,e,n,r){var i,o,a,s,u,c,f,p,d,g;if((e?e.ownerDocument||e:F)!==R&&L(e),e=e||R,n=n||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return n;if(!r&&j){if(11!==s&&(i=yt.exec(t)))if(a=i[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&D(e,o)&&o.id===a)return n.push(o),n}else{if(i[2])return K.apply(n,e.getElementsByTagName(t)),n;if((a=i[3])&&x.getElementsByClassName)return K.apply(n,e.getElementsByClassName(a)),n}if(x.qsa&&(!I||!I.test(t))){if(p=f=U,d=e,g=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(c=M(t),(f=e.getAttribute("id"))?p=f.replace(wt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",u=c.length;u--;)c[u]=p+h(c[u]);d=bt.test(t)&&l(e.parentNode)||e,g=c.join(",")}if(g)try{return K.apply(n,d.querySelectorAll(g)),n}catch(v){}finally{f||e.removeAttribute("id")}}}return k(t.replace(ut,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>_.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[U]=!0,t}function i(t){var e=R.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)_.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function l(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function f(){}function h(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function p(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=z++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,u,c=[B,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[U]||(e[U]={}),(s=u[r])&&s[0]===B&&s[1]===o)return c[2]=s[2];if(u[r]=c,c[2]=t(e,n,a))return!0}}}function d(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function g(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function v(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,c=null!=e;u>s;s++)(o=t[s])&&(!n||n(o,r,i))&&(a.push(o),c&&e.push(s));return a}function m(t,e,n,i,o,a){return i&&!i[U]&&(i=m(i)),o&&!o[U]&&(o=m(o,a)),r(function(r,a,s,u){var c,l,f,h=[],p=[],d=a.length,m=r||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!r&&e?m:v(m,h,t,s,u),b=n?o||(r?t:d||i)?[]:a:y;if(n&&n(y,b,s,u),i)for(c=v(b,p),i(c,[],s,u),l=c.length;l--;)(f=c[l])&&(b[p[l]]=!(y[p[l]]=f));if(r){if(o||t){if(o){for(c=[],l=b.length;l--;)(f=b[l])&&c.push(y[l]=f);o(null,b=[],c,u)}for(l=b.length;l--;)(f=b[l])&&(c=o?tt(r,f):h[l])>-1&&(r[c]=!(a[c]=f))}}else b=v(b===a?b.splice(d,b.length):b),o?o(null,a,b,u):K.apply(a,b)})}function y(t){for(var e,n,r,i=t.length,o=_.relative[t[0].type],a=o||_.relative[" "],s=o?1:0,u=p(function(t){return t===e},a,!0),c=p(function(t){return tt(e,t)>-1},a,!0),l=[function(t,n,r){var i=!o&&(r||n!==A)||((e=n).nodeType?u(t,n,r):c(t,n,r));return e=null,i}];i>s;s++)if(n=_.relative[t[s].type])l=[p(d(l),n)];else{if(n=_.filter[t[s].type].apply(null,t[s].matches),n[U]){for(r=++s;i>r&&!_.relative[t[r].type];r++);return m(s>1&&d(l),s>1&&h(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ut,"$1"),n,r>s&&y(t.slice(s,r)),i>r&&y(t=t.slice(r)),i>r&&h(t))}l.push(n)}return d(l)}function b(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,u,c){var l,f,h,p=0,d="0",g=r&&[],m=[],y=A,b=r||o&&_.find.TAG("*",c),w=B+=null==y?1:Math.random()||.1,x=b.length;for(c&&(A=a!==R&&a);d!==x&&null!=(l=b[d]);d++){if(o&&l){for(f=0;h=t[f++];)if(h(l,a,s)){u.push(l);break}c&&(B=w)}i&&((l=!h&&l)&&p--,r&&g.push(l))}if(p+=d,i&&d!==p){for(f=0;h=n[f++];)h(g,m,a,s);if(r){if(p>0)for(;d--;)g[d]||m[d]||(m[d]=G.call(u));m=v(m)}K.apply(u,m),c&&!r&&m.length>0&&p+n.length>1&&e.uniqueSort(u)}return c&&(B=w,A=y),g};return i?r(a):a}var w,x,_,E,S,M,T,k,A,C,N,L,R,O,j,I,P,q,D,U="sizzle"+1*new Date,F=t.document,B=0,z=0,H=n(),V=n(),Y=n(),W=function(t,e){return t===e&&(N=!0),0},X=1<<31,$={}.hasOwnProperty,J=[],G=J.pop,Z=J.push,K=J.push,Q=J.slice,tt=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),ut=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),lt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ft=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(at),pt=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),_t=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Et=function(){L()};try{K.apply(J=Q.call(F.childNodes),F.childNodes),J[F.childNodes.length].nodeType}catch(St){K={apply:J.length?function(t,e){Z.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}x=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},L=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:F;return r!==R&&9===r.nodeType&&r.documentElement?(R=r,O=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Et,!1):n.attachEvent&&n.attachEvent("onunload",Et)),j=!S(r),x.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=i(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=mt.test(r.getElementsByClassName),x.getById=i(function(t){return O.appendChild(t).id=U,!r.getElementsByName||!r.getElementsByName(U).length}),x.getById?(_.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&j){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(xt,_t);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(xt,_t);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},_.find.CLASS=x.getElementsByClassName&&function(t,e){return j?e.getElementsByClassName(t):void 0},P=[],I=[],(x.qsa=mt.test(r.querySelectorAll))&&(i(function(t){O.appendChild(t).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+U+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+U+"+*").length||I.push(".#.+[+~]")}),i(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=mt.test(q=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&i(function(t){x.disconnectedMatch=q.call(t,"div"),q.call(t,"[s!='']:x"),P.push("!=",at)}),I=I.length&&new RegExp(I.join("|")),P=P.length&&new RegExp(P.join("|")),e=mt.test(O.compareDocumentPosition),D=e||mt.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return N=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===r||t.ownerDocument===F&&D(F,t)?-1:e===r||e.ownerDocument===F&&D(F,e)?1:C?tt(C,t)-tt(C,e):0:4&n?-1:1)}:function(t,e){if(t===e)return N=!0,0;var n,i=0,o=t.parentNode,s=e.parentNode,u=[t],c=[e];if(!o||!s)return t===r?-1:e===r?1:o?-1:s?1:C?tt(C,t)-tt(C,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;u[i]===c[i];)i++;return i?a(u[i],c[i]):u[i]===F?-1:c[i]===F?1:0},r):R},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==R&&L(t),n=n.replace(ft,"='$1']"),x.matchesSelector&&j&&(!P||!P.test(n))&&(!I||!I.test(n)))try{var r=q.call(t,n);if(r||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,R,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==R&&L(t),D(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==R&&L(t);var n=_.attrHandle[e.toLowerCase()],r=n&&$.call(_.attrHandle,e.toLowerCase())?n(t,e,!j):void 0;return void 0!==r?r:x.attributes||!j?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(N=!x.detectDuplicates,C=!x.sortStable&&t.slice(0),t.sort(W),N){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return C=null,t},E=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=E(e);return n},_=e.selectors={cacheLength:50,createPseudo:r,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(xt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=M(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(st," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,f,h,p,d,g=o!==a?"nextSibling":"previousSibling",v=e.parentNode,m=s&&e.nodeName.toLowerCase(),y=!u&&!s;if(v){if(o){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?v.firstChild:v.lastChild],a&&y){for(l=v[U]||(v[U]={}),c=l[t]||[],p=c[0]===B&&c[1],h=c[0]===B&&c[2],f=p&&v.childNodes[p];f=++p&&f&&f[g]||(h=p=0)||d.pop();)if(1===f.nodeType&&++h&&f===e){l[t]=[B,p,h];break}}else if(y&&(c=(e[U]||(e[U]={}))[t])&&c[0]===B)h=c[1];else for(;(f=++p&&f&&f[g]||(h=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++h||(y&&((f[U]||(f[U]={}))[t]=[B,h]),f!==e)););return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(t,n){var i,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[U]?o(n):o.length>1?(i=[t,t,"",n],_.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=tt(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=T(t.replace(ut,"$1"));return i[U]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(xt,_t),function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:r(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,_t).toLowerCase(),function(e){var n;do if(n=j?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return vt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:c(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=u(w);return f.prototype=_.filters=_.pseudos,_.setFilters=new f,M=e.tokenize=function(t,n){var r,i,o,a,s,u,c,l=V[t+" "];if(l)return n?0:l.slice(0);for(s=t,u=[],c=_.preFilter;s;){(!r||(i=ct.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=lt.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),s=s.slice(r.length));for(a in _.filter)!(i=dt[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):V(t,u).slice(0)},T=e.compile=function(t,e){var n,r=[],i=[],o=Y[t+" "];if(!o){for(e||(e=M(t)),n=e.length;n--;)o=y(e[n]),o[U]?r.push(o):i.push(o);o=Y(t,b(i,r)),o.selector=t}return o},k=e.select=function(t,e,n,r){var i,o,a,s,u,c="function"==typeof t&&t,f=!r&&M(t=c.selector||t);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===e.nodeType&&j&&_.relative[o[1].type]){if(e=(_.find.ID(a.matches[0].replace(xt,_t),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=dt.needsContext.test(t)?0:o.length;i--&&(a=o[i],!_.relative[s=a.type]);)if((u=_.find[s])&&(r=u(a.matches[0].replace(xt,_t),bt.test(o[0].type)&&l(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&h(o),!t)return K.apply(n,r),n;break}}return(c||T(t,f))(r,e,!j,n,bt.test(t)&&l(e.parentNode)||e),n},x.sortStable=U.split("").sort(W).join("")===U,x.detectDuplicates=!!N,L(),x.sortDetached=i(function(t){return 1&t.compareDocumentPosition(R.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(n);rt.find=ut,rt.expr=ut.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=ut.uniqueSort,rt.text=ut.getText,rt.isXMLDoc=ut.isXML,rt.contains=ut.contains;var ct=rt.expr.match.needsContext,lt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ft=/^.[^:#\[\.,]*$/;rt.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?rt.find.matchesSelector(r,t)?[r]:[]:rt.find.matches(t,rt.grep(e,function(t){return 1===t.nodeType}))},rt.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(rt(t).filter(function(){for(e=0;n>e;e++)if(rt.contains(i[e],this))return!0}));for(e=0;n>e;e++)rt.find(t,i[e],r);return r=this.pushStack(n>1?rt.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(s(this,t||[],!1))},not:function(t){return this.pushStack(s(this,t||[],!0))},is:function(t){return!!s(this,"string"==typeof t&&ct.test(t)?rt(t):t||[],!1).length}});var ht,pt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,dt=rt.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:pt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ht).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof rt?e[0]:e,rt.merge(this,rt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:et,!0)),lt.test(n[1])&&rt.isPlainObject(e))for(n in e)rt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=et.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=et,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):rt.isFunction(t)?"undefined"!=typeof ht.ready?ht.ready(t):t(rt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),rt.makeArray(t,this))};dt.prototype=rt.fn,ht=rt(et);var gt=/^(?:parents|prev(?:Until|All))/,vt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&rt(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),rt.fn.extend({has:function(t){var e=rt(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(rt.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=ct.test(t)||"string"!=typeof t?rt(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&rt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?rt.unique(o):o)},index:function(t){return t?"string"==typeof t?G.call(rt(t),this[0]):G.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(rt.unique(rt.merge(this.get(),rt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),rt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return rt.dir(t,"parentNode")},parentsUntil:function(t,e,n){return rt.dir(t,"parentNode",n)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return rt.dir(t,"nextSibling")},prevAll:function(t){return rt.dir(t,"previousSibling")},nextUntil:function(t,e,n){return rt.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return rt.dir(t,"previousSibling",n)},siblings:function(t){return rt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return rt.sibling(t.firstChild)},contents:function(t){return t.contentDocument||rt.merge([],t.childNodes)}},function(t,e){rt.fn[t]=function(n,r){var i=rt.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=rt.filter(r,i)),this.length>1&&(vt[t]||rt.unique(i),gt.test(t)&&i.reverse()),this.pushStack(i)}});var mt=/\S+/g,yt={};rt.Callbacks=function(t){t="string"==typeof t?yt[t]||c(t):rt.extend({},t);var e,n,r,i,o,a,s=[],u=!t.once&&[],l=function(c){for(e=t.memory&&c,n=!0,a=i||0,i=0,o=s.length,r=!0;s&&o>a;a++)if(s[a].apply(c[0],c[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,s&&(u?u.length&&l(u.shift()):e?s=[]:f.disable())},f={add:function(){if(s){var n=s.length;!function a(e){rt.each(e,function(e,n){var r=rt.type(n);"function"===r?t.unique&&f.has(n)||s.push(n):n&&n.length&&"string"!==r&&a(n)})}(arguments),r?o=s.length:e&&(i=n,l(e))}return this},remove:function(){return s&&rt.each(arguments,function(t,e){for(var n;(n=rt.inArray(e,s,n))>-1;)s.splice(n,1),r&&(o>=n&&o--,a>=n&&a--)}),this},has:function(t){return t?rt.inArray(t,s)>-1:!(!s||!s.length)},empty:function(){return s=[],o=0,this},disable:function(){return s=u=e=void 0,this},disabled:function(){return!s},lock:function(){return u=void 0,e||f.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!s||n&&!u||(e=e||[],e=[t,e.slice?e.slice():e],r?u.push(e):l(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},rt.extend({Deferred:function(t){var e=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return rt.Deferred(function(n){rt.each(e,function(e,o){var a=rt.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&rt.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?rt.extend(t,r):r}},i={};return r.pipe=r.then,rt.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=X.call(arguments),a=o.length,s=1!==a||t&&rt.isFunction(t.promise)?a:0,u=1===s?t:rt.Deferred(),c=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?X.call(arguments):i,r===e?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&rt.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(u.reject).progress(c(i,n,e)):--s;return s||u.resolveWith(r,o),u.promise()}});var bt;rt.fn.ready=function(t){return rt.ready.promise().done(t),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?rt.readyWait++:rt.ready(!0)},ready:function(t){(t===!0?--rt.readyWait:rt.isReady)||(rt.isReady=!0,t!==!0&&--rt.readyWait>0||(bt.resolveWith(et,[rt]),rt.fn.triggerHandler&&(rt(et).triggerHandler("ready"),rt(et).off("ready"))))}}),rt.ready.promise=function(t){return bt||(bt=rt.Deferred(),"complete"===et.readyState?setTimeout(rt.ready):(et.addEventListener("DOMContentLoaded",l,!1),n.addEventListener("load",l,!1))),bt.promise(t)},rt.ready.promise();var wt=rt.access=function(t,e,n,r,i,o,a){var s=0,u=t.length,c=null==n;if("object"===rt.type(n)){i=!0;for(s in n)rt.access(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,rt.isFunction(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(rt(t),n)})),e))for(;u>s;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):u?e(t[0],n):o};rt.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},f.uid=1,f.accepts=rt.acceptData,f.prototype={key:function(t){if(!f.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=f.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,rt.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(rt.isEmptyObject(o))rt.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,rt.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{rt.isArray(e)?r=e.concat(e.map(rt.camelCase)):(i=rt.camelCase(e),e in a?r=[e,i]:(r=i,r=r in a?[r]:r.match(mt)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(t){return!rt.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var xt=new f,_t=new f,Et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/([A-Z])/g;rt.extend({hasData:function(t){return _t.hasData(t)||xt.hasData(t)},data:function(t,e,n){return _t.access(t,e,n)},removeData:function(t,e){_t.remove(t,e)},_data:function(t,e,n){return xt.access(t,e,n)},_removeData:function(t,e){xt.remove(t,e)}}),rt.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=_t.get(o),1===o.nodeType&&!xt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=rt.camelCase(r.slice(5)),h(o,r,i[r])));xt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){_t.set(this,t)}):wt(this,function(e){var n,r=rt.camelCase(t);if(o&&void 0===e){if(n=_t.get(o,t),void 0!==n)return n;if(n=_t.get(o,r),void 0!==n)return n;if(n=h(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=_t.get(this,r);_t.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&_t.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){_t.remove(this,t)})}}),rt.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=xt.get(t,e),n&&(!r||rt.isArray(n)?r=xt.access(t,e,rt.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=rt.queue(t,e),r=n.length,i=n.shift(),o=rt._queueHooks(t,e),a=function(){rt.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return xt.get(t,n)||xt.access(t,n,{empty:rt.Callbacks("once memory").add(function(){xt.remove(t,[e+"queue",n])})})}}),rt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?rt.queue(this[0],t):void 0===e?this:this.each(function(){var n=rt.queue(this,t,e);rt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&rt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){rt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=rt.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=xt.get(o[a],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var Mt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tt=["Top","Right","Bottom","Left"],kt=function(t,e){return t=e||t,"none"===rt.css(t,"display")||!rt.contains(t.ownerDocument,t)},At=/^(?:checkbox|radio)$/i;!function(){var t=et.createDocumentFragment(),e=t.appendChild(et.createElement("div")),n=et.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),tt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",tt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ct="undefined";tt.focusinBubbles="onfocusin"in n;var Nt=/^key/,Lt=/^(?:mouse|pointer|contextmenu)|click/,Rt=/^(?:focusinfocus|focusoutblur)$/,Ot=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,c,l,f,h,p,d,g,v=xt.get(t);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=rt.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof rt!==Ct&&rt.event.triggered!==e.type?rt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(mt)||[""],c=e.length;c--;)s=Ot.exec(e[c])||[],p=g=s[1],d=(s[2]||"").split(".").sort(),p&&(f=rt.event.special[p]||{},p=(i?f.delegateType:f.bindType)||p,f=rt.event.special[p]||{},l=rt.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&rt.expr.match.needsContext.test(i),namespace:d.join(".")},o),(h=u[p])||(h=u[p]=[],h.delegateCount=0,f.setup&&f.setup.call(t,r,d,a)!==!1||t.addEventListener&&t.addEventListener(p,a,!1)),f.add&&(f.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,l):h.push(l),rt.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,c,l,f,h,p,d,g,v=xt.hasData(t)&&xt.get(t);if(v&&(u=v.events)){for(e=(e||"").match(mt)||[""],c=e.length;c--;)if(s=Ot.exec(e[c])||[],p=g=s[1],d=(s[2]||"").split(".").sort(),p){for(f=rt.event.special[p]||{},p=(r?f.delegateType:f.bindType)||p,h=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)l=h[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(o,1),l.selector&&h.delegateCount--,f.remove&&f.remove.call(t,l));a&&!h.length&&(f.teardown&&f.teardown.call(t,d,v.handle)!==!1||rt.removeEvent(t,p,v.handle),delete u[p])}else for(p in u)rt.event.remove(t,p+e[c],n,r,!0);rt.isEmptyObject(u)&&(delete v.handle,xt.remove(t,"events"))}},trigger:function(t,e,r,i){var o,a,s,u,c,l,f,h=[r||et],p=Q.call(t,"type")?t.type:t,d=Q.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||et,3!==r.nodeType&&8!==r.nodeType&&!Rt.test(p+rt.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[rt.expando]?t:new rt.Event(p,"object"==typeof t&&t),
t.isTrigger=i?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:rt.makeArray(e,[t]),f=rt.event.special[p]||{},i||!f.trigger||f.trigger.apply(r,e)!==!1)){if(!i&&!f.noBubble&&!rt.isWindow(r)){for(u=f.delegateType||p,Rt.test(u+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||et)&&h.push(s.defaultView||s.parentWindow||n)}for(o=0;(a=h[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||p,l=(xt.get(a,"events")||{})[t.type]&&xt.get(a,"handle"),l&&l.apply(a,e),l=c&&a[c],l&&l.apply&&rt.acceptData(a)&&(t.result=l.apply(a,e),t.result===!1&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),e)!==!1||!rt.acceptData(r)||c&&rt.isFunction(r[p])&&!rt.isWindow(r)&&(s=r[c],s&&(r[c]=null),rt.event.triggered=p,r[p](),rt.event.triggered=void 0,s&&(r[c]=s)),t.result}},dispatch:function(t){t=rt.event.fix(t);var e,n,r,i,o,a=[],s=X.call(arguments),u=(xt.get(this,"events")||{})[t.type]||[],c=rt.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=rt.event.handlers.call(this,t,u),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((rt.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,u=t.target;if(s&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],n=0;s>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?rt(i,this).index(u)>=0:rt.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||et,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[rt.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Lt.test(i)?this.mouseHooks:Nt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new rt.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=et),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&rt.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return rt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=rt.extend(new rt.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?rt.event.trigger(i,null,e):rt.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},rt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},rt.Event=function(t,e){return this instanceof rt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?p:d):this.type=t,e&&rt.extend(this,e),this.timeStamp=t&&t.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(t,e)},rt.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=p,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=p,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=p,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){rt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!rt.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),tt.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){rt.event.simulate(e,t.target,rt.event.fix(t),!0)};rt.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=xt.access(r,e);i||r.addEventListener(t,n,!0),xt.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=xt.access(r,e)-1;i?xt.access(r,e,i):(r.removeEventListener(t,n,!0),xt.remove(r,e))}}}),rt.fn.extend({on:function(t,e,n,r,i){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=d;else if(!r)return this;return 1===i&&(o=r,r=function(t){return rt().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=rt.guid++)),this.each(function(){rt.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,rt(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=d),this.each(function(){rt.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){rt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?rt.event.trigger(t,e,n,!0):void 0}});var jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,It=/<([\w:]+)/,Pt=/<|&#?\w+;/,qt=/<(?:script|style|link)/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ut=/^$|\/(?:java|ecma)script/i,Ft=/^true\/(.*)/,Bt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,zt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};zt.optgroup=zt.option,zt.tbody=zt.tfoot=zt.colgroup=zt.caption=zt.thead,zt.th=zt.td,rt.extend({clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=rt.contains(t.ownerDocument,t);if(!(tt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||rt.isXMLDoc(t)))for(a=x(s),o=x(t),r=0,i=o.length;i>r;r++)_(o[r],a[r]);if(e)if(n)for(o=o||x(t),a=a||x(s),r=0,i=o.length;i>r;r++)w(o[r],a[r]);else w(t,s);return a=x(s,"script"),a.length>0&&b(a,!u&&x(t,"script")),s},buildFragment:function(t,e,n,r){for(var i,o,a,s,u,c,l=e.createDocumentFragment(),f=[],h=0,p=t.length;p>h;h++)if(i=t[h],i||0===i)if("object"===rt.type(i))rt.merge(f,i.nodeType?[i]:i);else if(Pt.test(i)){for(o=o||l.appendChild(e.createElement("div")),a=(It.exec(i)||["",""])[1].toLowerCase(),s=zt[a]||zt._default,o.innerHTML=s[1]+i.replace(jt,"<$1></$2>")+s[2],c=s[0];c--;)o=o.lastChild;rt.merge(f,o.childNodes),o=l.firstChild,o.textContent=""}else f.push(e.createTextNode(i));for(l.textContent="",h=0;i=f[h++];)if((!r||-1===rt.inArray(i,r))&&(u=rt.contains(i.ownerDocument,i),o=x(l.appendChild(i),"script"),u&&b(o),n))for(c=0;i=o[c++];)Ut.test(i.type||"")&&n.push(i);return l},cleanData:function(t){for(var e,n,r,i,o=rt.event.special,a=0;void 0!==(n=t[a]);a++){if(rt.acceptData(n)&&(i=n[xt.expando],i&&(e=xt.cache[i]))){if(e.events)for(r in e.events)o[r]?rt.event.remove(n,r):rt.removeEvent(n,r,e.handle);xt.cache[i]&&delete xt.cache[i]}delete _t.cache[n[_t.expando]]}}}),rt.fn.extend({text:function(t){return wt(this,function(t){return void 0===t?rt.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?rt.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||rt.cleanData(x(n)),n.parentNode&&(e&&rt.contains(n.ownerDocument,n)&&b(x(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(rt.cleanData(x(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return rt.clone(this,t,e)})},html:function(t){return wt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!qt.test(t)&&!zt[(It.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(jt,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(rt.cleanData(x(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,rt.cleanData(x(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=$.apply([],t);var n,r,i,o,a,s,u=0,c=this.length,l=this,f=c-1,h=t[0],p=rt.isFunction(h);if(p||c>1&&"string"==typeof h&&!tt.checkClone&&Dt.test(h))return this.each(function(n){var r=l.eq(n);p&&(t[0]=h.call(this,n,r.html())),r.domManip(t,e)});if(c&&(n=rt.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=rt.map(x(n,"script"),m),o=i.length;c>u;u++)a=n,u!==f&&(a=rt.clone(a,!0,!0),o&&rt.merge(i,x(a,"script"))),e.call(this[u],a,u);if(o)for(s=i[i.length-1].ownerDocument,rt.map(i,y),u=0;o>u;u++)a=i[u],Ut.test(a.type||"")&&!xt.access(a,"globalEval")&&rt.contains(s,a)&&(a.src?rt._evalUrl&&rt._evalUrl(a.src):rt.globalEval(a.textContent.replace(Bt,"")))}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){rt.fn[t]=function(t){for(var n,r=[],i=rt(t),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),rt(i[a])[e](n),J.apply(r,n.get());return this.pushStack(r)}});var Ht,Vt={},Yt=/^margin/,Wt=new RegExp("^("+Mt+")(?!px)[a-z%]+$","i"),Xt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var t=n.getComputedStyle(a,null);e="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var e,r,i=et.documentElement,o=et.createElement("div"),a=et.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",tt.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),n.getComputedStyle&&rt.extend(tt,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,e=a.appendChild(et.createElement("div"));return e.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",a.style.width="1px",i.appendChild(o),t=!parseFloat(n.getComputedStyle(e,null).marginRight),i.removeChild(o),a.removeChild(e),t}}))}(),rt.swap=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i};var $t=/^(none|table(?!-c[ea]).+)/,Jt=new RegExp("^("+Mt+")(.*)$","i"),Gt=new RegExp("^([+-])=("+Mt+")","i"),Zt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:"0",fontWeight:"400"},Qt=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=M(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=rt.camelCase(e),u=t.style;return e=rt.cssProps[s]||(rt.cssProps[s]=k(u,s)),a=rt.cssHooks[e]||rt.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:u[e]:(o=typeof n,"string"===o&&(i=Gt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(rt.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||rt.cssNumber[s]||(n+="px"),tt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u[e]=n)),void 0)}},css:function(t,e,n,r){var i,o,a,s=rt.camelCase(e);return e=rt.cssProps[s]||(rt.cssProps[s]=k(t.style,s)),a=rt.cssHooks[e]||rt.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=M(t,e,r)),"normal"===i&&e in Kt&&(i=Kt[e]),""===n||n?(o=parseFloat(i),n===!0||rt.isNumeric(o)?o||0:i):i}}),rt.each(["height","width"],function(t,e){rt.cssHooks[e]={get:function(t,n,r){return n?$t.test(rt.css(t,"display"))&&0===t.offsetWidth?rt.swap(t,Zt,function(){return N(t,e,r)}):N(t,e,r):void 0},set:function(t,n,r){var i=r&&Xt(t);return A(t,n,r?C(t,e,r,"border-box"===rt.css(t,"boxSizing",!1,i),i):0)}}}),rt.cssHooks.marginRight=T(tt.reliableMarginRight,function(t,e){return e?rt.swap(t,{display:"inline-block"},M,[t,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(t,e){rt.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+Tt[r]+e]=o[r]||o[r-2]||o[0];return i}},Yt.test(t)||(rt.cssHooks[t+e].set=A)}),rt.fn.extend({css:function(t,e){return wt(this,function(t,e,n){var r,i,o={},a=0;if(rt.isArray(e)){for(r=Xt(t),i=e.length;i>a;a++)o[e[a]]=rt.css(t,e[a],!1,r);return o}return void 0!==n?rt.style(t,e,n):rt.css(t,e)},t,e,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){kt(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=R,R.prototype={constructor:R,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(rt.cssNumber[n]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,n=R.propHooks[this.prop];return this.options.duration?this.pos=e=rt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=rt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){rt.fx.step[t.prop]?rt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[rt.cssProps[t.prop]]||rt.cssHooks[t.prop])?rt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},rt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},rt.fx=R.prototype.init,rt.fx.step={};var te,ee,ne=/^(?:toggle|show|hide)$/,re=new RegExp("^(?:([+-])=|)("+Mt+")([a-z%]*)$","i"),ie=/queueHooks$/,oe=[P],ae={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=re.exec(e),o=i&&i[3]||(rt.cssNumber[t]?"":"px"),a=(rt.cssNumber[t]||"px"!==o&&+r)&&re.exec(rt.css(n.elem,t)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,rt.style(n.elem,t,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};rt.Animation=rt.extend(D,{tweener:function(t,e){rt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],ae[n]=ae[n]||[],ae[n].unshift(e)},prefilter:function(t,e){e?oe.unshift(t):oe.push(t)}}),rt.speed=function(t,e,n){var r=t&&"object"==typeof t?rt.extend({},t):{complete:n||!n&&e||rt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!rt.isFunction(e)&&e};return r.duration=rt.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in rt.fx.speeds?rt.fx.speeds[r.duration]:rt.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){rt.isFunction(r.old)&&r.old.call(this),r.queue&&rt.dequeue(this,r.queue)},r},rt.fn.extend({fadeTo:function(t,e,n,r){return this.filter(kt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=rt.isEmptyObject(t),o=rt.speed(e,n,r),a=function(){var e=D(this,rt.extend({},t),o);(i||xt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=rt.timers,a=xt.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ie.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&rt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=xt.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=rt.timers,a=r?r.length:0;for(n.finish=!0,rt.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),rt.each(["toggle","show","hide"],function(t,e){var n=rt.fn[e];rt.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(j(e,!0),t,r,i)}}),rt.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){rt.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),rt.timers=[],rt.fx.tick=function(){var t,e=0,n=rt.timers;for(te=rt.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||rt.fx.stop(),te=void 0},rt.fx.timer=function(t){rt.timers.push(t),t()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){ee||(ee=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(ee),ee=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(t,e){return t=rt.fx?rt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=et.createElement("input"),e=et.createElement("select"),n=e.appendChild(et.createElement("option"));t.type="checkbox",tt.checkOn=""!==t.value,tt.optSelected=n.selected,e.disabled=!0,tt.optDisabled=!n.disabled,t=et.createElement("input"),t.value="t",t.type="radio",tt.radioValue="t"===t.value}();var se,ue,ce=rt.expr.attrHandle;rt.fn.extend({attr:function(t,e){return wt(this,rt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){rt.removeAttr(this,t)})}}),rt.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Ct?rt.prop(t,e,n):(1===o&&rt.isXMLDoc(t)||(e=e.toLowerCase(),r=rt.attrHooks[e]||(rt.expr.match.bool.test(e)?ue:se)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=rt.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void rt.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(mt);if(o&&1===t.nodeType)for(;n=o[i++];)r=rt.propFix[n]||n,rt.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!tt.radioValue&&"radio"===e&&rt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),ue={set:function(t,e,n){return e===!1?rt.removeAttr(t,n):t.setAttribute(n,n),n}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ce[e]||rt.find.attr;ce[e]=function(t,e,r){var i,o;return r||(o=ce[e],ce[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,ce[e]=o),i}});var le=/^(?:input|select|textarea|button)$/i;rt.fn.extend({prop:function(t,e){return wt(this,rt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[rt.propFix[t]||t]})}}),rt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!rt.isXMLDoc(t),o&&(e=rt.propFix[e]||e,i=rt.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||le.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),tt.optSelected||(rt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this});var fe=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(t){var e,n,r,i,o,a,s="string"==typeof t&&t,u=0,c=this.length;if(rt.isFunction(t))return this.each(function(e){rt(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(mt)||[];c>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(fe," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=rt.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0===arguments.length||"string"==typeof t&&t,u=0,c=this.length;if(rt.isFunction(t))return this.each(function(e){rt(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(mt)||[];c>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(fe," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=t?rt.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):rt.isFunction(t)?this.each(function(n){rt(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,r=0,i=rt(this),o=t.match(mt)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===Ct||"boolean"===n)&&(this.className&&xt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":xt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(fe," ").indexOf(e)>=0)return!0;return!1}});var he=/\r/g;rt.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=rt.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,rt(this).val()):t,null==i?i="":"number"==typeof i?i+="":rt.isArray(i)&&(i=rt.map(i,function(t){return null==t?"":t+""})),e=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=rt.valHooks[i.type]||rt.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(he,""):null==n?"":n)}}}),rt.extend({valHooks:{option:{get:function(t){var e=rt.find.attr(t,"value");return null!=e?e:rt.trim(rt.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],(n.selected||u===i)&&(tt.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!rt.nodeName(n.parentNode,"optgroup"))){if(e=rt(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=rt.makeArray(e),a=i.length;a--;)r=i[a],(r.selected=rt.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(t,e){return rt.isArray(e)?t.checked=rt.inArray(rt(t).val(),e)>=0:void 0}},tt.checkOn||(rt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){rt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),rt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var pe=rt.now(),de=/\?/;rt.parseJSON=function(t){return JSON.parse(t+"")},rt.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&rt.error("Invalid XML: "+t),e};var ge=/#.*$/,ve=/([?&])_=[^&]*/,me=/^(.*?):[ \t]*([^\r\n]*)$/gm,ye=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,be=/^(?:GET|HEAD)$/,we=/^\/\//,xe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,_e={},Ee={},Se="*/".concat("*"),Me=n.location.href,Te=xe.exec(Me.toLowerCase())||[];rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Me,type:"GET",isLocal:ye.test(Te[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Se,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,rt.ajaxSettings),e):B(rt.ajaxSettings,t)},ajaxPrefilter:U(_e),ajaxTransport:U(Ee),ajax:function(t,e){function n(t,e,n,a){var u,l,m,y,w,_=e;2!==b&&(b=2,s&&clearTimeout(s),r=void 0,o=a||"",x.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&(y=z(f,x,n)),y=H(f,y,x,u),u?(f.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(rt.lastModified[i]=w),w=x.getResponseHeader("etag"),w&&(rt.etag[i]=w)),204===t||"HEAD"===f.type?_="nocontent":304===t?_="notmodified":(_=y.state,l=y.data,m=y.error,u=!m)):(m=_,(t||!_)&&(_="error",0>t&&(t=0))),x.status=t,x.statusText=(e||_)+"",u?d.resolveWith(h,[l,_,x]):d.rejectWith(h,[x,_,m]),x.statusCode(v),v=void 0,c&&p.trigger(u?"ajaxSuccess":"ajaxError",[x,f,u?l:m]),g.fireWith(h,[x,_]),c&&(p.trigger("ajaxComplete",[x,f]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,a,s,u,c,l,f=rt.ajaxSetup({},e),h=f.context||f,p=f.context&&(h.nodeType||h.jquery)?rt(h):rt.event,d=rt.Deferred(),g=rt.Callbacks("once memory"),v=f.statusCode||{},m={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!a)for(a={};e=me.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,m[t]=e),this},overrideMimeType:function(t){return b||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return r&&r.abort(e),n(0,e),this}};if(d.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,f.url=((t||f.url||Me)+"").replace(ge,"").replace(we,Te[1]+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=rt.trim(f.dataType||"*").toLowerCase().match(mt)||[""],null==f.crossDomain&&(u=xe.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===Te[1]&&u[2]===Te[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Te[3]||("http:"===Te[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=rt.param(f.data,f.traditional)),F(_e,f,e,x),2===b)return x;c=rt.event&&f.global,c&&0===rt.active++&&rt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!be.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(de.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=ve.test(i)?i.replace(ve,"$1_="+pe++):i+(de.test(i)?"&":"?")+"_="+pe++)),f.ifModified&&(rt.lastModified[i]&&x.setRequestHeader("If-Modified-Since",rt.lastModified[i]),rt.etag[i]&&x.setRequestHeader("If-None-Match",rt.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Se+"; q=0.01":""):f.accepts["*"]);for(l in f.headers)x.setRequestHeader(l,f.headers[l]);if(f.beforeSend&&(f.beforeSend.call(h,x,f)===!1||2===b))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](f[l]);if(r=F(Ee,f,e,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},f.timeout));try{b=1,r.send(m,n)}catch(_){if(!(2>b))throw _;n(-1,_)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return rt.get(t,e,n,"json")},getScript:function(t,e){return rt.get(t,void 0,e,"script")}}),rt.each(["get","post"],function(t,e){rt[e]=function(t,n,r,i){return rt.isFunction(n)&&(i=i||r,r=n,n=void 0),rt.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),rt._evalUrl=function(t){return rt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(t){var e;return rt.isFunction(t)?this.each(function(e){rt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=rt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return rt.isFunction(t)?this.each(function(e){rt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=rt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=rt.isFunction(t);return this.each(function(n){rt(this).wrapAll(e?t.call(this,n):t);
})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},rt.expr.filters.visible=function(t){return!rt.expr.filters.hidden(t)};var ke=/%20/g,Ae=/\[\]$/,Ce=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Le=/^(?:input|select|textarea|keygen)/i;rt.param=function(t,e){var n,r=[],i=function(t,e){e=rt.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(t)||t.jquery&&!rt.isPlainObject(t))rt.each(t,function(){i(this.name,this.value)});else for(n in t)V(n,t[n],e,i);return r.join("&").replace(ke,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=rt.prop(this,"elements");return t?rt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!rt(this).is(":disabled")&&Le.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!At.test(t))}).map(function(t,e){var n=rt(this).val();return null==n?null:rt.isArray(n)?rt.map(n,function(t){return{name:e.name,value:t.replace(Ce,"\r\n")}}):{name:e.name,value:n.replace(Ce,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Re=0,Oe={},je={0:200,1223:204},Ie=rt.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var t in Oe)Oe[t]()}),tt.cors=!!Ie&&"withCredentials"in Ie,tt.ajax=Ie=!!Ie,rt.ajaxTransport(function(t){var e;return tt.cors||Ie&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),a=++Re;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete Oe[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(je[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Oe[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}:void 0}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return rt.globalEval(t),t}}}),rt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),rt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=rt("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),et.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Pe=[],qe=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pe.pop()||rt.expando+"_"+pe++;return this[t]=!0,t}}),rt.ajaxPrefilter("json jsonp",function(t,e,r){var i,o,a,s=t.jsonp!==!1&&(qe.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qe.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=rt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(qe,"$1"+i):t.jsonp!==!1&&(t.url+=(de.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||rt.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){n[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Pe.push(i)),a&&rt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),rt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||et;var r=lt.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=rt.buildFragment([t],e,i),i&&i.length&&rt(i).remove(),rt.merge([],r.childNodes))};var De=rt.fn.load;rt.fn.load=function(t,e,n){if("string"!=typeof t&&De)return De.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>=0&&(r=rt.trim(t.slice(s)),t=t.slice(0,s)),rt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&rt.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?rt("<div>").append(rt.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){rt.fn[e]=function(t){return this.on(e,t)}}),rt.expr.filters.animated=function(t){return rt.grep(rt.timers,function(e){return t===e.elem}).length};var Ue=n.document.documentElement;rt.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,c,l=rt.css(t,"position"),f=rt(t),h={};"static"===l&&(t.style.position="relative"),s=f.offset(),o=rt.css(t,"top"),u=rt.css(t,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),rt.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):f.css(h)}},rt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){rt.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,rt.contains(e,r)?(typeof r.getBoundingClientRect!==Ct&&(i=r.getBoundingClientRect()),n=Y(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===rt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),rt.nodeName(t[0],"html")||(r=t.offset()),r.top+=rt.css(t[0],"borderTopWidth",!0),r.left+=rt.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-rt.css(n,"marginTop",!0),left:e.left-r.left-rt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ue;t&&!rt.nodeName(t,"html")&&"static"===rt.css(t,"position");)t=t.offsetParent;return t||Ue})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var r="pageYOffset"===e;rt.fn[t]=function(i){return wt(this,function(t,i,o){var a=Y(t);return void 0===o?a?a[e]:t[i]:void(a?a.scrollTo(r?n.pageXOffset:o,r?o:n.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),rt.each(["top","left"],function(t,e){rt.cssHooks[e]=T(tt.pixelPosition,function(t,n){return n?(n=M(t,e),Wt.test(n)?rt(t).position()[e]+"px":n):void 0})}),rt.each({Height:"height",Width:"width"},function(t,e){rt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){rt.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return wt(this,function(e,n,r){var i;return rt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?rt.css(e,n,a):rt.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,r=[],i=function(){return rt}.apply(e,r),!(void 0!==i&&(t.exports=i));var Fe=n.jQuery,Be=n.$;return rt.noConflict=function(t){return n.$===rt&&(n.$=Be),t&&n.jQuery===rt&&(n.jQuery=Fe),rt},typeof o===Ct&&(n.jQuery=n.$=rt),rt})},function(t,e,n){e=t.exports=n(21)(),e.push([t.id,"svg{overflow:hidden}.up_pftv_buttons{display:inline-block;padding:0 .5em;width:180px;text-align:left;vertical-align:bottom;position:relative}.up_pftv_buttons span{cursor:pointer;font-size:16px}.bottom-aa-container{padding-left:195px}.up_pftv_category-container{position:relative;border-right:2px solid #b2f5ff;border-top:1px solid #b2f5ff}.up_pftv_category-container svg{cursor:move}.up_pftv_container{position:relative;width:960px;color:#3c4043;font-family:Gill Sans,Gill Sans MT,Calibri,sans-serif;font-weight:300;font-size:16px;line-height:1.5}.up_pftv_navruler{margin-left:195px}.up_pftv_navruler svg{vertical-align:bottom;font-size:14px;background-color:#fdf7ef}.up_pftv_category{margin-bottom:.1em;border-bottom:.1em solid #b2f5ff}.up_pftv_category-name,.up_pftv_track-header{display:inline-block;width:180px;vertical-align:bottom;padding:.485em;text-transform:capitalize;border:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.up_pftv_category-name{background-color:#b2f5ff;cursor:pointer}.up_pftv_category a:hover{background-color:#80eeff;border-bottom:none;text-decoration:none}.up_pftv_track-header{background-color:#d9faff}.up_pftv_aaviewer,.up_pftv_category-viewer,.up_pftv_track{position:relative;display:inline-block;vertical-align:bottom;width:760px}.up_pftv_aaviewer svg,.up_pftv_category-viewer svg,.up_pftv_track svg{vertical-align:bottom}.up_pftv_track-header-container{vertical-align:top;margin-top:1px}.up_pftv_track{border-top:1px solid #b2f5ff}.up_pftv_category-name.up_pftv_arrow-right:before{content:' ';display:inline-block;width:0;height:0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:5px solid #333;margin-right:5px}.up_pftv_category-name.up_pftv_arrow-down:before{content:' ';display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #333;margin-right:5px}.up_pftv_category-disabled{opacity:0;display:none}.up_pftv_navruler .axis{font-size:12px}.up_pftv_navruler line,.up_pftv_navruler path{fill:none;stroke:#000}.up_pftv_navruler .up_pftv_viewport{fill:grey;fill-opacity:.2}.up_pftv_navruler path.up_pftv_trapezoid{fill:grey;fill-opacity:.2;stroke:none}.up_pftv_amino_acid_selector,.up_pftv_shadow{fill:#ffe999;fill-opacity:1}.up_pftv_navruler .handle{fill:#666;fill-opacity:.8;stroke:#000;stroke-width:1px}.up_pftv_navruler .handle:hover{fill-opacity:1}.up_pftv_aaviewer text{font-family:Lucida Console,Monaco,monospace;font-size:12px}.up_pftv_feature{cursor:pointer;fill-opacity:.6}.up_pftv_feature:hover{fill-opacity:.9}.up_pftv_activeFeature{fill-opacity:.9!important}.up_pftv_variation-chart .up_pftv_block-area{fill:#d3d3d3;stroke:none}.up_pftv_variation-chart .up_pftv_block-area:hover{fill:#2f4f4f;cursor:pointer}.up_pftv_variation-chart .up_pftv_line{fill:none;stroke:#a9a9a9;stroke-width:1px}.up_pftv_variation-chart .up_pftv_line:hover,.up_pftv_variation-chart .up_pftv_line:hover+.up_pftv_block-area{stroke:#2f4f4f;cursor:pointer}.up_pftv_dialog-container,.up_pftv_popupDialog-container{font-family:Gill Sans,Gill Sans MT,Calibri,sans-serif;font-weight:lighter;font-size:.9em}.up_pftv_indentedCheck{padding-left:1.2em;font-size:.85em}.up_pftv_dialog-legend{padding:.5em .5em .1em 0}.up_pftv_legend,.up_pftv_legendRect,.up_pftv_legendTitle{height:15px}.up_pftv_legendRect{display:inline-block;vertical-align:middle;width:10px}.up_pftv_legendTitle{display:inline-block;vertical-align:text-bottom;padding-left:.2em;font-size:.76em}.up_pftv_tooltip-close{font-family:Arial,sans-serif;color:#fff;background-color:#333;position:absolute;top:-10px;right:-10px;cursor:pointer;border-radius:20px;width:20px;height:20px;font-size:14px!important;text-align:center;border:1px solid #fff}.up_pftv_popupDialog-container,.up_pftv_tooltip-container{z-index:50000;position:absolute;opacity:0;display:none}.up_pftv_popupDialog-container{border:1px solid #000;background-color:#fff;padding:.5em;min-width:210px}.up_pftv_tooltip-container table{font-weight:lighter;font-size:.9em;border:2px solid #ccc;border-spacing:0;border-collapse:collapse;background-color:#fff;box-shadow:5px 5px 2px 0 rgba(0,0,0,.1)}.up_pftv_tooltip-container table th{text-transform:capitalize;white-space:nowrap;letter-spacing:.05em;font-weight:lighter;font-size:1.1em;background-color:#333;line-height:2em;padding:0 .7em;color:#fff}.up_pftv_tooltip-container table td{padding:.4em;margin:0;border:1px solid #ccc}.up_pftv_tooltip-container td:first-child{font-weight:400}.up_pftv_tooltip-container .up_pftv_evidence-col{background-color:#e8e8e8}.up_pftv_tooltip-container .up_pftv_evidence-source{background-color:#f0f0f0}.up_pftv_tooltip-container .up_pftv_evidence-source td:first-child{text-align:right;font-weight:lighter}svg .up_pftv_chain{stroke:#c93;fill:#c93}svg .up_pftv_transit{stroke:#096;fill:#096}svg .up_pftv_init_met{stroke:#963;fill:#963}svg .up_pftv_propep{stroke:#9cc;fill:#9cc}svg .up_pftv_peptide{stroke:#069;fill:#069}svg .up_pftv_signal{stroke:#c03;fill:#c03}svg .up_pftv_turn{stroke:#0571af;fill:#0571af}svg .up_pftv_strand{stroke:#fc0;fill:#fc0}svg .up_pftv_helix{stroke:#f06;fill:#f06}svg .up_pftv_crosslnk{stroke:#f60;fill:#f60}svg .up_pftv_disulfid{stroke:#23b14d;fill:#23b14d}svg .up_pftv_region{stroke:#b33e00;fill:#b33e00}svg .up_pftv_coiled{stroke:#069;fill:#069}svg .up_pftv_motif{stroke:#402060;fill:#402060}svg .up_pftv_repeat{stroke:#90f;fill:#90f}svg .up_pftv_ca_bind{stroke:#f39;fill:#f39}svg .up_pftv_dna_bind{stroke:#093;fill:#093}svg .up_pftv_domain{stroke:#99f;fill:#99f}svg .up_pftv_zn_fing{stroke:#906;fill:#906}svg .up_pftv_np_bind{stroke:#f90;fill:#f90}svg .up_pftv_metal{stroke:#090;fill:#090}svg .up_pftv_site{stroke:#603;fill:#603}svg .up_pftv_binding{stroke:#069;fill:#069}svg .up_pftv_act_site{stroke:#f66;fill:#f66}svg .up_pftv_mod_res{stroke:#006;fill:#006}svg .up_pftv_lipid{stroke:#9c3;fill:#9c3}svg .up_pftv_carbohyd{stroke:#c36;fill:#c36}svg .up_pftv_variant{stroke:#066;fill:#066}svg .up_pftv_compbias{stroke:#f36;fill:#f36}svg .up_pftv_mutagen{stroke:#f90;fill:#f90}svg .up_pftv_conflict{stroke:#63c;fill:#63c}svg .up_pftv_non_cons{stroke:#f03;fill:#f03}svg .up_pftv_non_ter{stroke:#393;fill:#393}svg .up_pftv_unsure{stroke:#3f0;fill:#3f0}svg .up_pftv_non_std{stroke:#306;fill:#306}svg .up_pftv_topo_dom{stroke:#c00;fill:#c00}svg .up_pftv_transmem{stroke:#c0c;fill:#c0c}svg .up_pftv_intramem{stroke:#00c;fill:#00c}svg .up_pftv_damaging{stroke:#d7191c;fill:#d7191c}svg .up_pftv_mixed{stroke:#fdae61;fill:#fdae61}svg .up_pftv_benign{stroke:#2c7bb6;fill:#2c7bb6}svg .up_pftv_no_prediction{stroke:#000;fill:#000}.up_pftv_variants-svg .axis path{display:none}.up_pftv_variants-svg .axis text{font-size:10px;font-family:Helvetica neue,Helvetica,Arial,sans-serif}.up_pftv_variants-svg .variation-y.axis line{stroke:#ccc;opacity:.4}.up_pftv_variants-svg .variation-x.axis line{stroke:#000}.up_pftv_variants-svg circle.main-seq{fill:#fff;stroke:#4682b4;stroke-width:1.5px}.up_pftv_variants-svg .main-sequence{fill:green}.up_pftv_variants-svg circle{cursor:pointer;fill-opacity:.6}.up_pftv_variants-svg circle:hover{fill-opacity:.9}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){var r,r;(function(e,n,i){/*! imjs - v3.15.0 - 2015-10-14 */
!function(i){!function(e){t.exports=e()}(function(){var t;return function o(t,e,n){function i(s,u){if(!e[s]){if(!t[s]){var c="function"==typeof r&&r;if(!u&&c)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=e[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,o,t,e,n)}return e[s].exports}for(var a="function"==typeof r&&r,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],2:[function(n,r,o){(function(e){(function(){var o,a,s;n("./shiv"),r.exports=a=n("./service"),s=a.utils.merge,o=function(n,r){return"function"==typeof t&&t.amd?t(n,[],r):e[n]=r},o("imjs",a),"undefined"==typeof i?o("intermine",a):o("intermine",s(i,a))}).call(this)}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./service":10,"./shiv":12}],3:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,p,d,g,v,m,y,b,w;o=t("url"),r=t("JSONStream"),p=t("http"),e=t("./constants").ACCEPT_HEADER,u=t("./version").VERSION,w=b=t("./util"),f=w.error,l=w.defer,g=w.merge,d=w.invoke,s="node-http/imjs-"+u,i=/,\s*$/,a="application/x-www-form-urlencoded",n.supports=function(){return!0},y=function(t,e,n){return function(t){var i,o;return null==t.pipe?n(new Error("response is not a stream")):(t.on("error",n),null!=t.statusCode&&200!==t.statusCode?(i=r.parse("error"),i.pause(),t.pipe(i),n([t.statusCode,i])):(o=r.parse("results.*"),o.pause(),t.pipe(o),e(o)))}},h=function(t,e,n,r){var i,o;return i=t.type,o=t.url,"Could not parse response to "+i+" "+o+': "'+e+'" ('+r+": "+n+")"},c=function(t,e,n){return function(r){var i;return i="",r.on("data",function(t){return i+=t}),r.on("error",n),r.on("end",function(){var o,a,s,u,c,l,f;if(null!=(null!=r?r.headers:void 0)&&(o=r.headers["content-type"]),"application/json"!==o&&!/json/.test(t.dataType)&&!/json/.test(t.data.format))return(c=i.match(/\[ERROR\] (\d+)([\s\S]*)/))?n(new Error(c[2])):(u=200<=(f=r.statusCode)&&400>f?e:n)(i);if(""===i&&200===r.statusCode)return e();try{return l=JSON.parse(i),(s=l.error)?n(new Error(s)):e(l)}catch(p){return a=p,n(r.statusCode>=400?new Error(r.statusCode):new Error(h(t,i,a,r.statusCode)))}})}},n.iterReq=function(t,e,n){return function(r,i,o,a,s){var u,c,l,h,p;return null==i&&(i={}),null==o&&(o=function(){}),null==a&&(a=function(){}),null==s&&(s=function(){}),b.isFunction(i)&&(p=[{},i,o,a],i=p[0],o=p[1],a=p[2],s=p[3]),h=g({format:n},i,{query:r.toXML()}),u=function(t){return t.on("data",o),t.on("error",a),t.on("end",s),setTimeout(function(){return null!=t.resume?t.resume():void 0},3),t},l=function(t){var e,n;return n=t[0],e=t[1],e.on("data",a),e.on("error",a),e.on("end",s),null!=e.resume&&e.resume(),f(n)},c=this.makeRequest(t,e,h,null,!0),c.then(u,l),c}},m=function(t,e,n){var r;return r=setTimeout(function(){return e("Request timed out.")},t),n.then(function(){return cancelTimeout(r)})},v=function(t){var n,r,i,u,c,l,f,h;if(!t.url)throw new Error("No url provided in "+JSON.stringify(t));if("string"==typeof t.data){if(i=t.data,"GET"===(l=t.type)||"DELETE"===l)throw new Error("Invalid request. "+t.type+" requests must not have bodies")}else i=b.querystring(t.data);if(r=o.parse(t.url,!0),r.withCredentials=!1,r.method=t.type||"GET",null!=t.port&&(r.port=t.port),r.headers={"User-Agent":s,Accept:e[t.dataType]},("GET"===(f=r.method)||"DELETE"===f)&&(null!=i?i.length:void 0)?(u=/\?/.test(r.path)?"&":"?",r.path+=u+i,i=null):(r.headers["Content-Type"]=(t.contentType||a)+"; charset=UTF-8",r.headers["Content-Length"]=i.length),null!=t.headers){h=t.headers;for(n in h)c=h[n],r.headers[n]=c}return null!=t.auth&&(r.auth=t.auth),[r,i]},n.doReq=function(t,e){var n,r,i,o,a,s,u,f,h,d,g;d=l(),o=d.promise,u=d.resolve,a=d.reject,o.then(null,t.error);try{g=v(t),h=g[0],i=g[1],r=(e?y:c)(t,u,a),s=p.request(h,r),s.on("error",function(e){return a(new Error("Error: "+h.method+" "+t.url+": "+e))}),null!=i&&s.write(i),s.end(),f=t.timeout,f>0&&m(f,a,o)}catch(b){n=b,a(n)}return o}}).call(this)},{"./constants":1,"./util":15,"./version":16,JSONStream:18,http:52,url:49}],4:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,p,d,g,v={}.hasOwnProperty,m=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},y=function(t,e){return function(){return t.apply(e,arguments)}};l=t("./util"),p=n,d=l.uniqBy,u=l.difference,s=l.defer,g=l.withCB,h=l.id,f=l.get,c=l.fold,a=l.concatMap,o=6e4,e=function(){function t(t){var e,n;for(e in t)v.call(t,e)&&(n=t[e],this[e]=n)}var e;return t.prototype.getStats=function(t){return null!=t?this.stats[t]:this.stats},e=a(f("matches")),t.prototype.getMatches=function(t){var n;return"MATCH"===t?this.matches[t]:null!=(n=e(this.matches[t]))?n:[]},t.prototype.getMatchIds=function(t){return null!=t?this.getMatches(t).map(f("id")):this.allMatchIds()},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){var t;return(t=c(function(t){return function(e,n){return e.concat(t.getMatchIds(n))}}(this)))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},t}(),i=function(){function t(t){var e,n;for(e in t)v.call(t,e)&&(n=t[e],this[e]=n)}var e,n,r,i;return i=d(h),e=a(h),n=function(t){var n,r;return e(function(){var e,i;e=t.identifiers,i=[];for(n in e)r=e[n],i.push(r);return i}())},r=function(t,e){return null==e||m.call(n(t),e)>=0},t.prototype.getStats=function(t){switch(t){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},t.prototype.getIdentifierStats=function(){var t,n,r,o,a,s;return s=function(t){var n,r;return i(e(function(){var e,i,o;for(o=[],e=0,i=t.length;i>e;e++)r=t[e],o.push(function(){var t;t=[];for(n in null!=r?r.identifiers:void 0)t.push(n);return t}());return o}()))},o=s(this.getMatches("MATCH")),n=s(this.getMatches()),a=o.length,t=n.length,r=u(n,o).length,{matches:a,all:t,issues:r}},t.prototype.getObjectStats=function(){var t,e,r,i;return i=this.goodMatchIds().length,t=this.allMatchIds().length,e=function(){var t;t=[];for(h in this)v.call(this,h)&&(r=this[h],m.call(n(r),"MATCH")<0&&t.push(h));return t}.call(this).length,{matches:i,all:t,issues:e}},t.prototype.getMatches=function(t){var e,n;n=[];for(h in this)v.call(this,h)&&(e=this[h],r(e,t)&&n.push(e));return n},t.prototype.getMatchIds=function(t){var e,n;n=[];for(h in this)v.call(this,h)&&(e=this[h],r(e,t)&&n.push(h));return n},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){return this.getMatchIds()},t}(),r=function(){function t(t,e){this.uid=t,this.service=e,this.del=y(this.del,this),this.fetchResults=y(this.fetchResults,this),this.fetchErrorMessage=y(this.fetchErrorMessage,this),this.fetchStatus=y(this.fetchStatus,this)}return t.prototype.fetchStatus=function(t){return g(t,this.service.get("ids/"+this.uid+"/status").then(f("status")))},t.prototype.fetchErrorMessage=function(t){return g(t,this.service.get("ids/"+this.uid+"/status").then(f("message")))},t.prototype.fetchResults=function(t){var n,r;return n=this.service.get("ids/"+this.uid+"/result").then(f("results")),r=this.service.fetchVersion(),r.then(function(t){return n.then(function(n){return t>=16?new e(n):new i(n)})})},t.prototype.del=function(t){return g(t,this.service.makeRequest("DELETE","ids/"+this.uid))},t.prototype.decay=50,t.prototype.poll=function(t,e,n){var r,i,a,u,c,l,f;return f=s(),a=f.promise,c=f.resolve,u=f.reject,a.then(t,e),i=null!=n?n:function(){},l=this.fetchStatus(),l.then(null,u),r=this.decay,this.decay=Math.min(o,1.25*r),l.then(function(t){return function(e){switch(i(e),e){case"SUCCESS":return t.fetchResults().then(c,u);case"ERROR":return t.fetchErrorMessage().then(u,u);default:return setTimeout(function(){return t.poll(c,u,i)},r)}}}(this)),a},t}(),r.prototype.wait=r.prototype.poll,r.create=function(t){return function(e){return new r(e,t)}},p.IDResolutionJob=r,p.CategoryResults=e,p.IdResults=i}).call(this)},{"./util":15}],5:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,p,d,g,v,m=function(t,e){return function(){return t.apply(e,arguments)}},y={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};g=t("./util"),l=n,p=g.merge,v=g.withCB,u=g.get,f=g.invoke,i=g.REQUIRES_VERSION,d=g.set,s=g.dejoin,a="list/tags",o="lists/shares",e="lists/invitations",h=function(t){return"__folder__"===t.substr(0,t.indexOf(":"))},c=function(t){return t.substr(t.indexOf(":")+1)},r=function(){function t(t,e){var n,r;this.service=e,this._updateTags=m(this._updateTags,this),this.hasTag=m(this.hasTag,this);for(n in t)y.call(t,n)&&(r=t[n],this[n]=r);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(h).map(c)}var n;return t.prototype.hasTag=function(t){return b.call(this.tags,t)>=0},t.prototype.query=function(t){return null==t&&(t=["*"]),this.service.query({select:t,from:this.type,where:[[this.type,"IN",this.name]]})},t.prototype.del=function(t){return this.service.makeRequest("DELETE","lists",{name:this.name},t)},n=function(t){var e;return e=t.tags},t.prototype._updateTags=function(t,e){return null==t?(this.tags=e.slice(),this.folders=this.tags.filter(h).map(c)):void 0},t.prototype.fetchTags=function(t){return v(this._updateTags,t,this.service.makeRequest("GET","list/tags",{name:this.name}).then(n))},t.prototype.addTags=function(t,e){var r;return r={name:this.name,tags:t},v(this._updateTags,e,this.service.makeRequest("POST","list/tags",r).then(n))},t.prototype.removeTags=function(t,e){var r;return r={name:this.name,tags:t},v(this._updateTags,e,this.service.makeRequest("DELETE","list/tags",r).then(n))},t.prototype.contents=function(t){return v(t,this.query().then(s).then(f("records")))},t.prototype.rename=function(t,e){var n;return n=this.service.post("lists/rename",{oldname:this.name,newname:t}).then(u("listName")).then(function(t){return function(e){return t.name=e}}(this)).then(this.service.fetchList),v(e,n)},t.prototype.copy=function(t,e){var n,r,i,o,a,s,c;return null==t&&(t={}),null==e&&(e=function(){}),1===arguments.length&&g.isFunction(t)&&(a=[{},t],t=a[0],e=a[1]),"string"==typeof t&&(t={name:t}),r=n=null!=(s=t.name)?s:""+this.name+"_copy",o=this.tags.concat(null!=(c=t.tags)?c:[]),i=this.query(["id"]),v(e,this.service.fetchLists().then(f("map",u("name"))).then(function(t){return function(e){var a;for(a=1;b.call(e,r)>=0;)r=""+n+"-"+a++;return i.then(f("saveAsList",{name:r,tags:o,description:t.description}))}}(this)))},t.prototype.enrichment=function(t,e){return this.service.enrichment(p({list:this.name},t),e)},t.prototype.shareWithUser=function(t,e){return v(e,this.service.post(o,{list:this.name,"with":t}))},t.prototype.inviteUserToShare=function(t,n,r){return null==n&&(n=!0),null==r&&(r=function(){}),v(r,this.service.post(e,{list:this.name,to:t,notify:!!n}))},t}(),l.List=r}).call(this)},{"./util":15}],6:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h=function(t,e){return function(){return t.apply(e,arguments)}},p=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t("./table").Table,i=t("./path").PathInfo,f=t("./util"),u=f.flatten,s=f.find,a=f.error,l=f.omap,c=n,e=new o({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),r=function(){function t(t){var n,r;this.name=t.name,n=t.classes,this.findCommonType=h(this.findCommonType,this),this.findSharedAncestor=h(this.findSharedAncestor,this),this.getAncestorsOf=h(this.getAncestorsOf,this),this.getSubclassesOf=h(this.getSubclassesOf,this),this.getPathInfo=h(this.getPathInfo,this),r=l(function(t){return function(e,n){return[e,new o(n,t)]}}(this)),this.classes=r(n),this.classes["java.lang.Object"]=e}return t.prototype.getPathInfo=function(t,e){return i.parse(this,t,e)},t.prototype.getSubclassesOf=function(t){var e,n,r,i,o,a;if(n=t&&t.name?t:this.classes[t],null==n)throw new Error(""+t+" is not a table");r=[n.name],o=this.classes;for(i in o)e=o[i],a=n.name,p.call(e.parents(),a)>=0&&(r=r.concat(this.getSubclassesOf(e)));return r},t.prototype.getAncestorsOf=function(t){var e,n;if(e=t&&t.name?t:this.classes[t],null==e)throw new Error(""+t+" is not a table");return n=e.parents(),n.filter(function(t){return function(e){return t.classes[e]}}(this)).reduce(function(t){return function(e,n){return e.concat(t.getAncestorsOf(n))}}(this),n)},t.prototype.findSharedAncestor=function(t,e){var n,r,i;return null===e||null===t?null:t===e?t:(n=this.getAncestorsOf(t),p.call(n,e)>=0?e:(r=this.getAncestorsOf(e),p.call(r,t)>=0?t:i=s(n,function(t){return p.call(r,t)>=0})))},t.prototype.findCommonType=function(t){return null==t&&(t=[]),t.reduce(this.findSharedAncestor)},t}(),r.prototype.makePath=r.prototype.getPathInfo,r.prototype.findCommonTypeOfMultipleClasses=r.prototype.findCommonType,r.load=function(t){var e;try{return new r(t)}catch(n){throw e=n,new Error("Error loading model: "+e)}},r.INTEGRAL_TYPES=["int","Integer","long","Long"],r.FRACTIONAL_TYPES=["double","Double","float","Float"],r.NUMERIC_TYPES=r.INTEGRAL_TYPES.concat(r.FRACTIONAL_TYPES),r.BOOLEAN_TYPES=["boolean","Boolean"],c.Model=r}).call(this)},{"./path":7,"./table":13,"./util":15}],7:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,p,d,g,v=function(t,e){return function(){return t.apply(e,arguments)}},m=[].slice,y=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};l=n,d=t("./util"),g=d.withCB,a=d.concatMap,c=d.get,o=d.any,h=d.set,s=d.copy,p=d.success,u=d.error,e={},r={},f=function(t,e,n){var r,i,o;return""+(null!=t?t.name:void 0)+"|"+(null!=t&&null!=(o=t.service)?o.root:void 0)+"|"+e+":"+function(){var t;t=[];for(r in n)i=n[r],t.push(""+r+"="+i);return t}()},i=function(){function t(t){var e,n;this.root=t.root,this.model=t.model,this.descriptors=t.descriptors,this.subclasses=t.subclasses,this.displayName=t.displayName,this.ident=t.ident,this.allDescriptors=v(this.allDescriptors,this),this.getChildNodes=v(this.getChildNodes,this),this.getDisplayName=v(this.getDisplayName,this),this.isa=v(this.isa,this),this.append=v(this.append,this),this.getParent=v(this.getParent,this),this.getEndClass=v(this.getEndClass,this),this.containsCollection=v(this.containsCollection,this),this.isCollection=v(this.isCollection,this),this.isReverseReference=v(this.isReverseReference,this),this.isReference=v(this.isReference,this),this.isClass=v(this.isClass,this),this.isAttribute=v(this.isAttribute,this),this.isRoot=v(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?m.call(n,0,e=n.length-1):(e=0,[]),this.end=n[e++],null==this.ident&&(this.ident=f(this.model,this,this.subclasses))}return t.prototype.isRoot=function(){return 0===this.descriptors.length},t.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},t.prototype.isClass=function(){return this.isRoot()||this.isReference()},t.prototype.isReference=function(){var t;return null!=(null!=(t=this.end)?t.referencedType:void 0)},t.prototype.isReverseReference=function(){var t,e,n,r,i;return this.isReference()&&this.mid.length>0?(i=this.end,r=i.reverseReference,n=i.referencedType,e=this.getParent(),t=e.getParent(),null!=n&&t.isa(n)&&e.end.name===r):!1},t.prototype.isCollection=function(){var t,e;return null!=(t=null!=(e=this.end)?e.isCollection:void 0)?t:!1},t.prototype.containsCollection=function(){return o(this.descriptors,function(t){return t.isCollection})},t.prototype.getEndClass=function(){var t;return this.model.classes[this.subclasses[this.toString()]||(null!=(t=this.end)?t.referencedType:void 0)]||this.root},t.prototype.getParent=function(){var e;if(this.isRoot())throw new Error("Root paths do not have parents");return e={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new t(e)},t.prototype.append=function(e){var n,r;if(this.isAttribute())throw new Error(""+this+" is an attribute.");if(r="string"==typeof e?this.getType().fields[e]:e,null==r)throw new Error(""+e+" is not a field of "+this.getType());return n={root:this.root,model:this.model,descriptors:this.descriptors.concat([r]),subclasses:this.subclasses},new t(n)},t.prototype.isa=function(t){var e,n;return null==t?!1:this.isAttribute()?this.getType()===t:(e=t.name?t.name:""+t,n=this.getType(),e===n.name||y.call(this.model.getAncestorsOf(n),e)>=0)},t.prototype.getDisplayName=function(t){var n,r,i,o;return(r=this.displayName)?p(r):(null==this.namePromise&&(this.namePromise=(n=e[this.ident])?p(n):this.isRoot()&&this.root.displayName?p(this.root.displayName):null==this.model.service?u("No service"):(o="model"+a(function(t){return"/"+t.name})(this.allDescriptors()),i=h({format:"json"})(s(this.subclasses)),this.model.service.get(o,i).then(c("display")).then(function(t){return function(n){var r;return null!=e[r=t.ident]?e[r]:e[r]=n}}(this)))),g(t,this.namePromise))},t.prototype.getChildNodes=function(){var t,e,n,r,i;r=(null!=(n=this.getEndClass())?n.fields:void 0)||{},i=[];for(e in r)t=r[e],i.push(this.append(t));return i},t.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},t.prototype.toString=function(){return this.allDescriptors().map(c("name")).join(".")},t.prototype.equals=function(t){return this===t||this.ident&&(null!=t?t.ident:void 0)===this.ident},t.prototype.getType=function(){var t,e;return(null!=(t=this.end)&&null!=(e=t.type)?e.replace(/java\.lang\./,""):void 0)||this.getEndClass()},t}(),i.prototype.toPathString=i.prototype.toString,i.parse=function(t,e,n){var o,a,s,u,c,l,h,p,d;return null==n&&(n={}),c=f(t,e,n),(o=r[c])?o:(p=(e+"").split("."),d=a=t.classes[p.shift()],l=d.name,s=function(){var r,i,o,s;for(s=[],r=0,i=p.length;i>r;r++){if(h=p[r],u=(null!=a?a.fields[h]:void 0)||(null!=(o=a=t.classes[n[l]])?o.fields[h]:void 0),!u)throw new Error("Could not find "+h+" in "+a+" when parsing "+e);l+="."+h,a=t.classes[u.type||u.referencedType],s.push(u)}return s}(),r[c]=new i({root:d,model:t,descriptors:s,subclasses:n,ident:c}))},i.flushCache=function(){return r={},e={}},l.PathInfo=i}).call(this)},{"./util":15}],8:[function(t,e,n){(function(){var n;n=t("es6-promise").Promise,e.exports=n}).call(this)},{"es6-promise":23}],9:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,p,d,g,v,m,y,b,w,x,_,E,S,M,T,k,A,C,N,L,R,O,j,I,P,q,D,U,F,B,z,H,V,Y,W,X,$,J,G,Z,K,Q=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},tt=function(t,e){return function(){return t.apply(e,arguments)}},et=[].slice,nt={}.hasOwnProperty;i=t("backbone-events-standalone"),k=n,k.xml=t("./xml"),V=t("./util"),s=V.REQUIRES_VERSION,Y=V.withCB,L=V.merge,w=V.filter,P=V.partition,x=V.fold,g=V.concatMap,M=V.id,_=V.get,N=V.invoke,B=V.querystring,E=function(t){var e;if(e=null!=(null!=t?t.toLowerCase:void 0)?a.OP_DICT[t.toLowerCase()]:null,!e)throw new Error("Illegal constraint operator: "+t);return e},e=["path","op","code"],c=e.concat(["value","extraValue"]),u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],o=function(t){return V.compose(t.fetchList,_("listName"))},r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],m=function(t){return null==t&&(t=""),t.substr(t.indexOf("."))},d=function(t){return null!=t?"<value>"+V.escape(t)+"</value>":"<nullValue/>"},f=function(t,e){var n,r;return function(){var i;i=[];for(n in t)r=t[n],Q.call(e,n)>=0&&i.push(""+n+'="'+V.escape(r)+'" ');return i}().join("")},I=function(t){return"<constraint "+f(t,e)+"/>"},z=function(t){return"<constraint "+f(t,["path","type"])+"/>"},D=function(t){return"<constraint "+f(t,c)+"/>"},O=function(t){return"<constraint "+f(t,e)+">"+g(d)(t.values)+"</constraint>"},T=function(t){return"<constraint "+f(t,e)+'ids="'+t.ids.join(",")+'"/>'},h=function(t){var e;return null!=t.values?O(t):null!=t.ids?T(t):null==t.op?z(t):(e=t.op,Q.call(a.NULL_OPS,e)>=0?I(t):D(t))},S=function(t){return t.replace(/^[^\.]+\./,"")},v=function(t){var e,n,r,i,o,a,s,u,c,l,f;return a=t.path,c=t.type,o=t.op,l=t.value,f=t.values,r=t.extraValue,i=t.ids,e=t.code,n=t.editable,u=t.switched,s=t.switchable,i=null!=i?i.slice():void 0,f=null!=f?f.slice():void 0,j({path:a,type:c,op:o,value:l,values:f,extraValue:r,ids:i,code:e,editable:n,switched:u,switchable:s})},p=function(t){var e;return e=v(t),e.path=S(e.path),e},j=function(t){var e,n;for(e in t)n=t[e],null==n&&delete t[e];return t},y=function(t,e){return"Did not remove a single constraint. original = "+t+", reduced = "+e},C=function(t,e){var n,r,i,o,s,u,c;if(n={path:t},null===e)n.op="IS NULL";else if(V.isArray(e))n.op="ONE OF",n.values=e;else if("string"==(u=typeof e)||"number"===u||"boolean"===u)c="function"==typeof e.toUpperCase?e.toUpperCase():void 0,Q.call(a.NULL_OPS,c)>=0?n.op=e:(n.op="=",n.value=e);else if(i=function(){var t;t=[];for(r in e)s=e[r],t.push(r);return t}(),Q.call(i,"isa")>=0)V.isArray(e.isa)?(n.op=r,n.values=e.isa):n.type=e.isa;else{Q.call(i,"extraValue")>=0&&(n.extraValue=e.extraValue);for(r in e)o=e[r],"extraValue"!==r&&(n.op=r,V.isArray(o)?n.values=o:n.value=o)}return n},A=function(t){var e,n,r,i;return t=t.slice(),n={path:t.shift()},1===t.length?(e=t[0],i="function"==typeof e.toUpperCase?e.toUpperCase():void 0,Q.call(a.NULL_OPS,i)>=0?n.op=e:n.type=e):t.length>=2&&(n.op=t[0],r=t[1],V.isArray(r)?n.values=r:n.value=r,3===t.length&&(n.extraValue=t[2])),n},F=function(t){var e;return function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(""+e.path+" "+e.direction);return i}().join(" ")},U=function(t){var e,n,r,i,o,a,s;if(null==t)return[];for(n=t.split(/\s+/),r=function(){var t,e,r;for(r=[],i=t=0,e=n.length/2;e>=0?e>t:t>e;i=e>=0?++t:--t)r.push(2*i);return r}(),s=[],o=0,a=r.length;a>o;o++)e=r[o],s.push([n[e],n[e+1]]);return s},q=function(){var t,e;return e=this.sortOrder,this.sortOrder=function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],this.isRelevant(t.path)&&i.push(t);return i}.call(this),e.length!==this.sortOrder.length?this.trigger("change:sortorder change:orderby",this.sortOrder.slice()):void 0},a=function(){function t(t,e,n){var r,i,o,a,s,u,c,l,f,h,p,d,g,v,m,y;for(u=null!=n?n:{},r=u.model,o=u.summaryFields,this.addConstraint=tt(this.addConstraint,this),this.expandStar=tt(this.expandStar,this),this.adjustPath=tt(this.adjustPath,this),this.select=tt(this.select,this),null==t&&(t={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=V.copy(null!=(c=null!=(f=t.displayNames)?f:t.aliases)?c:{}),h=["name","title","comment","description","type"],a=0,s=h.length;s>a;a++)i=h[a],null!=t[i]&&(this[i]=t[i]);this.service=null!=e?e:{},this.model=null!=(p=null!=r?r:t.model)?p:{},this.summaryFields=null!=(d=null!=o?o:t.summaryFields)?d:{},this.root=null!=(g=t.root)?g:t.from,this.maxRows=null!=(v=null!=(m=t.size)?m:t.limit)?v:t.maxRows,this.start=null!=(y=null!=(l=t.start)?l:t.offset)?y:0,this.select(t.views||t.view||t.select||[]),this.addConstraints(t.constraints||t.where||[]),this.addJoins(t.joins||t.join||[]),this.orderBy(t.sortOrder||t.orderBy||[]),null!=t.constraintLogic&&(this.constraintLogic=t.constraintLogic),this.on("change:views",q,this)}var e,n,i,a,u,c,l,d,b;return t.JOIN_STYLES=["INNER","OUTER"],t.BIO_FORMATS=["gff3","fasta","bed"],t.NULL_OPS=["IS NULL","IS NOT NULL"],t.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],t.MULTIVALUE_OPS=["ONE OF","NONE OF"],t.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],t.TERNARY_OPS=["LOOKUP"],t.LOOP_OPS=["=","!="],t.LIST_OPS=["IN","NOT IN"],t.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},u=["name","view","sortOrder","constraintLogic","title","description","comment"],n=["path","type","op","code","value","ids"],l=function(t,e){var n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],t.hasAttribute(n)&&o.push([n,t.getAttribute(n)]);return o},i=function(t,e){var n,r,i,o,a;for(o=t.getElementsByTagName(e),a=[],r=0,i=o.length;i>r;r++)n=o[r],a.push(n);return a},b=function(t){return function(e){return e.getAttribute(t)}},t.fromXML=function(t){var e,r,o,a,s,c,f;if(r=k.xml.parse(t),c=i(r,"query")[0]||i(r,"template")[0],!c)throw new Error("no query in xml");return a=b("path"),f=b("style"),s=V.pairsToObj(l(c,u)),s.view=s.view.split(/\s+/),s.sortOrder=U(s.sortOrder),s.joins=function(){var t,e,n,r;for(n=i(c,"join"),r=[],t=0,e=n.length;e>t;t++)o=n[t],"OUTER"===f(o)&&r.push(a(o));return r}(),s.constraints=function(){var t,r,o,a;for(o=i(c,"constraint"),a=[],t=0,r=o.length;r>t;t++)e=o[t],a.push(function(t){var e,r,o,a,s;return e=V.pairsToObj(l(t,n)),null!=e.ids&&(e.ids=function(){var t,n,r,i;for(r=e.ids.split(","),i=[],t=0,n=r.length;n>t;t++)s=r[t],i.push(parseInt(s,10));return i}()),a=i(t,"value"),a.length&&(e.values=function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)o=a[t],n.push(function(){var t,e,n,i;for(n=o.childNodes,i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push(r.data);return i}().join(""));return n}()),e}(e));return a}(),s},t.prototype.constraints=[],t.prototype.views=[],t.prototype.joins={},t.prototype.constraintLogic="",t.prototype.sortOrder="",t.prototype.name=null,t.prototype.title=null,t.prototype.comment=null,t.prototype.description=null,t.prototype.removeFromSelect=function(t){var e,n,r,i;return null==t&&(t=[]),t=V.stringList(t),e=V.compose(this.expandStar,this.adjustPath),t=V.flatten(function(){var n,i,o;for(o=[],n=0,i=t.length;i>n;n++)r=t[n],o.push(e(r));return o}()),this.sortOrder=function(){var e,r,i,o,a;for(i=this.sortOrder,a=[],e=0,r=i.length;r>e;e++)n=i[e],o=n.path,Q.call(t,o)>=0||a.push(n);return a}.call(this),this.views=function(){var e,n,r,o;for(r=this.views,o=[],e=0,n=r.length;n>e;e++)i=r[e],Q.call(t,i)>=0||o.push(i);return o}.call(this),this.trigger("remove:view",t),this.trigger("change:views",this.views),this.trigger("change",this.views)},t.prototype.removeConstraint=function(t,e){var n,r,i,o;if(null==e&&(e=!1),i=this.constraints,r="string"==typeof t?function(e){return e.code===t}:function(e){var n,r;return e.path===t.path&&e.op===t.op&&e.value===t.value&&e.extraValue===t.extraValue&&t.type===e.type&&(null!=(n=e.values)?n.join("%%"):void 0)===(null!=(r=t.values)?r.join("%%"):void 0)},o=function(){var t,e,o;for(o=[],t=0,e=i.length;e>t;t++)n=i[t],r(n)||o.push(n);return o}(),o.length!==i.length-1)throw new Error(y(i,o));return this.constraints=o,e?void 0:(this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",V.find(i,r)))},t.prototype.addToSelect=function(t,e){var n,r,i,o,a,s,u,c;if(null==t&&(t=[]),null==e&&(e={}),t=V.stringList(t),r=V.compose(this.expandStar,this.adjustPath),o=V.flatten(function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)a=t[e],i.push(r(a));return i}()),n=function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)i=o[t],Q.call(this.views,i)>=0&&n.push(i);return n}.call(this),n.length)throw new Error(""+n+" already in the select list");if(n=function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)i=o[t],function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)s=o[t],s===i&&n.push(s);return n}().length>1&&n.push(i);return n}(),n.length)throw new Error(""+n+" specified multiple times as arguments to addToSelect");return(u=this.views).push.apply(u,o),e.silent?e.events=(null!=(c=e.events)?c:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",o),this.trigger("change")),this},t.prototype.select=function(t,e){var n,r;r=this.views.slice();try{this.views=[],this.addToSelect(t,e)}catch(i){n=i,this.views=r,V.error(n)}return this},t.prototype.adjustPath=function(t){return t=t&&t.name?t.name:""+t,null!=this.root?t.match("^"+this.root)||(t=this.root+"."+t):this.root=t.split(".")[0],t},t.prototype.getPossiblePaths=function(t,e,n){var r,i,o,a,s;return null==t&&(t=3),null==e&&(e=!0),null==n&&(n=null),a="string"==typeof n?function(t){return t[n]()}:n,r=function(t){return function(n,i){var o,a,s,u,c,l;return c=t.getPathInfo(n),!e&&c.isReverseReference()?[]:c.isAttribute()?[c]:(o=c.getType(),l=g(function(t){return r(""+n+"."+t.name,i-1)}),u=o&&i>0?l(function(){var t,e;t=o.fields,e=[];for(s in t)a=t[s],e.push(a);return e}()):[],[c].concat(u))}}(this),i=""+t+"-"+e,null==this._possiblePaths&&(this._possiblePaths={}),o=(null!=(s=this._possiblePaths)[i]?s[i]:s[i]=r(this.root,t)).slice(),null!=a?o.filter(a):o},t.prototype.getPathInfo=function(t){var e,n,r;return e=this.adjustPath(t),n=null!=(r=this.model)&&"function"==typeof r.getPathInfo?r.getPathInfo(e,this.getSubclasses()):void 0,n&&e in this.displayNames&&(n.displayName=this.displayNames[e]),n},t.prototype.makePath=t.prototype.getPathInfo,d=function(t){return[t.path,t.type]},c=V.compose(V.pairsToObj,V.map(d),w(_("type"))),t.prototype.getSubclasses=function(){return c(this.constraints)},t.prototype.getType=function(t){return this.getPathInfo(t).getType()},t.prototype.getViewNodes=function(){var t,e;return e=function(t){return function(e){return t.getPathInfo(e).getParent()}}(this),V.uniqBy(String,function(){var n,r,i,o;for(i=this.views,o=[],n=0,r=i.length;r>n;n++)t=i[n],o.push(e(t));return o}.call(this))},t.prototype.isInView=function(t){var e,n,r;if(e=this.getPathInfo(t),!e)throw new Error("Invalid path: "+t);return e.isAttribute()?(r=e.toString(),Q.call(this.views,r)>=0):(n=e.toString(),V.any(this.getViewNodes(),function(t){return t.toString()===n}))},t.prototype.isConstrained=function(t,e){var n,r;if(null==e&&(e=!1),n=this.getPathInfo(t),!n)throw new Error("Invalid path: "+t);return r=function(t){return null!=t.op&&t.path===n.toString()},!n.isAttribute()&&e&&(r=function(t){return function(e){return null!=e.op&&(e.path===n.toString()||n.equals(t.getPathInfo(e.path).getParent()))}}(this)),V.any(this.constraints,r)},t.prototype.canHaveMultipleValues=function(t){return this.getPathInfo(t).containsCollection()},t.prototype.getQueryNodes=function(){var t,e,n,r;return r=this.getViewNodes(),e=function(){var e,r,i,o;for(i=this.constraints,o=[],e=0,r=i.length;r>e;e++)t=i[e],null==t.type&&(n=this.getPathInfo(t.path),n.isAttribute()?o.push(n.getParent()):o.push(n));return o}.call(this),V.uniqBy(String,r.concat(e))},t.prototype.isInQuery=function(t){var e,n,r,i,o,a;if(n=this.getPathInfo(t)){for(r=n.toPathString(),a=this.views.concat(function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;n>t;t++)e=r[t],null==e.type&&i.push(e.path);return i}.call(this)),i=0,o=a.length;o>i;i++)if(t=a[i],0===t.indexOf(r))return!0;return!1}return!0},t.prototype.isRelevant=function(t){var e,n,r;return n=this.getPathInfo(t),n.isAttribute()&&(n=n.getParent()),r=n.toString(),e=this.getViewNodes(),
V.any(e,function(t){return t.toPathString()===r})},t.prototype.expandStar=function(t){var e,n,r,i,o,a,s,u;if(/\*$/.test(t))if(s=t.substr(0,t.lastIndexOf(".")),r=function(t){return s+t},n=this.getType(s),/\.\*$/.test(t)){if(n&&this.summaryFields[n.name])return i=V.compose(r,m),function(){var t,e,r,a;for(r=this.summaryFields[n.name],a=[],t=0,e=r.length;e>t;t++)o=r[t],this.hasView(o)||a.push(i(o));return a}.call(this)}else if(/\.\*\*$/.test(t))return u=this.expandStar(s+".*"),e=function(){var t;t=[];for(a in n.attributes)t.push(r("."+a));return t}(),V.uniqBy(M,u.concat(e));return t},t.prototype.isOuterJoin=function(t){return"OUTER"===this.joins[this.adjustPath(t)]},t.prototype.hasView=function(t){var e;return this.views&&(e=this.adjustPath(t),Q.call(this.views,e)>=0)},t.prototype.count=function(t){if(this.service.count)return this.service.count(this,t);throw new Error("This query has no service with count functionality attached.")},t.prototype.appendToList=function(t,e){var n,r,i,a,s;return(null!=t?t.name:void 0)?(n=t.name,s=function(e,n){return null==e?t.size=n.size:void 0}):(n=String(t),s=null),a=this.makeListQuery(),i={listName:n,query:a.toXML()},r=o(this.service),Y(s,e,this.service.post("query/append/tolist",i).then(r))},t.prototype.selectPreservingImpliedConstraints=function(t){var e,n,r,i,o;for(null==t&&(t=[]),n=this.clone(),n.select(t),o=this.getViewNodes(),r=0,i=o.length;i>r;r++)e=o[r],this.isOuterJoined(e)||n.isInView(e||n.isConstrained(e))||null==e.getEndClass().fields.id||n.addConstraint([e.append("id"),"IS NOT NULL"]);return n},t.prototype.makeListQuery=function(){var t,e;return t=this.views.slice(),1===t.length&&(null!=(e=t[0])?e.match(/\.id$/):void 0)||(t=["id"]),this.selectPreservingImpliedConstraints(t)},t.prototype.saveAsList=function(t,e){var n,r;return r=this.makeListQuery(),n=V.copy(t),n.listName=n.listName||n.name,n.query=r.toXML(),t.tags&&(n.tags=t.tags.join(";")),Y(e,this.service.post("query/tolist",n).then(o(this.service)))},t.prototype.summarise=function(t,e,n){return this.filterSummary(t,"",e,n)},t.prototype.summarize=function(){var t;return t=1<=arguments.length?et.call(arguments,0):[],this.summarise.apply(this,t)},a=function(t){var e,n,r,i,o,a,s;for(e=null!=(null!=(a=t.results[0])?a.max:void 0),s=t.results,i=0,o=s.length;o>i;i++)n=s[i],n.count=parseInt(n.count,10);return r={uniqueValues:t.uniqueValues,filteredCount:t.filteredCount},e&&(r=L(r,t.results[0])),t.stats=r,t},t.prototype.filterSummary=function(t,e,n,r){var i,o,s;return null==r&&(r=function(){}),V.isFunction(n)&&(s=[n,null],r=s[0],n=s[1]),t=this.adjustPath(t),o=this.clone(),Q.call(o.views,t)<0&&o.views.push(t),i={query:o.toXML(),summaryPath:t,format:"jsonrows"},n&&(i.size=n),e&&(i.filterTerm=e),Y(r,this.service.post("query/results",i).then(a))},t.prototype.clone=function(e){var n,r,i,o;if(n=new t(this,this.service),null==n._callbacks&&(n._callbacks={}),e){o=this._callbacks;for(r in o)nt.call(o,r)&&(i=o[r],n._callbacks[r]=i);n.off("change:views",q,this)}return n},t.prototype.next=function(){var t;return t=this.clone(),this.maxRows&&(t.start=this.start+this.maxRows),t},t.prototype.previous=function(){var t;return t=this.clone(),this.maxRows?t.start=this.start-this.maxRows:t.start=0,t},t.prototype.getSortDirection=function(t){var e,n;if(e=this.adjustPath(t),!this.isInQuery(e)&&!this.isRelevant(e))throw new Error(""+t+" is not in the query");return n=V.find(this.sortOrder,function(t){var n;return n=t.path,e===n}),null!=n?n.direction:void 0},t.prototype.isOuterJoined=function(t){var e,n,r;t=this.adjustPath(t),r=this.joins;for(n in r)if(e=r[n],"OUTER"===e&&0===t.indexOf(n))return!0;return!1},t.prototype.getOuterJoin=function(t){var e,n;return t=this.adjustPath(t),e=function(){var t;t=[];for(n in this.joins)t.push(n);return t}.call(this).sort(function(t,e){return e.length-t.length}),V.find(e,function(e){return function(n){return"OUTER"===e.joins[n]&&0===t.indexOf(n)}}(this))},t.prototype._parse_sort_order=function(t){var e,n,r,i,o,a;if(null==t)throw new Error("No input");if("string"==typeof t)i={path:t,direction:"ASC"};else if(V.isArray(t))r=t[0],e=t[1],i={path:r,direction:e};else if(null==t.path){for(n in t)o=t[n],a=[n,o],r=a[0],e=a[1];i={path:r,direction:e}}else r=t.path,e=t.direction,i={path:r,direction:e};return i.path=this.adjustPath(i.path),null==i.direction&&(i.direction="ASC"),i.direction=i.direction.toUpperCase(),i},t.prototype.addOrSetSortOrder=function(t){var e,n;return t=this._parse_sort_order(t),e=this.getSortDirection(t.path),null==e?this.addSortOrder(t):e!==t.direction&&(n=V.find(this.sortOrder,function(e){var n;return n=e.path,n===t.path}),n.direction=t.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},t.prototype.addSortOrder=function(t,e){var n;return n=(null!=e?e:{}).silent,this.sortOrder.push(this._parse_sort_order(t)),n?void 0:(this.trigger("add:sortorder",t),this.trigger("change:sortorder",this.sortOrder),this.trigger("change"))},t.prototype.orderBy=function(t,e){var n,r,i,o,a,s,u,c;for(null==e&&(e={}),o=this.sortOrder.slice(),this.sortOrder=[],s=0,u=t.length;u>s;s++)i=t[s],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return n=function(){var t,e,n,i,o;for(n=this.sortOrder,o=[],t=0,e=n.length;e>t;t++)i=n[t],a=i.path,r=i.direction,o.push({path:a,direction:r});return o}.call(this),this.trigger("set:sortorder",n),F(o)!==this.getSorting()&&(e.silent?e.events=(null!=(c=e.events)?c:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},t.prototype.addJoins=function(t){var e,n,r,i,o,a,s;if(V.isArray(t)){for(a=[],i=0,o=t.length;o>i;i++)e=t[i],a.push(this.addJoin(e));return a}s=[];for(n in t)r=t[n],s.push(this.addJoin({path:n,style:r}));return s},t.prototype.addJoin=function(t){return"string"==typeof t&&(t={path:t,style:"OUTER"}),this.setJoinStyle(t.path,t.style)},t.prototype.setJoinStyle=function(e,n){if(null==n&&(n="OUTER"),e=this.adjustPath(e),n=n.toUpperCase(),Q.call(t.JOIN_STYLES,n)<0)throw new Error("Invalid join style: "+n);return this.joins[e]!==n&&(this.joins[e]=n,this.trigger("change:joins",{path:e,style:n}),this.trigger("change")),this},t.prototype.addConstraints=function(t,e){var n,r,i,o,a,s,u;if(null==e&&(e="and"),this.__silent__=!0,i=this.constraintLogic,V.isArray(t))for(s=0,u=t.length;u>s;s++)n=t[s],this.addConstraint(n,e);else{a=function(t){return function(n,r){return t.addConstraint(C(n,r),e)}}(this);for(o in t)r=t[o],a(o,r)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},t.prototype.addConstraint=function(t,e){var n,i,o,a,s,u,c;if(null==e&&(e="and"),"and"!==e&&"or"!==e)throw new Error("Unknown logical conjunction: "+e);return t=V.isArray(t)?A(t):v(t),"OFF"===t.switched?this:(t.path=this.adjustPath(t.path),null==t.type&&(t.op=E(t.op)),this.constraints.push(t),o="or"===e||(null!=(c=this.constraintLogic)?c.length:void 0)>0,a=this.constraints.length,u=this.constraintLogic,o&&(s=2===a?""+r[0]+" "+e+" "+r[1]:(i=this.constraintLogic,i||(i=function(){var t,e,i;for(i=[],n=t=0,e=a-2;e>=0?e>=t:t>=e;n=e>=0?++t:--t)i.push(r[n]);return i}().join(" and ")),"("+i+") "+e+" "+r[a-1]),this.constraintLogic=s),this.__silent__||(this.trigger("add:constraint",t),this.trigger("change:constraints"),u!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},t.prototype.getSorting=function(){return F(this.sortOrder)},t.prototype.getConstraintXML=function(){var t,e;return e=function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;n>e;e++)t=r[e],(null==t.type||this.isInQuery(t.path))&&i.push(t);return i}.call(this),e.length?g(h)(g(M)(P(function(t){return null!=t.type})(e))):""},t.prototype.getJoinXML=function(){var t,e,n;return n=function(){var n,r;n=this.joins,r=[];for(t in n)e=n[t],this.isInQuery(t)&&"OUTER"===e&&r.push('<join path="'+t+'" style="OUTER"/>');return r}.call(this),n.join("")},t.prototype.toXML=function(){var t,e,n,r;return t={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(t.name=this.name),e=function(){var e;e=[];for(n in t)r=t[n],r&&e.push(n+'="'+r+'"');return e}().join(" "),"<query "+e+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},t.prototype.toJSON=function(){var t,e,n,r,i;return j({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var t,e,n,r;for(n=this.views,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(S(i));return r}.call(this),orderBy:function(){var t,r,i,o,a;for(i=this.sortOrder,a=[],t=0,r=i.length;r>t;t++)o=i[t],n=o.path,e=o.direction,a.push({path:S(n),direction:e});return a}.call(this),joins:function(){var t,e;t=this.joins,e=[];for(n in t)r=t[n],"OUTER"===r&&e.push(S(n));return e}.call(this),where:function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(p(t));return i}.call(this)})},t.prototype.fetchCode=function(t,e){var n;return n={query:this.toXML(),lang:t},Y(e,this.service.post("query/code",n).then(this.service.VERIFIER).then(_("code")))},t.prototype.setName=function(t){this.name=t},t.prototype.save=function(t,e){return s(this.service,16,function(n){return function(){var r,i;return V.isFunction(t)&&(i=[null,t],t=i[0],e=i[1]),null!=t&&n.setName(t),r={type:"PUT",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},Y(e,n.service.authorise(r)).then(function(t){return n.service.doReq(t)}).then(function(t){return t.queries})}}(this))},t.prototype.store=function(t,e){return s(this.service,16,function(n){return function(){var r,i,o,a;return V.isFunction(t)&&(a=[null,t],t=a[0],e=a[1]),null!=t&&n.setName(t),o=function(t,e){return null==t?n.setName(e):void 0},r=V.compose(_(n.name),_("queries")),i={type:"POST",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},Y(e,o,n.service.authorise(i)).then(function(t){return n.service.doReq(t)}).then(r)}}(this))},t.prototype.saveAsTemplate=function(t,e){return s(this.service,16,function(n){return function(){var r,i;if(V.isFunction(t)&&(i=[null,t],t=i[0],e=i[1]),null!=t&&n.setName(t),!n.name)throw new Error("Templates must have a name");return r={type:"POST",path:"templates",data:"<template "+f(n,["name","title","comment"])+">"+n.toXML()+"</template>",contentType:"application/xml",dataType:"json"},Y(e,n.service.authorise(r).then(function(t){return n.service.doReq(t)}))}}(this))},t.prototype.getCodeURI=function(t){var e,n;return e={query:this.toXML(),lang:t,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(e.token=this.service.token),""+this.service.root+"query/code?"+B(e)},t.prototype.getExportURI=function(e,n){var r,i;return null==e&&(e="tab"),null==n&&(n={}),Q.call(t.BIO_FORMATS,e)>=0?this["get"+e.toUpperCase()+"URI"](n):(r=L(n,{query:this.toXML(),format:e}),null!=(null!=(i=this.service)?i.token:void 0)&&(r.token=this.service.token),""+this.service.root+"query/results?"+B(r))},t.prototype.needsAuthentication=function(){return V.any(this.constraints,function(t){var e;return"NOT IN"===(e=t.op)||"IN"===e})},t.prototype.fetchQID=function(t){return Y(t,this.service.post("queries",{query:this.toXML()}).then(_("id")))},e=function(t){return t.append("primaryIdentifier").toString()},t.prototype.__bio_req=function(t,n){var r,i;return i=this.makeListQuery(),r=function(e){return V.any(t,function(t){return e.isa(t)})},i.views=V.take(n)(function(){var t,i,o,a;for(o=this.getViewNodes(),a=[],t=0,i=o.length;i>t;t++)n=o[t],r(n)&&a.push(e(n));return a}.call(this)),{query:i.toXML(),format:"text"}},t.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},t.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},t.prototype._bed_req=t.prototype._gff3_req,t}(),H=x(function(t,e){return t.concat(e)}),a.prototype.toString=a.prototype.toXML,a.ATTRIBUTE_OPS=H([a.ATTRIBUTE_VALUE_OPS,a.MULTIVALUE_OPS,a.NULL_OPS]),a.REFERENCE_OPS=H([a.TERNARY_OPS,a.LOOP_OPS,a.LIST_OPS]),l=function(t,e){return function(n,r){var i,o,a,s,u;return null==n&&(n={}),null==r&&(r=function(){}),V.isFunction(n)&&(u=[{},n],n=u[0],r=u[1]),i=function(t){return function(e){var n;return n=t.getPathInfo(e),n.isAttribute()?n:n.append("id")}}(this),null!=(null!=n?n.view:void 0)&&(n.view=function(){var t,e,r,i;for(r=n.view,i=[],t=0,e=r.length;e>t;t++)s=r[t],i.push(this.getPathInfo(s).toString());return i}.call(this)),o=null!=n["export"]?this.selectPreservingImpliedConstraints(n["export"].map(i)):this,a=L(o[t](),n),e.call(o,a,r)}},K=a.BIO_FORMATS,W=function(t){var e,n,r;return n="_"+t+"_req",e="get"+t.toUpperCase(),r=e+"URI",a.prototype[e]=l(n,function(e,n){return Y(n,this.service.post("query/results/"+t,e))}),a.prototype[r]=l(n,function(e,n){return null!=this.service.token&&(e.token=this.service.token),""+this.service.root+"query/results/"+t+"?"+B(e)})};for($=0,G=K.length;G>$;$++)b=K[$],W(b);for(X=function(t){return function(){var e,n,r,i;if(n=arguments[0],e=2<=arguments.length?et.call(arguments,1):[],this.service[t])return null==n?n={}:V.isFunction(n)&&(n={},e=function(){var t,e,n;for(n=[],t=0,e=arguments.length;e>t;t++)r=arguments[t],n.push(r);return n}.apply(this,arguments)),n=j(L({start:this.start,size:this.maxRows},n)),(i=this.service)[t].apply(i,[this,n].concat(et.call(e)));throw new Error("Service does not provide '"+t+"'.")}},J=0,Z=u.length;Z>J;J++)R=u[J],a.prototype[R]=X(R);i.mixin(a.prototype),a.prototype.emit=a.prototype.trigger,a.prototype.bind=a.prototype.on,k.Query=a}).call(this)},{"./util":15,"./xml":17,"backbone-events-standalone":22}],10:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,p,d,g,v,m,y,b,w,x,_,E,S,M,T,k,A,C,N,L,R,O,j,I,P,q,D,U,F,B,z,H,V,Y,W,X,$,J,G,Z,K,Q,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,ft,ht,pt,dt=function(t,e){return function(){return t.apply(e,arguments)}},gt={}.hasOwnProperty,vt=[].slice;for(E=t("./promise"),y=t("./model").Model,T=t("./query").Query,g=t("./lists").List,U=t("./user").User,l=t("./id-resolution-job").IDResolutionJob,ot=t("./version"),it=t("./util"),G=t("./http"),rt=it.querystring,at=it.withCB,K=it.map,Q=it.merge,$=it.get,et=it.set,Z=it.invoke,nt=it.success,X=it.error,C=it.REQUIRES_VERSION,W=it.dejoin,F={},r={},k={},v={},O={},H={},a="http://",B="version",P="templates",A="version/release",i="classkeys",h="lists",m="model",R="summaryfields",S="query/results",M="search",V="widgets",s="list/enrichment",Y="listswithobject",p={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},N="lists/subtract",z="user/whoami",I=S+"/tablerows",_="user/preferences",x="path/values",D="user/tokens",f="ids",w={},ht=[B,A,i,V,m,R,M,x],ut=0,lt=ht.length;lt>ut;ut++)tt=ht[ut],w[tt]=!0;for(e={},pt=[z,_,p,N,Y,s,P,D],ct=0,ft=pt.length;ft>ct;ct++)tt=pt[ct],e[tt]=!0;b=function(t,n){return w[t]?!1:e[t]?!0:(null!=n?n.needsAuthentication:void 0)?n.needsAuthentication():!0},u=/^https?:\/\//i,c=/service\/?$/i,L="/service/",o=function(t){var e,n;return(e=null!=(n=console.error)?n:console.log)(t)},st=function(t,e,n,r,i){var o,a,s,u,c;return s=this.root,u=this.useCache,a=null!=this[t]?this[t]:this[t]=u&&(c=e[s])?nt(c):(o={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(Q(o,{url:this.root+n})).then(function(t){return e[s]=t[r]})),at(i,a)},J=function(t){return function(e){return new E(function(n,r){var i;return(i=it.find(e,function(e){return e.name===t}))?n(i):r('List "'+t+'" not found among: '+e.map($("name")))})}},d=function(t,e){return null==e&&(e="listName"),it.compose(t.fetchList,$(e))},q=function(t){var e,n,r,i,o,a;for(null==t&&(t=[]),i=it.isArray(t)?t:[t],a=[],n=0,r=i.length;r>n;n++)e=i[n],a.push(null!=(o=e.name)?o:e);return a},j=function(){function t(t){var e;if(this.root=t.root,this.token=t.token,this.errorHandler=t.errorHandler,this.DEBUG=t.DEBUG,this.help=t.help,e=t.noCache,this.headers=t.headers,this.connectAs=dt(this.connectAs,this),this.createList=dt(this.createList,this),this.resolveIds=dt(this.resolveIds,this),this.templateQuery=dt(this.templateQuery,this),this.savedQuery=dt(this.savedQuery,this),this.query=dt(this.query,this),this.fetchRelease=dt(this.fetchRelease,this),this.fetchClassKeys=dt(this.fetchClassKeys,this),this.fetchVersion=dt(this.fetchVersion,this),this.fetchSummaryFields=dt(this.fetchSummaryFields,this),this.fetchModel=dt(this.fetchModel,this),this.fetchWidgetMap=dt(this.fetchWidgetMap,this),this.fetchWidgets=dt(this.fetchWidgets,this),this.complement=dt(this.complement,this),this.fetchListsContaining=dt(this.fetchListsContaining,this),this.fetchList=dt(this.fetchList,this),this.findLists=dt(this.findLists,this),this.fetchLists=dt(this.fetchLists,this),this.fetchTemplates=dt(this.fetchTemplates,this),this.tableRows=dt(this.tableRows,this),this.values=dt(this.values,this),this.rows=dt(this.rows,this),this.records=dt(this.records,this),this.table=dt(this.table,this),this.pathValues=dt(this.pathValues,this),this.fetchUser=dt(this.fetchUser,this),this.whoami=dt(this.whoami,this),this.findById=dt(this.findById,this),this.count=dt(this.count,this),this.enrichment=dt(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");u.test(this.root)||(this.root=a+this.root),c.test(this.root)||(this.root=this.root+L),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=o),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!e,this.getFormat=function(t){return function(t){return null==t&&(t="json"),t}}(this)}var e,n,w,E,j,D;return t.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),G.doReq.apply(this,arguments)},t.prototype.post=function(t,e){return this.makeRequest("POST",t,e)},t.prototype.get=function(t,e){return this.makeRequest("GET",t,e)},t.prototype.makeRequest=function(t,e,n,r,i){var o,a,s,u,c,l,f;return null==t&&(t="GET"),null==e&&(e=""),null==n&&(n={}),null==r&&(r=function(){}),null==i&&(i=!1),it.isArray(r)&&(c=r,r=c[0],a=c[1]),it.isArray(n)&&(n=it.pairsToObj(n)),null==a&&(a=this.errorHandler),n=it.copy(n),o=this.getFormat(n.format),G.supports(t)||(l=[t,G.getMethod(t)],n.method=l[0],t=l[1]),s={data:n,dataType:o,success:r,error:a,path:e,type:t},null!=n.auth&&(s.auth=n.auth,delete s.data.auth),null!=n.headers&&(s.headers=it.copy(n.headers),delete s.data.headers),(u=null!=(f=n.timeout)?f:this.timeout)&&(s.timeout=u,delete n.timeout),this.authorise(s).then(function(t){return function(e){return t.doReq(e,i)}}(this))},t.prototype.authorise=function(t){return this.fetchVersion().then(function(e){return function(n){var r,i,o;return r=it.copy(t),null==r.headers&&(r.headers={}),r.url=e.root+r.path,i=[],14>n&&("string"==typeof r.data?i.push(["format",r.dataType]):r.data.format=r.dataType),null!=e.token&&b(t.path,null!=(o=r.data)?o.query:void 0)&&(n>=14?r.headers.Authorization="Token "+e.token:"string"==typeof r.data?i.push(["token",e.token]):r.data.token=e.token),i.length&&(r.url+="?"+rt(i)),r}}(this))},t.prototype.attachCustomHeaders=function(t){var e;return null!=this.headers?(e=it.copy(t),e.headers=it.merge(e.headers,this.headers),e):t},t.prototype.enrichment=function(t,e){return C(this,8,function(n){return function(){var r;return r=Q({maxp:.05,correction:"Holm-Bonferroni"},t),at(e,n.get(s,r).then($("results")))}}(this))},t.prototype.search=function(t,e){return null==t&&(t={}),null==e&&(e=function(){}),C(this,9,function(n){return function(){var r,i,o,a;if(it.isFunction(t)&&(a=[t,{}],e=a[0],t=a[1]),"string"==typeof t)i={q:t};else{i={q:t.q};for(r in t)gt.call(t,r)&&(o=t[r],"q"!==r&&(i["facet_"+r]=o))}return at(e,n.post(M,i))}}(this))},t.prototype.makePath=function(t,e,n){return null==e&&(e={}),null==n&&(n=function(){}),at(n,this.fetchModel().then(function(n){return n.makePath(t,e)}))},t.prototype.count=function(t,e){var n,r;return null==e&&(e=function(){}),n=t?null!=t.toPathString?(tt=t.isClass()?t.append("id"):t,this.pathValues(tt,"count")):null!=t.toXML?(r={query:t,format:"jsoncount"},this.post(S,r).then($("count"))):"string"==typeof t?this.fetchModel().then(function(e){return function(n){var r;try{return e.count(n.makePath(t))}catch(i){return r=i,e.query({select:[t]}).then(e.count)}}}(this)):this.query(t).then(this.count):X("Not enough arguments"),at(e,n)},t.prototype.findById=function(t,e,n,r){var i,o;return null==n&&(n=["**"]),null==r&&(r=function(){}),it.isFunction(n)&&(o=[["**"],n],n=o[0],r=o[1]),i=this.query({from:t,select:n,where:{id:e}}).then(W).then(Z("records")).then($(0)),at(r,i)},t.prototype.lookup=function(t,e,n,r){var i,o;return it.isFunction(n)&&(o=[null,n],n=o[0],r=o[1]),i=this.query({from:t,select:["**"],where:[[t,"LOOKUP",e,n]]}).then(W).then(Z("records")),at(r,i)},t.prototype.find=function(t,e,n,r){var i;return it.isFunction(n)&&(i=[null,n],n=i[0],r=i[1]),at(r,this.lookup(t,e,n).then(function(t){return null==t||0===t.length?X("Nothing found"):t.length>1?X("Multiple items found: "+t.slice(0,3)+"..."):nt(t[0])}))},t.prototype.whoami=function(t){return C(this,9,function(e){return function(){return at(t,e.get(z).then($("user")).then(function(t){return new U(e,t)}))}}(this))},t.prototype.fetchUser=function(){var t;return t=1<=arguments.length?vt.call(arguments,0):[],this.whoami.apply(this,t)},j=function(t,e){return{format:t,path:String(e),typeConstraints:JSON.stringify(e.subclasses)}},t.prototype.pathValues=function(t,e,n){return null==e&&(e={}),C(this,6,function(r){return function(){var i,o,a,s,u;return"string"==typeof e&&(s=e,e={}),it.isFunction(e)&&(u=[n,e],e=u[0],n=u[1]),"count"!==s&&(s="results"),o="count"===s?"jsoncount":"json",a=function(){var n;try{return this.fetchModel().then(Z("makePath",t,null!=(n=t.subclasses)?n:e)).then(function(t){return j(o,t)}).then(function(t){return function(e){return t.post(x,e)}}(this)).then($(s))}catch(r){return i=r,X(i)}}.call(r),at(n,a)}}(this))},t.prototype.doPagedRequest=function(t,e,n,r,i){var o,a;return null==n&&(n={}),null==i&&(i=function(){}),null!=t.toXML?(it.isFunction(n)&&(a=[n,{}],i=a[0],n=a[1]),o=Q(n,{query:t,format:r}),at(i,this.post(e,o).then($("results")))):this.query(t).then(function(t){return function(o){return t.doPagedRequest(o,e,n,r,i)}}(this))},t.prototype.table=function(t,e,n){return this.doPagedRequest(t,S,e,"jsontable",n)},t.prototype.records=function(t,e,n){return this.doPagedRequest(t,S,e,"jsonobjects",n)},t.prototype.rows=function(t,e,n){return this.doPagedRequest(t,S,e,"json",n)},t.prototype.values=function(t,e,n){var r,i;return it.isFunction(e)&&(i=[e,n],n=i[0],e=i[1]),r=null==t?X("No query term supplied"):null!=t.descriptors||"string"==typeof t?this.pathValues(t,e).then(K($("value"))):null!=t.toXML?1!==t.views.length?X("Expected one column, got "+t.views.length):this.rows(t,e).then(K($(0))):this.query(t).then(function(t){return function(n){return t.values(n,e)}}(this)),at(n,r)},t.prototype.tableRows=function(t,e,n){return this.doPagedRequest(t,I,e,"json",n)},t.prototype.fetchTemplates=function(t){return at(t,this.get(P).then($("templates")))},t.prototype.fetchLists=function(t){return this.findLists("",t)},t.prototype.findLists=function(t,e){return null==t&&(t=""),null==e&&(e=function(){}),this.fetchVersion().then(function(n){return function(r){var i;return at(e,t&&13>r?X("Finding lists by name on the server requires version 13. This is only "+r):(i=function(t){var e,r,i,o;for(o=[],r=0,i=t.length;i>r;r++)e=t[r],o.push(new g(e,n));return o},n.get(h,{name:t}).then($("lists")).then(i)))}}(this))},t.prototype.fetchList=function(t,e){return this.fetchVersion().then(function(n){return function(r){return at(e,13>r?n.findLists().then(J(t)):n.findLists(t).then($(0)))}}(this))},t.prototype.fetchListsContaining=function(t,e){var n;return n=function(t){return function(e){var n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],o.push(new g(n,t));return o}}(this),at(e,this.get(Y,t).then($("lists")).then(n))},t.prototype.combineLists=function(t,e,n){var r,i,o,a,s,u;return u=Q({lists:[],tags:[]},e),o=u.name,i=u.lists,s=u.tags,r=u.description,a={name:o,description:r},null==a.description&&(a.description=""+t+" of "+i.join(", ")),a.tags=s.join(";"),a.lists=i.join(";"),at(n,this.get(p[t],a).then(d(this)))},t.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(vt.call(arguments)))},t.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(vt.call(arguments)))},t.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(vt.call(arguments)))},t.prototype.complement=function(t,e){var n,r,i,o,a,s,u,c,l;return null==t&&(t={}),null==e&&(e=function(){}),o=t.from,i=t.exclude,s=t.name,r=t.description,l=t.tags,n=function(){return"Relative complement of "+a.join(" and ")+" in "+u.join(" and ")},u=q(o),a=q(i),null==s&&(s=n()),null==r&&(r=n()),null==l&&(l=[]),c={name:s,description:r,tags:l,lists:a,references:u},at(e,this.post(N,c).then(d(this)))},t.prototype.fetchWidgets=function(t){return C(this,8,function(e){return function(){return st.call(e,"widgets",H,V,"widgets",t)}}(this))},D=it.omap(function(t){return[t.name,t]}),t.prototype.fetchWidgetMap=function(t){return C(this,8,function(e){return function(){return at(t,null!=e.__wmap__?e.__wmap__:e.__wmap__=e.fetchWidgets().then(D))}}(this))},t.prototype.fetchModel=function(t){var e;return e=st.call(this,"model",v,m,"model").then(y.load).then(et({service:this})),at(t,e)},t.prototype.fetchSummaryFields=function(t){return st.call(this,"summaryFields",O,R,"classes",t)},t.prototype.fetchVersion=function(t){return st.call(this,"version",F,B,"version",t)},t.prototype.fetchClassKeys=function(t){return st.call(this,"classkeys",r,i,"classes",t)},t.prototype.fetchRelease=function(t){return st.call(this,"release",k,A,"version",t)},t.prototype.query=function(t,e){var n;return n=function(e){return function(n){var r,i;return r=n[0],i=n[1],new T(t,e,{model:r,summaryFields:i})}}(this),at(e,it.parallel(this.fetchModel(),this.fetchSummaryFields()).then(n))},E=function(t,e){return function(n){return n?t.query(n):X("No query found called "+e)}},n=function(t){return t?"string"==typeof t?nt():X("Name must be a string"):X("Name not provided")},t.prototype.savedQuery=function(t,e){return C(this,16,function(r){return function(){return n(t).then(function(){return at(e,r.get("user/queries",{filter:t}).then(function(e){return e.queries[t]}).then(E(r,t)))})}}(this))},t.prototype.templateQuery=function(t,e){return n(t).then(function(n){return function(){return at(e,n.fetchTemplates().then($(t)).then(et("type","TEMPLATE")).then(E(n,t)))}}(this))},t.prototype.manageUserPreferences=function(t,e,n){return C(this,11,function(r){return function(){return at(n,r.makeRequest(t,_,e).then($("preferences")))}}(this))},t.prototype.resolveIds=function(t,e){return C(this,10,function(n){return function(){var r;return r={type:"POST",url:n.root+f,contentType:"application/json",data:JSON.stringify(t),dataType:"json"},at(e,n.doReq(r).then($("uid")).then(l.create(n)))}}(this))},t.prototype.resolutionJob=function(t){return l.create(this)(t)},t.prototype.createList=function(t,e,n){var r,i;return null==t&&(t={}),null==e&&(e=""),null==n&&(n=function(){}),r=function(e){return function(n){return Q(n,{token:e.token,tags:t.tags||[]})}}(this),i={data:it.isArray(e)?e.map(function(t){return'"'+t+'"'}).join("\n"):e,dataType:"json",url:""+this.root+"lists?"+rt(r(t)),type:"POST",contentType:"text/plain"},at(n,this.doReq(i).then(d(this)))},w=function(t){return t.user.temporaryToken},t.prototype.connectAs=function(e){return t.connect(Q(this,{token:e,noCache:!this.useCache}))},t.prototype.register=function(t,e,n){return C(this,9,function(r){return function(){return at(n,r.post("users",{name:t,password:e}).then(w).then(r.connectAs))}}(this))},e=300,t.prototype.getDeregistrationToken=function(t,n){return null==t&&(t=e),C(this,16,function(e){return function(){var r;return r=null!=e.token?e.post("user/deregistration",{validity:t}).then($("token")):X("Not registered"),at(n,r)}}(this))},t.prototype.deregister=function(t,e){return C(this,16,function(n){return function(){return at(e,n.makeRequest("DELETE","user",{deregistrationToken:t,format:"xml"}))}}(this))},t.prototype.login=function(t,e,n){return C(this,9,function(r){return function(){var i;return i=""+t+":"+e,at(n,r.logout().then(function(t){return t.get("user/token",{auth:i})})).then($("token")).then(r.connectAs)}}(this))},t.prototype.logout=function(t){return at(t,nt(this.connectAs()))},t}(),j.prototype.rowByRow=function(){var t,e,n;return n=arguments[0],t=2<=arguments.length?vt.call(arguments,1):[],e=G.iterReq("POST",S,"json"),null!=n.toXML?e.apply(this,arguments):this.query(n).then(function(e){return function(n){return e.rowByRow.apply(e,[n].concat(vt.call(t)))}}(this))},j.prototype.eachRow=j.prototype.rowByRow,j.prototype.recordByRecord=function(){var t,e,n;return n=arguments[0],t=2<=arguments.length?vt.call(arguments,1):[],e=G.iterReq("POST",S,"jsonobjects"),null!=n.toXML?e.apply(this,arguments):this.query(n).then(function(e){return function(n){return e.recordByRecord.apply(e,[n].concat(vt.call(t)))}}(this))},j.prototype.eachRecord=j.prototype.recordByRecord,j.prototype.union=j.prototype.merge,j.prototype.difference=j.prototype.diff,j.prototype.symmetricDifference=j.prototype.diff,j.prototype.relativeComplement=j.prototype.complement,j.prototype.subtract=j.prototype.complement,j.flushCaches=function(){return v={},F={},k={},r={},O={},H={}},j.connect=function(t){if(null==(null!=t?t.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(t));return new j(t)},n.Service=j,n.Model=y,n.Query=T,n.utils=it,n.VERSION=ot.VERSION,n.imjs=ot}).call(this)},{"./http":3,"./id-resolution-job":4,"./lists":5,"./model":6,"./promise":8,"./query":9,"./user":14,"./util":15,"./version":16}],11:[function(t,n,r){(function(t){(function(){var e;r.DOMParser=null!=t.DOMParser?t.DOMParser:e=function(){function t(){throw new Error("DOMParser is not available")}return t}()}).call(this)}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,e,n){(function(){var t,e,n,r,i,o,a,s,u,c,l,f;if(t="undefined"!=typeof console,e="undefined"!=typeof JSON,n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e||(s=document.createElement("script"),s.src="http://cdn.intermine.org/js/json3/3.2.2/json3.min.js",s.type="text/javascript",o=document.getElementsByTagName("head")[0],o.appendChild(s)),null==Object.keys&&(i=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),Object.keys=function(t){var e,o,a,s,u;if("object"!=typeof t&&""!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");if(e=function(){var e;e=[];for(o in t)i.call(t,o)&&e.push(o);return e}(),r)for(s=0,u=n.length;u>s;s++)a=n[s],i.call(t,a)&&e.push(a);return e}),null==Array.prototype.map&&(Array.prototype.map=function(t){var e,n,r,i;for(i=[],n=0,r=this.length;r>n;n++)e=this[n],i.push(t(e));return i}),null==Array.prototype.filter&&(Array.prototype.filter=function(t){var e,n,r,i;for(i=[],n=0,r=this.length;r>n;n++)e=this[n],t(e)&&i.push(e);return i}),null==Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var n,r,i,o,a;for(i=this.slice(),n=arguments.length<2?i.pop():e,o=0,a=i.length;a>o;o++)r=i[o],n=t(n,r);return n}),null==Array.prototype.forEach&&(Array.prototype.forEach=function(t,e){var n,r,i,o,a;if(!t)throw new Error("No function provided");for(a=[],n=i=0,o=this.length;o>i;n=++i)r=this[n],a.push(t.call(null!=e?e:this,r,n,this));return a}),t||(this.console={log:function(){},error:function(){},debug:function(){}},"undefined"!=typeof window&&null!==window&&(window.console=this.console)),null==console.log&&(console.log=function(){}),null==console.error&&(console.error=function(){}),null==console.debug&&(console.debug=function(){}),null==console.log.apply)for(console.log("Your console needs patching."),
f=["log","error","debug"],u=function(t){var e;return e=console[t],console[t]=function(t){return e(t)}},c=0,l=f.length;l>c;c++)a=f[c],u(a)}).call(this)},{}],13:[function(t,e,n){(function(){var e,r,i,o=function(t,e){return function(){return t.apply(e,arguments)}};r=function(t,e){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]=r);return i},e=t("./promise"),i=["attributes","references","collections"],n.Table=function(){function t(t,e){var n,a,s,u,c,l,f;for(this.model=e,this.getDisplayName=o(this.getDisplayName,this),this.name=t.name,this.tags=t.tags,this.displayName=t.displayName,this.attributes=t.attributes,this.references=t.references,this.collections=t.collections,this.fields={},this.__parents__=null!=(l=t["extends"])?l:[],u=0,c=i.length;c>u;u++){if(a=i[u],null==this[a])throw new Error("Bad model data: missing "+a);r(this[a],this.fields)}f=this.collections;for(s in f)n=f[s],n.isCollection=!0}return t.prototype.toString=function(){var t,e;return"[Table name="+this.name+", fields=["+function(){var n,r;n=this.fields,r=[];for(t in n)e=n[t],r.push(t);return r}.call(this)+"]]"},t.prototype.parents=function(){var t;return(null!=(t=this.__parents__)?t:[]).slice()},t.prototype.getDisplayName=function(){return new e(function(t){return function(e,n){return null!=t.model?e(t.model.makePath(t.name).getDisplayName()):n(new Error("model not set - cannot make path"))}}(this))},t}()}).call(this)},{"./promise":8}],14:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c=function(t,e){return function(){return t.apply(e,arguments)}};u=t("./util"),s=u.withCB,o=u.get,a=u.isFunction,e=u.any,i=u.error,r=function(t,e,n,r){return t.service.manageUserPreferences(n,e,r).then(function(e){return t.preferences=e})},n.User=function(){function t(t,e){this.service=t,this.username=e.username,this.preferences=e.preferences,this.refresh=c(this.refresh,this),this.clearPreferences=c(this.clearPreferences,this),this.clearPreference=c(this.clearPreference,this),this.setPreferences=c(this.setPreferences,this),this.setPreference=c(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return t.prototype.setPreference=function(t,e,n){var r,o;if(a(e)&&(o=[null,e],e=o[0],n=o[1]),"string"==typeof t)r={},r[t]=e;else{if(null!=e)return s(n,i("Incorrect arguments to setPreference"));r=t}return this.setPreferences(r,n)},t.prototype.setPreferences=function(t,e){return r(this,t,"POST",e)},t.prototype.clearPreference=function(t,e){return r(this,{key:t},"DELETE",e)},t.prototype.clearPreferences=function(t){return r(this,{},"DELETE",t)},t.prototype.refresh=function(t){return r(this,{},"GET",t)},t.prototype.createToken=function(t,n,r){var i,u;return null==t&&(t="day"),null==r&&e([t,n],a)&&(a(t)?(i=[null,null,t],t=i[0],n=i[1],r=i[2]):a(n)&&(u=[null,n],n=u[0],r=u[1])),s(r,this.service.post("user/tokens",{type:t,message:n}).then(o("token")))},t.prototype.fetchCurrentTokens=function(t){return s(t,this.service.get("user/tokens").then(o("tokens")))},t.prototype.revokeAllTokens=function(t){return s(t,this.service.makeRequest("DELETE","user/tokens"))},t.prototype.revokeToken=function(t,e){return s(e,this.service.makeRequest("DELETE","user/tokens/"+t))},t}()}).call(this)},{"./util":15}],15:[function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,p,d,g,v,m,y,b,w,x,_=[].slice,E=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},S={}.hasOwnProperty;e=t("./promise"),y=n,y.defer=function(){var t;return t={},t.promise=new e(function(e,n){return t.resolve=e,t.reject=n}),t},a=function(t){return encodeURIComponent(String(t))},m=function(t){var e;return function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(e.map(a).join("="));return i}().join("&")},y.querystring=function(t){var e,n,r,i,o,a;if(!t)return"";if(d(t))r=t.slice();else{r=[];for(e in t)a=t[e],d(a)?(i=function(){var t,n,r;for(r=[],t=0,n=a.length;n>t;t++)o=a[t],r.push([e,o]);return r}(),r=r.concat(i)):r.push([e,a])}return m(function(){var t,e,i;for(i=[],t=0,e=r.length;e>t;t++)n=r[t],null!=n[1]&&i.push(n);return i}())},y.curry=o=function(){var t,e;return e=arguments[0],t=2<=arguments.length?_.call(arguments,1):[],function(){var n;return n=1<=arguments.length?_.call(arguments,0):[],e.apply(null,t.concat(n))}},y.error=u=function(t){return new e(function(e,n){return n(new Error(t))})},y.success=b=function(t){return new e(function(e,n){return e(t)})},y.parallel=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],1===t.length&&!t[0].then&&t[0].length?e.all(t[0]):e.all(t)},y.withCB=function(){var t,e,n,r,i,a,s,u;for(e=2<=arguments.length?_.call(arguments,0,a=arguments.length-1):(a=0,[]),i=arguments[a++],s=0,u=e.length;u>s;s++)t=e[s],null!=t&&(r=o(t,null),n=t,i.then(r,n));return i},y.fold=l=function(t){return function(e,n){var r,i,o;if(1===arguments.length&&(n=(null!=e?e.slice():void 0)||e,e=(null!=n?n.shift():void 0)||{}),null==n)throw new Error("xs is null");if(null!=n.reduce)return n.reduce(t,e);i=e;for(r in n)o=n[r],i=null!=i?t(i,r,o):{k:o};return i}},y.take=function(t){return function(e){return null!=t?e.slice(0,+(t-1)+1||9e9):e.slice()}},y.filter=function(t){return function(e){var n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],t(n)&&o.push(n);return o}},y.uniqBy=function(t,e){var n,r,i,a,s,u;if(1===arguments.length)return o(y.uniqBy,t);if(r=[],i=[],null==e)return i;for(s=0,u=e.length;u>s;s++)a=e[s],n=t(a),E.call(r,n)<0&&(r.push(n),i.push(a));return i},y.find=function(t,e){var n,r,i;if(1===arguments.length)return e=t,function(t){return y.find(t,e)};for(r=0,i=t.length;i>r;r++)if(n=t[r],e(n))return n;return null},d=null!=(x=Array.isArray)?x:function(t){return null!=(null!=t?t.splice:void 0)&&null!=(null!=t?t.push:void 0)&&null!=(null!=t?t.pop:void 0)&&null!=(null!=t?t.slice:void 0)},y.isArray=d,y.isFunction=function(t){return"function"==typeof t},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},y.escape=function(t){var e,n,r,i,o,a;if(null==t)return"";for(i=String(t).replace(/[&<>"']/g,function(t){return s[t]}),r=[],n=o=0,a=i.length;a>=0?a>=o:o>=a;n=a>=0?++o:--o)e=i.charCodeAt(n),e>256?r.push("&#"+e+";"):r.push(i.charAt(n));return r.join("")},y.omap=function(t){var e;return e=l(function(e,n,r){var i,o,a;return a=t(n,r),i=a[0],o=a[1],d(o)&&(o=o.slice()),e[i]=o,e}),function(t){return e({},t)}},y.copy=y.omap(function(t,e){return[t,e]}),y.partition=function(t){return function(e){var n;return(n=l(function(e,n){var r,i;return i=e[0],r=e[1],t(n)?[i.concat([n]),r]:[i,r.concat([n])]}))([[],[]],e)}},y.merge=function(t,e){return extend(extend({},t),e)},y.extend=function(t,e){var n,r,i;i=[];for(n in e)r=e[n],i.push(t[n]=r);return i},y.id=f=function(t){return t},y.concatMap=function(t){return function(e){var n,r,i,o,a;for(r=void 0,o=0,a=e.length;a>o;o++)i=e[o],n=t(i),r=void 0===r?n:"number"==typeof r?r+n:null!=r.concat?r.concat(n):g(r,n);return r}},y.map=function(t){return h("map",t)},i=l(function(t,e){return function(){var n;return n=1<=arguments.length?_.call(arguments,0):[],t(e.apply(null,n))}}),y.compose=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],i(t)},y.flatMap=y.concatMap,y.difference=function(t,e){var n,r,i,o;for(o=[],r=0,i=t.length;i>r;r++)n=t[r],E.call(e,n)<0&&o.push(n);return o},y.stringList=function(t){return"string"==typeof t?[t]:t},y.flatten=c=function(){var t,e,n,r,i,o,a,s,u;for(n=1<=arguments.length?_.call(arguments,0):[],t=[],i=0,a=n.length;a>i;i++)if(e=n[i],d(e))for(u=c.apply(null,e),o=0,s=u.length;s>o;o++)r=u[o],t.push(r);else t.push(e);return t},y.sum=y.concatMap(f),y.merge=g=function(){var t,e,n,r,i,o,a;for(r=1<=arguments.length?_.call(arguments,0):[],e={},o=0,a=r.length;a>o;o++){n=r[o];for(t in n)S.call(n,t)&&(i=n[t],e[t]=i)}return e},y.any=function(t,e){var n,r,i;for(null==e&&(e=f),r=0,i=t.length;i>r;r++)if(n=t[r],e(n))return!0;return!1},y.invoke=h=function(){var t,e;return e=arguments[0],t=2<=arguments.length?_.call(arguments,1):[],p(e,t)},y.invokeWith=p=function(t,e,n){return null==e&&(e=[]),null==n&&(n=null),function(r){if(null==r)throw new Error('Cannot call method "'+t+'" of null');if(r[t])return r[t].apply(n||r,e);throw new Error('Cannot call undefined method "'+t+" of "+r)}},y.get=function(t){return function(e){return e[t]}},y.set=function(t,e){return function(n){var r,i;if(2===arguments.length)n[t]=e;else for(r in t)S.call(t,r)&&(i=t[r],n[r]=i);return n}},r=function(t,e){return"This service requires a service at version "+t+" or above. This one is at "+e},y.REQUIRES_VERSION=function(t,e,n){return t.fetchVersion().then(function(t){return t>=e?n():u(r(e,t))})},y.dejoin=function(t){var e,n,r,i,o;for(o=t.views,r=0,i=o.length;i>r;r++)n=o[r],e=n.split("."),e.length>2&&t.addJoin(e.slice(1,-1).join("."));return t},w=l(function(t,e){return t.then(e)}),y.sequence=function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],w(b(),t)},v=l(function(t,e){var n,r;if(n=e[0],r=e[1],null!=t[n])throw new Error("Duplicate key: "+n);return t[n]=r,t}),y.pairsToObj=function(t){return v({},t)}}).call(this)},{"./promise":8}],16:[function(t,e,n){(function(){n.VERSION="3.15.0"}).call(this)},{}],17:[function(t,e,n){(function(){var e,r;e=t("xmldom").DOMParser,r=function(t){return t=t.replace(/^\s*/g,""),t=t.replace(/\s$/g,""),0===t.length?t:">"!==t[t.length-1]?t+">":t},n.parse=function(t){var n,i;if("string"!=typeof t)throw new Error("Expected a string - got "+t);if(t=r(t),!t)throw new Error("Expected content - got empty string");if(n=function(){try{return i=new e,i.parseFromString(t,"text/xml")}catch(n){}}(),!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n}}).call(this)},{xmldom:11}],18:[function(t,e,n){(function(r,i){function o(t,e){return"string"==typeof t?e==t:t&&"function"==typeof t.exec?t.exec(e):"boolean"==typeof t?t:"function"==typeof t?t(e):!1}var a=t("jsonparse"),s=t("through");n.parse=function(t,e){var n=new a,r=s(function(t){"string"==typeof t&&(t=new i(t)),n.write(t)},function(t){t&&r.write(t),r.queue(null)});"string"==typeof t&&(t=t.split(".").map(function(t){return"*"===t?!0:""===t?{recurse:!0}:t}));var u=0;return t&&t.length||(t=null),n.onValue=function(n){if(this.root||(r.root=n),t){for(var i=0,a=0;i<t.length;){var s,c=t[i];if(a++,c&&!c.recurse){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(!o(c,s.key))return;i++}else{i++;var l=t[i];if(!l)return;for(;;){if(s=a===this.stack.length?this:this.stack[a],!s)return;if(o(l,s.key)){i++;break}a++}}}if(a===this.stack.length){u++;var f=this.stack.slice(1).map(function(t){return t.key}).concat([this.key]),h=this.value[this.key];null!=h&&null!=(h=e?e(h,f):h)&&r.queue(h),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(e,i){n._onToken(e,i),0===this.stack.length&&r.root&&(t||r.queue(r.root),r.emit("root",r.root,u),u=0,r.root=null)},n.onError=function(t){r.emit("error",t)},r},n.stringify=function(t,e,n,r){r=r||0,t===!1?(t="",e="\n",n=""):null==t&&(t="[\n",e="\n,\n",n="\n]\n");var i,o=!0,a=!1;return i=s(function(n){a=!0;var s=JSON.stringify(n,null,r);o?(o=!1,i.queue(t+s)):i.queue(e+s)},function(e){a||i.queue(t),i.queue(n),i.queue(null)})},n.stringifyObject=function(t,e,n,r){r=r||0,t===!1?(t="",e="\n",n=""):null==t&&(t="{\n",e="\n,\n",n="\n}\n");var i=!0,o=!1;return stream=s(function(n){o=!0;var a=JSON.stringify(n[0])+":"+JSON.stringify(n[1],null,r);i?(i=!1,this.queue(t+a)):this.queue(e+a)},function(e){o||this.queue(t),this.queue(n),this.queue(null)}),stream},e.parent||"browser"===r.title||r.stdin.pipe(n.parse(r.argv[2])).pipe(n.stringify("[",",\n","]\n",2)).pipe(r.stdout)}).call(this,t("/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),t("buffer").Buffer)},{"/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":57,buffer:25,jsonparse:19,through:20}],19:[function(t,e,n){(function(t){function n(t){for(var e=Object.keys(i),n=0,r=e.length;r>n;n++){var o=e[n];if(i[o]===t)return o}return t&&"0x"+t.toString(16)}function r(){this.tState=v,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=B,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new t(2),3:new t(3),4:new t(4)}}var i={},o=i.LEFT_BRACE=1,a=i.RIGHT_BRACE=2,s=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,c=i.COLON=5,l=i.COMMA=6,f=i.TRUE=7,h=i.FALSE=8,p=i.NULL=9,d=i.STRING=10,g=i.NUMBER=11,v=i.START=17,m=i.TRUE1=33,y=i.TRUE2=34,b=i.TRUE3=35,w=i.FALSE1=49,x=i.FALSE2=50,_=i.FALSE3=51,E=i.FALSE4=52,S=i.NULL1=65,M=i.NULL3=66,T=i.NULL2=67,k=i.NUMBER1=81,A=i.NUMBER2=82,C=i.NUMBER3=83,N=i.NUMBER4=84,L=i.NUMBER5=85,R=i.NUMBER6=86,O=i.NUMBER7=87,j=i.NUMBER8=88,I=i.STRING1=97,P=i.STRING2=98,q=i.STRING3=99,D=i.STRING4=100,U=i.STRING5=101,F=i.STRING6=102,B=i.VALUE=113,z=i.KEY=114,H=i.OBJECT=129,V=i.ARRAY=130,Y=r.prototype;Y.charError=function(t,e){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+n(this.tState)))},Y.onError=function(t){throw t},Y.write=function(e){"string"==typeof e&&(e=new t(e));for(var n,r=0,i=e.length;i>r;r++)if(this.tState===v)n=e[r],123===n?this.onToken(o,"{"):125===n?this.onToken(a,"}"):91===n?this.onToken(s,"["):93===n?this.onToken(u,"]"):58===n?this.onToken(c,":"):44===n?this.onToken(l,","):116===n?this.tState=m:102===n?this.tState=w:110===n?this.tState=S:34===n?(this.string="",this.tState=I):45===n?(this.negative=!0,this.tState=k):48===n?(this.magnatude=0,this.tState=A):n>48&&64>n?(this.magnatude=n-48,this.tState=C):32===n||9===n||10===n||13===n||this.charError(e,r);else if(this.tState===I)if(n=e[r],this.bytes_remaining>0){for(var B=0;B<this.bytes_remaining;B++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+B]=e[B];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+B-1}else if(0===this.bytes_remaining&&n>=128)if(n>=194&&223>=n&&(this.bytes_in_sequence=2),n>=224&&239>=n&&(this.bytes_in_sequence=3),n>=240&&244>=n&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>e.length){for(var z=0;z<=e.length-1-r;z++)this.temp_buffs[this.bytes_in_sequence][z]=e[r+z];this.bytes_remaining=r+this.bytes_in_sequence-e.length,r=e.length-1}else this.string+=e.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1;else 34===n?(this.tState=v,this.onToken(d,this.string),this.string=void 0):92===n?this.tState=P:n>=32?this.string+=String.fromCharCode(n):this.charError(e,r);else this.tState===P?(n=e[r],34===n?(this.string+='"',this.tState=I):92===n?(this.string+="\\",this.tState=I):47===n?(this.string+="/",this.tState=I):98===n?(this.string+="\b",this.tState=I):102===n?(this.string+="\f",this.tState=I):110===n?(this.string+="\n",this.tState=I):114===n?(this.string+="\r",this.tState=I):116===n?(this.string+="	",this.tState=I):117===n?(this.unicode="",this.tState=q):this.charError(e,r)):this.tState===q||this.tState===D||this.tState===U||this.tState===F?(n=e[r],n>=48&&64>n||n>64&&70>=n||n>96&&102>=n?(this.unicode+=String.fromCharCode(n),this.tState++===F&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=I)):this.charError(e,r)):this.tState===k?(n=e[r],48===n?(this.magnatude=0,this.tState=A):n>48&&64>n?(this.magnatude=n-48,this.tState=C):this.charError(e,r)):this.tState===A?(n=e[r],46===n?(this.position=.1,this.tState=N):101===n||69===n?(this.exponent=0,this.tState=R):(this.tState=v,this.onToken(g,0),this.magnatude=void 0,this.negative=void 0,r--)):this.tState===C?(n=e[r],46===n?(this.position=.1,this.tState=N):101===n||69===n?(this.exponent=0,this.tState=R):n>=48&&64>n?this.magnatude=10*this.magnatude+n-48:(this.tState=v,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(g,this.magnatude),this.magnatude=void 0,r--)):this.tState===N?(n=e[r],n>=48&&64>n?(this.magnatude+=this.position*(n-48),this.position/=10,this.tState=L):this.charError(e,r)):this.tState===L?(n=e[r],n>=48&&64>n?(this.magnatude+=this.position*(n-48),this.position/=10):101===n||69===n?(this.exponent=0,this.tState=R):(this.tState=v,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(g,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,r--)):this.tState===R?(n=e[r],43===n||45===n?(45===n&&(this.negativeExponent=!0),this.tState=O):n>=48&&64>n?(this.exponent=10*this.exponent+(n-48),this.tState=j):this.charError(e,r)):this.tState===O?(n=e[r],n>=48&&64>n?(this.exponent=10*this.exponent+(n-48),this.tState=j):this.charError(e,r)):this.tState===j?(n=e[r],n>=48&&64>n?this.exponent=10*this.exponent+(n-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=v,this.onToken(g,this.magnatude),this.magnatude=void 0,r--)):this.tState===m?114===e[r]?this.tState=y:this.charError(e,r):this.tState===y?117===e[r]?this.tState=b:this.charError(e,r):this.tState===b?101===e[r]?(this.tState=v,this.onToken(f,!0)):this.charError(e,r):this.tState===w?97===e[r]?this.tState=x:this.charError(e,r):this.tState===x?108===e[r]?this.tState=_:this.charError(e,r):this.tState===_?115===e[r]?this.tState=E:this.charError(e,r):this.tState===E?101===e[r]?(this.tState=v,this.onToken(h,!1)):this.charError(e,r):this.tState===S?117===e[r]?this.tState=M:this.charError(e,r):this.tState===M?108===e[r]?this.tState=T:this.charError(e,r):this.tState===T&&(108===e[r]?(this.tState=v,this.onToken(p,null)):this.charError(e,r))},Y.onToken=function(t,e){},Y.parseError=function(t,e){this.onError(new Error("Unexpected "+n(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+n(this.state)))},Y.onError=function(t){throw t},Y.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},Y.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=B)},Y.emit=function(t){this.mode&&(this.state=l),this.onValue(t)},Y.onValue=function(t){},Y.onToken=function(t,e){this.state===B?t===d||t===g||t===f||t===h||t===p?(this.value&&(this.value[this.key]=e),this.emit(e)):t===o?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=z,this.mode=H):t===s?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=V,this.state=B):t===a?this.mode===H?this.pop():this.parseError(t,e):t===u&&this.mode===V?this.pop():this.parseError(t,e):this.state===z?t===d?(this.key=e,this.state=c):t===a?this.pop():this.parseError(t,e):this.state===c?t===c?this.state=B:this.parseError(t,e):this.state===l?t===l?this.mode===V?(this.key++,this.state=B):this.mode===H&&(this.state=z):t===u&&this.mode===V||t===a&&this.mode===H?this.pop():this.parseError(t,e):this.parseError(t,e)},e.exports=r}).call(this,t("buffer").Buffer)},{buffer:25}],20:[function(t,e,n){(function(r){function i(t,e,n){function i(){for(;c.length&&!f.paused;){var t=c.shift();if(null===t)return f.emit("end");f.emit("data",t)}}function a(){f.writable=!1,e.call(f),!f.readable&&f.autoDestroy&&f.destroy()}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var s=!1,u=!1,c=[],l=!1,f=new o;return f.readable=f.writable=!0,f.paused=!1,f.autoDestroy=!(n&&n.autoDestroy===!1),f.write=function(e){return t.call(this,e),!f.paused},f.queue=f.push=function(t){return l?f:(null===t&&(l=!0),c.push(t),i(),f)},f.on("end",function(){f.readable=!1,!f.writable&&f.autoDestroy&&r.nextTick(function(){f.destroy()})}),f.end=function(t){return s?void 0:(s=!0,arguments.length&&f.write(t),a(),f)},f.destroy=function(){return u?void 0:(u=!0,s=!0,c.length=0,f.writable=f.readable=!1,f.emit("close"),f)},f.pause=function(){return f.paused?void 0:(f.paused=!0,f)},f.resume=function(){return f.paused&&(f.paused=!1,f.emit("resume")),i(),f.paused||f.emit("drain"),f},f}var o=t("stream");n=e.exports=i,i.through=i}).call(this,t("/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":57,stream:47}],21:[function(e,n,r){!function(){function e(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++c+"";return t?t+e:e},has:function(t,e){return s.call(t,e)},each:function(t,e,n){if(null!=t)if(a&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;i>r;r++)e.call(n,t[r],r,t);else for(var o in t)this.has(t,o)&&e.call(n,t[o],o,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,o=this,a=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c=0,l=e();i={on:function(t,e,n){if(!h(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!h(this,"once",t,[e,n])||!e)return this;var r=this,i=l.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,a,s,u,c,f;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:l.keys(this._events),s=0,u=a.length;u>s;s++)if(t=a[s],o=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,f=o.length;f>c;c++)i=o[c],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=u.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&p(n,e),r&&p(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}};var f=/\s+/,h=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(f.test(n)){for(var o=n.split(f),a=0,s=o.length;s>a;a++)t[e].apply(t,[o[a]].concat(r));return!1}return!0},p=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};l.each(d,function(t,e){i[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=l.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=i),r.BackboneEvents=i):"function"==typeof t&&"object"==typeof t.amd?t(function(){return i}):o.BackboneEvents=i}(this)},{}],22:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":21}],23:[function(r,i,o){(function(e,o){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   2.3.0
	 */
(function(){"use strict";function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return"function"==typeof t}function u(t){return"object"==typeof t&&null!==t}function c(t){X=t}function l(t){Z=t}function f(){var t=e.nextTick,r=e.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(r)&&"0"===r[1]&&"10"===r[2]&&(t=n),function(){t(v)}}function h(){return function(){W(v)}}function p(){var t=0,e=new tt(v),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function d(){var t=new MessageChannel;return t.port1.onmessage=v,function(){t.port2.postMessage(0)}}function g(){return function(){setTimeout(v,1)}}function v(){for(var t=0;G>t;t+=2){var e=rt[t],n=rt[t+1];e(n),rt[t]=void 0,rt[t+1]=void 0}G=0}function m(){try{var t=r,e=t("vertx");return W=e.runOnLoop||e.runOnContext,h()}catch(n){return g()}}function y(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function x(t){try{return t.then}catch(e){return st.error=e,st}}function _(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function E(t,e,n){Z(function(t){var r=!1,i=_(n,e,function(n){r||(r=!0,e!==n?T(t,n):A(t,n))},function(e){r||(r=!0,C(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,C(t,i))},t)}function S(t,e){e._state===ot?A(t,e._result):e._state===at?C(t,e._result):N(e,void 0,function(e){T(t,e)},function(e){C(t,e)})}function M(t,e){if(e.constructor===t.constructor)S(t,e);else{var n=x(e);n===st?C(t,st.error):void 0===n?A(t,e):s(n)?E(t,e,n):A(t,e)}}function T(t,e){t===e?C(t,b()):a(e)?M(t,e):A(t,e)}function k(t){t._onerror&&t._onerror(t._result),L(t)}function A(t,e){t._state===it&&(t._result=e,t._state=ot,0!==t._subscribers.length&&Z(L,t))}function C(t,e){t._state===it&&(t._state=at,t._result=e,Z(k,t))}function N(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+ot]=n,i[o+at]=r,0===o&&t._state&&Z(L,t)}function L(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?j(n,r,i,o):i(o);t._subscribers.length=0}}function R(){this.error=null}function O(t,e){try{return t(e)}catch(n){return ut.error=n,ut}}function j(t,e,n,r){var i,o,a,u,c=s(n);if(c){if(i=O(n,r),i===ut?(u=!0,o=i.error,i=null):a=!0,e===i)return void C(e,w())}else i=r,a=!0;e._state!==it||(c&&a?T(e,i):u?C(e,o):t===ot?A(e,i):t===at&&C(e,i))}function I(t,e){try{e(function(e){T(t,e)},function(e){C(t,e)})}catch(n){C(t,n)}}function P(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(y),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?A(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&A(n.promise,n._result))):C(n.promise,n._validationError())}function q(t){return new ct(this,t).promise}function D(t){function e(t){T(i,t)}function n(t){C(i,t)}var r=this,i=new r(y);if(!J(t))return C(i,new TypeError("You must pass an array to race.")),i;for(var o=t.length,a=0;i._state===it&&o>a;a++)N(r.resolve(t[a]),void 0,e,n);return i}function U(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(y);return T(n,t),n}function F(t){var e=this,n=new e(y);return C(n,t),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(t){this._id=dt++,this._state=void 0,this._result=void 0,this._subscribers=[],y!==t&&(s(t)||B(),this instanceof H||z(),I(this,t))}function V(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=gt)}var Y;Y=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var W,X,$,J=Y,G=0,Z=({}.toString,function(t,e){rt[G]=t,rt[G+1]=e,G+=2,2===G&&(X?X(v):$())}),K="undefined"!=typeof window?window:void 0,Q=K||{},tt=Q.MutationObserver||Q.WebKitMutationObserver,et="undefined"!=typeof e&&"[object process]"==={}.toString.call(e),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);$=et?f():tt?p():nt?d():void 0===K&&"function"==typeof r?m():g();var it=void 0,ot=1,at=2,st=new R,ut=new R;P.prototype._validateInput=function(t){return J(t)},P.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},P.prototype._init=function(){this._result=new Array(this.length)};var ct=P;P.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===it&&e>i;i++)t._eachEntry(r[i],i)},P.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;u(t)?t.constructor===r&&t._state!==it?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},P.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===it&&(r._remaining--,t===at?C(i,n):r._result[e]=n),0===r._remaining&&A(i,r._result)},P.prototype._willSettleAt=function(t,e){var n=this;N(t,void 0,function(t){n._settledAt(ot,e,t)},function(t){n._settledAt(at,e,t)})};var lt=q,ft=D,ht=U,pt=F,dt=0,gt=H;H.all=lt,H.race=ft,H.resolve=ht,H.reject=pt,H._setScheduler=c,H._setAsap=l,H._asap=Z,H.prototype={constructor:H,then:function(t,e){var n=this,r=n._state;if(r===ot&&!t||r===at&&!e)return this;var i=new this.constructor(y),o=n._result;if(r){var a=arguments[r-1];Z(function(){j(r,i,a,o)})}else N(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var vt=V,mt={Promise:gt,polyfill:vt};"function"==typeof t&&t.amd?t(function(){return mt}):"undefined"!=typeof i&&i.exports?i.exports=mt:"undefined"!=typeof this&&(this.ES6Promise=mt),vt()}).call(this)}).call(this,r("/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":57}],24:[function(t,e,n){},{}],25:[function(t,e,n){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var i,o=typeof t;if("number"===o)i=t>0?t>>>0:0;else if("string"===o)"base64"===e&&(t=E(t)),i=r.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&I(t.data)&&(t=t.data),i=+t.length>0?Math.floor(+t.length):0}if(this.length>P)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+P.toString(16)+" bytes");var a;r.TYPED_ARRAY_SUPPORT?a=r._augment(new Uint8Array(i)):(a=this,a.length=i,a._isBuffer=!0);var s;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)a._set(t);else if(M(t))if(r.isBuffer(t))for(s=0;i>s;s++)a[s]=t.readUInt8(s);else for(s=0;i>s;s++)a[s]=(t[s]%256+256)%256;else if("string"===o)a.write(t,0,e);else if("number"===o&&!r.TYPED_ARRAY_SUPPORT&&!n)for(s=0;i>s;s++)a[s]=0;return a}function i(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[n+a]=s}return a}function o(t,e,n,r){var i=L(k(e),t,n,r);return i}function a(t,e,n,r){var i=L(A(e),t,n,r);return i}function s(t,e,n,r){return a(t,e,n,r)}function u(t,e,n,r){var i=L(N(e),t,n,r);return i}function c(t,e,n,r){var i=L(C(e),t,n,r,2);return i}function l(t,e,n){return 0===e&&n===t.length?O.fromByteArray(t):O.fromByteArray(t.slice(e,n))}function f(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)t[o]<=127?(r+=R(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+R(i)}function h(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function p(t,e,n){return h(t,e,n)}function d(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=T(t[o]);return i}function g(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function v(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function m(t,e,n,i,o,a){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new TypeError("value is out of bounds");if(n+i>t.length)throw new TypeError("index out of range")}function y(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function b(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function w(t,e,n,r,i,o){if(e>i||o>e)throw new TypeError("value is out of bounds");if(n+r>t.length)throw new TypeError("index out of range")}function x(t,e,n,r,i){return i||w(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),j.write(t,e,n,r,23,4),n+4}function _(t,e,n,r,i){return i||w(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),j.write(t,e,n,r,52,8),n+8}function E(t){for(t=S(t).replace(D,"");t.length%4!==0;)t+="=";return t}function S(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return I(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function T(t){return 16>t?"0"+t.toString(16):t.toString(16)}function k(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(127>=r)e.push(r);else{var i=n;r>=55296&&57343>=r&&n++;for(var o=encodeURIComponent(t.slice(i,n+1)).substr(1).split("%"),a=0;a<o.length;a++)e.push(parseInt(o[a],16))}}return e}function A(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function C(t){for(var e,n,r,i=[],o=0;o<t.length;o++)e=t.charCodeAt(o),n=e>>8,r=e%256,i.push(r),i.push(n);return i}function N(t){return O.toByteArray(t)}function L(t,e,n,r,i){i&&(r-=r%i);for(var o=0;r>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}function R(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var O=t("base64-js"),j=t("ieee754"),I=t("is-array");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var P=1073741823;r.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);a>o&&t[o]===e[o];o++);return o!==a&&(n=t[o],i=e[o]),i>n?-1:n>i?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!I(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new r(e),o=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(i,o),o+=a.length}return i},r.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":n=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;case"hex":n=t.length>>>1;break;case"utf8":case"utf-8":n=k(t).length;break;case"base64":n=N(t).length;break;default:n=t.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(t,e,n){var r=!1;if(e>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return d(this,e,n);case"utf8":case"utf-8":return f(this,e,n);case"ascii":return h(this,e,n);case"binary":return p(this,e,n);case"base64":return l(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return r.compare(this,t)},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var l=r;r=e,e=n,n=l}e=Number(e)||0;var f=this.length-e;n?(n=Number(n),n>f&&(n=f)):n=f,r=String(r||"utf8").toLowerCase();var h;switch(r){case"hex":h=i(this,t,e,n);break;case"utf8":case"utf-8":h=o(this,t,e,n);break;case"ascii":h=a(this,t,e,n);break;case"binary":h=s(this,t,e,n);break;case"base64":h=u(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=c(this,t,e,n);break;default:throw new TypeError("Unknown encoding: "+r)}return h},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(t,e){var n=this.length;if(t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t),r.TYPED_ARRAY_SUPPORT)return r._augment(this.subarray(t,e));for(var i=e-t,o=new r(i,void 0,!0),a=0;i>a;a++)o[a]=this[a+t];return o},r.prototype.readUInt8=function(t,e){return e||v(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||v(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||v(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||v(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||v(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readInt8=function(t,e){return e||v(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||v(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||v(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||v(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||v(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||v(t,4,this.length),j.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||v(t,4,this.length),j.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||v(t,8,this.length),j.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||v(t,8,this.length),j.read(this,t,!1,52,8)},r.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):y(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):y(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):b(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):b(this,t,e,!1),e+4},r.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):y(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):y(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):b(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||m(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):b(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return x(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return x(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return _(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return _(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,i){var o=this;if(n||(n=0),i||0===i||(i=this.length),e||(e=0),i!==n&&0!==t.length&&0!==o.length){if(n>i)throw new TypeError("sourceEnd < sourceStart");if(0>e||e>=t.length)throw new TypeError("targetStart out of bounds");if(0>n||n>=o.length)throw new TypeError("sourceStart out of bounds");if(0>i||i>o.length)throw new TypeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var a=i-n;if(1e3>a||!r.TYPED_ARRAY_SUPPORT)for(var s=0;a>s;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+a),e)}},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new TypeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new TypeError("start out of bounds");if(0>n||n>this.length)throw new TypeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=k(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var q=r.prototype;r._augment=function(t){return t.constructor=r,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=q.get,t.set=q.set,t.write=q.write,t.toString=q.toString,t.toLocaleString=q.toString,t.toJSON=q.toJSON,t.equals=q.equals,t.compare=q.compare,t.copy=q.copy,t.slice=q.slice,t.readUInt8=q.readUInt8,t.readUInt16LE=q.readUInt16LE,t.readUInt16BE=q.readUInt16BE,t.readUInt32LE=q.readUInt32LE,t.readUInt32BE=q.readUInt32BE,t.readInt8=q.readInt8,t.readInt16LE=q.readInt16LE,t.readInt16BE=q.readInt16BE,t.readInt32LE=q.readInt32LE,t.readInt32BE=q.readInt32BE,t.readFloatLE=q.readFloatLE,t.readFloatBE=q.readFloatBE,t.readDoubleLE=q.readDoubleLE,t.readDoubleBE=q.readDoubleBE,t.writeUInt8=q.writeUInt8,t.writeUInt16LE=q.writeUInt16LE,t.writeUInt16BE=q.writeUInt16BE,t.writeUInt32LE=q.writeUInt32LE,t.writeUInt32BE=q.writeUInt32BE,t.writeInt8=q.writeInt8,t.writeInt16LE=q.writeInt16LE,t.writeInt16BE=q.writeInt16BE,t.writeInt32LE=q.writeInt32LE,t.writeInt32BE=q.writeInt32BE,t.writeFloatLE=q.writeFloatLE,t.writeFloatBE=q.writeFloatBE,t.writeDoubleLE=q.writeDoubleLE,t.writeDoubleBE=q.writeDoubleBE,t.fill=q.fill,t.inspect=q.inspect,t.toArrayBuffer=q.toArrayBuffer,t};var D=/[^+\/0-9A-z]/g},{"base64-js":26,ieee754:27,"is-array":28}],26:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a?62:e===s?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function n(t){function n(t){c[f++]=t}var r,i,a,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var f=0;for(r=0,i=0;a>r;r+=4,i+=3)s=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(s>>8&255),n(255&s)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],27:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*g}},{}],28:[function(t,e,n){var r=Array.isArray,i=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],29:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];n.apply(this,o)}else if(a(n)){for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],30:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],31:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],32:[function(n,r,i){(function(e){!function(n){function o(t){throw RangeError(j[t])}function a(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function s(t,e){return a(t.split(O),e).join(".")}function u(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function c(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=q(t>>>10&1023|55296),t=56320|1023&t),e+=q(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:E}function f(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function h(t,e,n){var r=0;for(t=n?P(t/k):t>>1,t+=P(t/e);t>I*M>>1;r+=E)t=P(t/I);return P(r+(I+1)*t/(t+T))}function p(t){var e,n,r,i,a,s,u,f,p,d,g=[],v=t.length,m=0,y=C,b=A;for(n=t.lastIndexOf(N),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&o("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;v>i;){for(a=m,s=1,u=E;i>=v&&o("invalid-input"),f=l(t.charCodeAt(i++)),(f>=E||f>P((_-m)/s))&&o("overflow"),m+=f*s,p=b>=u?S:u>=b+M?M:u-b,!(p>f);u+=E)d=E-p,s>P(_/d)&&o("overflow"),s*=d;e=g.length+1,b=h(m-a,e,0==a),P(m/e)>_-y&&o("overflow"),y+=P(m/e),m%=e,g.splice(m++,0,y)}return c(g)}function d(t){var e,n,r,i,a,s,c,l,p,d,g,v,m,y,b,w=[];for(t=u(t),v=t.length,e=C,n=0,a=A,s=0;v>s;++s)g=t[s],128>g&&w.push(q(g));for(r=i=w.length,i&&w.push(N);v>r;){for(c=_,s=0;v>s;++s)g=t[s],g>=e&&c>g&&(c=g);for(m=r+1,c-e>P((_-n)/m)&&o("overflow"),n+=(c-e)*m,e=c,s=0;v>s;++s)if(g=t[s],e>g&&++n>_&&o("overflow"),g==e){for(l=n,p=E;d=a>=p?S:p>=a+M?M:p-a,!(d>l);p+=E)b=l-d,y=E-d,w.push(q(f(d+b%y,0))),l=P(b/y);w.push(q(f(l,0))),a=h(n,m,r==i),n=0,++r}++n,++e}return w.join("")}function g(t){return s(t,function(t){return L.test(t)?p(t.slice(4).toLowerCase()):t})}function v(t){return s(t,function(t){return R.test(t)?"xn--"+d(t):t})}var m="object"==typeof i&&i,y="object"==typeof r&&r&&r.exports==m&&r,b="object"==typeof e&&e;(b.global===b||b.window===b)&&(n=b);var w,x,_=2147483647,E=36,S=1,M=26,T=38,k=700,A=72,C=128,N="-",L=/^xn--/,R=/[^ -~]/,O=/\x2E|\u3002|\uFF0E|\uFF61/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=E-S,P=Math.floor,q=String.fromCharCode;if(w={version:"1.2.4",ucs2:{decode:u,encode:c},decode:p,encode:d,toASCII:v,toUnicode:g},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return w});else if(m&&!m.nodeType)if(y)y.exports=w;else for(x in w)w.hasOwnProperty(x)&&(m[x]=w[x]);else n.punycode=w}(this)}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;c>l;++l){var f,h,p,d,g=t[l].replace(s,"%20"),v=g.indexOf(n);v>=0?(f=g.substr(0,v),h=g.substr(v+1)):(f=g,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],34:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var s=encodeURIComponent(i(a))+n;return o(t[a])?r(t[a],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[a]))}).join(e):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],35:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":33,"./encode":34}],36:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":37}],37:[function(t,e,n){(function(n){function r(t){return this instanceof r?(u.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}e.exports=r;var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},s=t("core-util-is");s.inherits=t("inherits");var u=t("./_stream_readable"),c=t("./_stream_writable");s.inherits(r,u),o(a(c.prototype),function(t){r.prototype[t]||(r.prototype[t]=c.prototype[t])})}).call(this,t("/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./_stream_readable":39,"./_stream_writable":41,"/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":57,"core-util-is":42,inherits:30}],38:[function(t,e,n){function r(t){return this instanceof r?void i.call(this,t):new r(t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":40,"core-util-is":42,inherits:30}],39:[function(t,e,n){(function(n){function r(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(A||(A=t("string_decoder/").StringDecoder),this.decoder=new A(e.encoding),this.encoding=e.encoding)}function i(e){t("./_stream_duplex");return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void T.call(this)):new i(e)}function o(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(k.isNullOrUndefined(n))e.reading=!1,e.ended||l(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else!e.decoder||i||r||(n=e.decoder.write(n)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&f(t)),p(t,e);else i||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){if(t>=N)t=N;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||k.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return k.isBuffer(e)||k.isString(e)||k.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,f(t)}function f(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(C("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(function(){h(t)}):h(t))}function h(t){C("emit readable"),t.emit("readable"),y(t)}function p(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){d(t,e)}))}function d(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(C("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;C("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&M.listenerCount(t,"data")&&(e.flowing=!0,y(t))}}function v(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(function(){m(t,e)}))}function m(t,e){e.resumeScheduled=!1,t.emit("resume"),y(t),e.flowing&&!e.reading&&t.read(0)}function y(t){var e=t._readableState;if(C("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function b(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,a=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(a)n=r.shift();else if(!t||t>=i)n=o?r.join(""):S.concat(r,i),r.length=0;else if(t<r[0].length){var s=r[0];n=s.slice(0,t),r[0]=s.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new S(t);for(var u=0,c=0,l=r.length;l>c&&t>u;c++){var s=r[0],f=Math.min(t-u,s.length);o?n+=s.slice(0,f):s.copy(n,u,0,f),f<s.length?r[0]=s.slice(f):r.shift(),u+=f}}return n}function w(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function x(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}function _(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}e.exports=i;var E=t("isarray"),S=t("buffer").Buffer;i.ReadableState=r;var M=t("events").EventEmitter;M.listenerCount||(M.listenerCount=function(t,e){return t.listeners(e).length});var T=t("stream"),k=t("core-util-is");k.inherits=t("inherits");var A,C=t("util");C=C&&C.debuglog?C.debuglog("stream"):function(){},k.inherits(i,T),i.prototype.push=function(t,e){var n=this._readableState;return k.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new S(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){return A||(A=t("string_decoder/").StringDecoder),this._readableState.decoder=new A(e),this._readableState.encoding=e,this};var N=8388608;i.prototype.read=function(t){C("read",t);var e=this._readableState,n=t;if((!k.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return C("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?w(this):f(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&w(this),null;var r=e.needReadable;C("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,C("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,C("reading or ended",r)),r&&(C("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=u(n,e));var i;return i=t>0?b(t,e):null,k.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&w(this),k.isNull(i)||this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){C("onunpipe"),t===f&&o()}function i(){C("onend"),t.end()}function o(){C("cleanup"),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("drain",v),t.removeListener("error",s),t.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",a),!h.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function a(e){C("ondata");var n=t.write(e);!1===n&&(C("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function s(e){C("onerror",e),l(),t.removeListener("error",s),0===M.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",c),l()}function c(){C("onfinish"),t.removeListener("close",u),l()}function l(){C("unpipe"),f.unpipe(t)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1,C("pipe count=%d opts=%j",h.pipesCount,e);var p=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,d=p?i:o;h.endEmitted?n.nextTick(d):f.once("end",d),t.on("unpipe",r);var v=g(f);return t.on("drain",v),f.on("data",a),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(s):t._events.error=[s,t._events.error]:t.on("error",s),t.once("close",u),t.once("finish",c),t.emit("pipe",f),h.flowing||(C("pipe resume"),f.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=_(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=T.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&f(this,i);else{var o=this;n.nextTick(function(){C("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(C("resume"),t.flowing=!0,t.reading||(C("resume read 0"),this.read(0)),v(this,t)),this},i.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(C("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(C("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=r.push(i);o||(n=!0,t.pause())}});for(var i in t)k.isFunction(t[i])&&k.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return x(o,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){C("wrapped _read",e),n&&(n=!1,t.resume())},r},i._fromList=b}).call(this,t("/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./_stream_duplex":37,"/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":57,buffer:25,"core-util-is":42,events:29,inherits:30,isarray:31,stream:47,"string_decoder/":48,util:24}],40:[function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,u.isNullOrUndefined(n)||t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t),this._transformState=new r(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){a(e,t)}):a(e)})}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");
if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var s=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":37,"core-util-is":42,inherits:30}],41:[function(t,e,n){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=e.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(e,this),this.writable=!0,void E.call(this)):new o(e)}function a(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function s(t,e,r,i){var o=!0;if(!(_.isBuffer(r)||_.isString(r)||_.isNullOrUndefined(r)||e.objectMode)){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),n.nextTick(function(){i(a)}),o=!1}return o}function u(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&_.isString(e)&&(e=new x(e,n)),e}function c(t,e,n,i,o){n=u(e,n,i),_.isBuffer(n)&&(i="buffer");var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new r(n,i,o)):l(t,e,!1,a,n,i,o),s}function l(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function f(t,e,r,i,o){r?n.nextTick(function(){e.pendingcb--,o(i)}):(e.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(h(r),e)f(t,r,i,e,o);else{var a=m(t,r);a||r.corked||r.bufferProcessing||!r.buffer.length||v(t,r),i?n.nextTick(function(){d(t,r,a,o)}):d(t,r,a,o)}}function d(t,e,n,r){n||g(t,e),e.pendingcb--,r(),b(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],r=0;r<e.buffer.length;r++)n.push(e.buffer[r].callback);e.pendingcb++,l(t,e,!0,e.length,e.buffer,"",function(t){for(var r=0;r<n.length;r++)e.pendingcb--,n[r](t)}),e.buffer=[]}else{for(var r=0;r<e.buffer.length;r++){var i=e.buffer[r],o=i.chunk,a=i.encoding,s=i.callback,u=e.objectMode?1:o.length;if(l(t,e,!1,u,o,a,s),e.writing){r++;break}}r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}e.bufferProcessing=!1}function m(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var n=m(t,e);return n&&(0===e.pendingcb?(y(t,e),e.finished=!0,t.emit("finish")):y(t,e)),n}function w(t,e,r){e.ending=!0,b(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var x=t("buffer").Buffer;o.WritableState=i;var _=t("core-util-is");_.inherits=t("inherits");var E=t("stream");_.inherits(o,E),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return _.isFunction(e)&&(n=e,e=null),_.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),_.isFunction(n)||(n=function(){}),r.ended?a(this,r,n):s(this,r,t,n)&&(r.pendingcb++,i=c(this,r,t,e,n)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||v(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var r=this._writableState;_.isFunction(t)?(n=t,t=null,e=null):_.isFunction(e)&&(n=e,e=null),_.isNullOrUndefined(t)||this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,t("/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./_stream_duplex":37,"/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":57,buffer:25,"core-util-is":42,inherits:30,stream:47}],42:[function(t,e,n){(function(t){function e(t){return Array.isArray(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return f(t)&&"[object RegExp]"===m(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return f(t)&&"[object Date]"===m(t)}function p(t){return f(t)&&("[object Error]"===m(t)||t instanceof Error)}function d(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(e){return t.isBuffer(e)}function m(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=f,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=g,n.isBuffer=v}).call(this,t("buffer").Buffer)},{buffer:25}],43:[function(t,e,n){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":38}],44:[function(t,e,n){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=t("stream"),n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":37,"./lib/_stream_passthrough.js":38,"./lib/_stream_readable.js":39,"./lib/_stream_transform.js":40,"./lib/_stream_writable.js":41,stream:47}],45:[function(t,e,n){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":40}],46:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":41}],47:[function(t,e,n){function r(){i.call(this)}e.exports=r;var i=t("events").EventEmitter,o=t("inherits");o(r,i),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function a(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),t.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),t.on("error",s),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{events:29,inherits:30,"readable-stream/duplex.js":36,"readable-stream/passthrough.js":43,"readable-stream/readable.js":44,"readable-stream/transform.js":45,"readable-stream/writable.js":46}],48:[function(t,e,n){function r(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=t("buffer").Buffer,u=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},{buffer:25}],49:[function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return u(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function f(t){return null==t}var h=t("punycode");n.parse=i,n.resolve=a,n.resolveObject=s,n.format=o,n.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(g),m=["'"].concat(v),y=["%","/","?",";","#"].concat(m),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},M={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=t("querystring");r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var i=p.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||i&&S[i]||(r=r.substr(2),this.slashes=!0)}if(!S[i]&&(a||i&&!M[i])){for(var s=-1,c=0;c<b.length;c++){var l=r.indexOf(b[c]);-1!==l&&(-1===s||s>l)&&(s=l)}var f,d;d=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==d&&(f=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(f)),s=-1;for(var c=0;c<y.length;c++){var l=r.indexOf(y[c]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),c=0,k=v.length;k>c;c++){var A=v[c];if(A&&!A.match(x)){for(var C="",N=0,L=A.length;L>N;N++)C+=A.charCodeAt(N)>127?"x":A[N];if(!C.match(x)){var R=v.slice(0,c),O=v.slice(c+1),j=A.match(_);j&&(R.push(j[1]),O.unshift(j[2])),O.length&&(r="/"+O.join(".")+r),this.hostname=R.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var I=this.hostname.split("."),P=[],c=0;c<I.length;++c){var q=I[c];P.push(q.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(q):q)}this.hostname=P.join(".")}var D=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+D,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!E[o])for(var c=0,k=m.length;k>c;c++){var F=m[c],B=encodeURIComponent(F);B===F&&(B=escape(F)),r=r.split(F).join(B)}var z=r.indexOf("#");-1!==z&&(this.hash=r.substr(z),r=r.slice(0,z));var H=r.indexOf("?");if(-1!==H?(this.search=r.substr(H),this.query=r.substr(H+1),e&&(this.query=T.parse(this.query)),r=r.slice(0,H)):e&&(this.search="",this.query={}),r&&(this.pathname=r),M[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",q=this.search||"";this.path=D+q}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=T.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||M[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),M[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!M[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||S[t.protocol])n.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",a=n.search||"";n.path=o+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),h=c||s||n.host&&t.pathname,p=h,d=n.pathname&&n.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],g=n.protocol&&!M[n.protocol];if(g&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),h=h&&(""===i[0]||""===d[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),n.search=t.search,n.query=t.query;else if(!f(t.search)){if(g){n.hostname=n.host=d.shift();var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var m=d.slice(-1)[0],y=(n.host||t.host)&&("."===m||".."===m)||""===m,b=0,w=d.length;w>=0;w--)m=d[w],"."==m?d.splice(w,1):".."===m?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!h&&!p)for(;b--;b)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(g){n.hostname=n.host=x?"":d.length?d.shift():"";var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return h=h||n.host&&d.length,h&&!x&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:32,querystring:35}],50:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],51:[function(t,n,r){(function(e,n){function i(t,e){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(e)?n.showHidden=e:e&&r._extend(n,e),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&T(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return b(i)||(i=u(t,i,n)),i}var o=c(t,e);if(o)return o;var a=Object.keys(e),g=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),M(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(e);if(0===a.length){if(T(e)){var v=e.name?": "+e.name:"";return t.stylize("[Function"+v+"]","special")}if(_(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(M(e))return l(e)}var m="",y=!1,w=["{","}"];if(d(e)&&(y=!0,w=["[","]"]),T(e)){var x=e.name?": "+e.name:"";m=" [Function"+x+"]"}if(_(e)&&(m=" "+RegExp.prototype.toString.call(e)),S(e)&&(m=" "+Date.prototype.toUTCString.call(e)),M(e)&&(m=" "+l(e)),0===a.length&&(!y||0==e.length))return w[0]+m+w[1];if(0>n)return _(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var E;return E=y?f(t,e,n,g,a):a.map(function(r){return h(t,e,n,g,r,y)}),t.seen.pop(),p(E,m,w)}function c(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i){for(var o=[],a=0,s=e.length;s>a;++a)L(e,String(a))?o.push(h(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}function h(t,e,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),L(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=v(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function _(t){return E(t)&&"[object RegExp]"===A(t)}function E(t){return"object"==typeof t&&null!==t}function S(t){return E(t)&&"[object Date]"===A(t)}function M(t){return E(t)&&("[object Error]"===A(t)||t instanceof Error)}function T(t){return"function"==typeof t}function k(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function A(t){return Object.prototype.toString.call(t)}function C(t){return 10>t?"0"+t.toString(10):t.toString(10)}function N(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var R=/%[sdj%]/g;r.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(t).replace(R,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),s=r[n];o>n;s=r[++n])a+=v(s)||!E(s)?" "+s:" "+i(s);return a},r.deprecate=function(t,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(x(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var O,j={};r.debuglog=function(t){if(x(O)&&(O=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!j[t])if(new RegExp("\\b"+t+"\\b","i").test(O)){var n=e.pid;j[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else j[t]=function(){};return j[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=g,r.isNull=v,r.isNullOrUndefined=m,r.isNumber=y,r.isString=b,r.isSymbol=w,r.isUndefined=x,r.isRegExp=_,r.isObject=E,r.isDate=S,r.isError=M,r.isFunction=T,r.isPrimitive=k,r.isBuffer=t("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",N(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":50,"/home/josh/src/imjs/node_modules/insert-module-globals/node_modules/process/browser.js":57,inherits:30}],52:[function(t,e,n){var r=e.exports,i=(t("events").EventEmitter,t("./lib/request")),o=t("url");r.request=function(t,e){"string"==typeof t&&(t=o.parse(t)),t||(t={}),t.host||t.port||(t.port=parseInt(window.location.port,10)),!t.host&&t.hostname&&(t.host=t.hostname),t.protocol||(t.scheme?t.protocol=t.scheme+":":t.protocol=window.location.protocol),t.host||(t.host=window.location.hostname||window.location.host),/:/.test(t.host)&&(t.port||(t.port=t.host.split(":")[1]),t.host=t.host.split(":")[0]),t.port||(t.port="https:"==t.protocol?443:80);var n=new i(new a,t);return e&&n.on("response",e),n},r.get=function(t,e){t.method="GET";var n=r.request(t,e);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{var n=new window.ActiveXObject(t[e]);return function(){if(n){var r=n;return n=null,r}return new window.ActiveXObject(t[e])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":53,events:29,url:49}],53:[function(t,e,n){var r=t("stream"),i=t("./response"),o=t("Base64"),a=t("inherits"),s=e.exports=function(t,e){var n=this;n.writable=!0,n.xhr=t,n.body=[],n.uri=(e.protocol||"http:")+"//"+e.host+(e.port?":"+e.port:"")+(e.path||"/"),"undefined"==typeof e.withCredentials&&(e.withCredentials=!0);try{t.withCredentials=e.withCredentials}catch(r){}if(e.responseType)try{t.responseType=e.responseType}catch(r){}if(t.open(e.method||"GET",n.uri,!0),t.onerror=function(t){n.emit("error",new Error("Network error"))},n._headers={},e.headers)for(var a=u(e.headers),s=0;s<a.length;s++){var c=a[s];if(n.isSafeRequestHeader(c)){var l=e.headers[c];n.setHeader(c,l)}}e.auth&&this.setHeader("Authorization","Basic "+o.btoa(e.auth));var f=new i;f.on("close",function(){n.emit("close")}),f.on("ready",function(){n.emit("response",f)}),f.on("error",function(t){n.emit("error",t)}),t.onreadystatechange=function(){t.__aborted||f.handle(t)}};a(s,r),s.prototype.setHeader=function(t,e){this._headers[t.toLowerCase()]=e},s.prototype.getHeader=function(t){return this._headers[t.toLowerCase()]},s.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},s.prototype.write=function(t){this.body.push(t)},s.prototype.destroy=function(t){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},s.prototype.end=function(t){void 0!==t&&this.body.push(t);for(var e=u(this._headers),n=0;n<e.length;n++){var r=e[n],i=this._headers[r];if(c(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(r,i[o]);else this.xhr.setRequestHeader(r,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(c(this.body[0])){for(var a=[],n=0;n<this.body.length;n++)a.push.apply(a,this.body[n]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var s=0,n=0;n<this.body.length;n++)s+=this.body[n].length;for(var a=new this.body[0].constructor(s),l=0,n=0;n<this.body.length;n++)for(var h=this.body[n],o=0;o<h.length;o++)a[l++]=h[o];this.xhr.send(a)}else if(f(this.body[0]))this.xhr.send(this.body[0]);else{for(var a="",n=0;n<this.body.length;n++)a+=this.body[n].toString();this.xhr.send(a)}},s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],s.prototype.isSafeRequestHeader=function(t){return t?-1===l(s.unsafeHeaders,t.toLowerCase()):!1};var u=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},f=function(t){return"undefined"!=typeof Blob&&t instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&t instanceof FormData?!0:void 0}},{"./response":54,Base64:55,inherits:56,stream:47}],54:[function(t,e,n){function r(t){for(var e=t.getAllResponseHeaders().split(/\r?\n/),n={},r=0;r<e.length;r++){var i=e[r];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var a=o[1].toLowerCase(),s=o[2];void 0!==n[a]?u(n[a])?n[a].push(s):n[a]=[n[a],s]:n[a]=s}else n[i]=!0}}return n}var i=t("stream"),o=t("util"),a=e.exports=function(t){this.offset=0,this.readable=!0};o.inherits(a,i);var s={streaming:!0,status2:!0};a.prototype.getResponse=function(t){var e=String(t.responseType).toLowerCase();return"blob"===e?t.responseBlob||t.response:"arraybuffer"===e?t.response:t.responseText},a.prototype.getHeader=function(t){return this.headers[t.toLowerCase()]},a.prototype.handle=function(t){if(2===t.readyState&&s.status2){try{this.statusCode=t.status,this.headers=r(t)}catch(e){s.status2=!1}s.status2&&this.emit("ready")}else if(s.streaming&&3===t.readyState){try{this.statusCode||(this.statusCode=t.status,this.headers=r(t),this.emit("ready"))}catch(e){}try{this._emitData(t)}catch(e){s.streaming=!1}}else 4===t.readyState&&(this.statusCode||(this.statusCode=t.status,this.emit("ready")),this._emitData(t),t.error?this.emit("error",this.getResponse(t)):this.emit("end"),this.emit("close"))},a.prototype._emitData=function(t){var e=this.getResponse(t);return e.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(e,this.offset)),void(this.offset=e.byteLength)):void(e.length>this.offset&&(this.emit("data",e.slice(this.offset)),this.offset=e.length))};var u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{stream:47,util:51}],55:[function(t,e,n){!function(){function t(t){this.message=t}var e="undefined"!=typeof n?n:this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,
t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var n,i,o=0,a=r,s="";e.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&n>>8-o%1*8)){if(i=e.charCodeAt(o+=.75),i>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return s}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,o=0,a=0,s="";i=e.charAt(a++);~i&&(n=o%4?64*n+i:i,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)i=r.indexOf(i);return s})}()},{}],56:[function(t,e,n){e.exports=t(30)},{"/home/josh/src/imjs/node_modules/grunt-browserify/node_modules/browserify/node_modules/inherits/inherits_browser.js":30}],57:[function(t,e,n){function r(){l=!1,s.length?c=s.concat(c):f=-1,c.length&&i()}function i(){if(!l){var t=setTimeout(r);l=!0;for(var e=c.length;e;){for(s=c,c=[];++f<e;)s[f].run();f=-1,e=c.length}s=null,l=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,u=e.exports={},c=[],l=!1,f=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}]},{},[2])(2)})}(window.intermine)}).call(e,function(){return this}(),n(8).setImmediate,n(11).Buffer)},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=p[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(c(r.parts[o],e))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(c(r.parts[o],e));p[r.id]={id:r.id,refs:1,parts:a}}}}function i(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],a=i[1],s=i[2],u=i[3],c={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(c):e.push(n[o]={id:o,parts:[c]})}return e}function o(t,e){var n=v(),r=b[b.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),b.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function u(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function c(t,e){var n,r,i;if(e.singleton){var o=y++;n=m||(m=s(e)),r=l.bind(null,n,o,!1),i=l.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),r=h.bind(null,n),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),r=f.bind(null,n),i=function(){a(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function l(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function f(t,e){var n=e.css,r=e.media;e.sourceMap;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function h(t,e){var n=e.css,r=(e.media,e.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var p={},d=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},g=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=d(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,b=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=g()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=i(t);return r(n,e),function(t){for(var o=[],a=0;a<n.length;a++){var s=n[a],u=p[s.id];u.refs--,o.push(u)}if(t){var c=i(t);r(c,e)}for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var w=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var r=n(20);"string"==typeof r&&(r=[[t.id,r,""]]);n(23)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===f?62:e===s||e===h?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function n(t){function n(t){c[f++]=t}var r,i,a,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var f=0;for(r=0,i=0;a>r;r+=4,i+=3)s=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(s>>8&255),n(255&s)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}(e)},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*g}},function(t,e){var n=Array.isArray,r=Object.prototype.toString;t.exports=n||function(t){return!!t&&"[object Array]"==r.call(t)}},function(t,e){function n(){c=!1,a.length?u=a.concat(u):l=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=u.length;e;){for(a=u,u=[];++l<e;)a&&a[l].run();l=-1,e=u.length}a=null,c=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var a,s=t.exports={},u=[],c=!1,l=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new i(t,e)),1!==u.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}]);